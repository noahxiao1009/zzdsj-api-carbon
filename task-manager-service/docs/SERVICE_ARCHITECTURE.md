# å¾®æœåŠ¡æ¶æ„ä¸è°ƒç”¨å…³ç³»

## ğŸ— æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯åº”ç”¨ (Frontend)                              â”‚
â”‚                    zzdsj-vector-web                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTP/WebSocket
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç½‘å…³æœåŠ¡ (Gateway)                                    â”‚
â”‚                  gateway-service:8080                                   â”‚
â”‚  â€¢ ç»Ÿä¸€APIå…¥å£  â€¢ è·¯ç”±è½¬å‘  â€¢ è®¤è¯æˆæƒ  â€¢ è´Ÿè½½å‡è¡¡                        â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”˜
      â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚
      â–¼     â–¼     â–¼     â–¼     â–¼     â–¼     â–¼     â–¼     â–¼     â–¼     â–¼     â–¼
   â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”
   â”‚Baseâ”‚â”‚çŸ¥è¯†â”‚â”‚æ™ºèƒ½â”‚â”‚æ¨¡å‹â”‚â”‚ç³»ç»Ÿâ”‚â”‚å›¾è°±â”‚â”‚èŠå¤©â”‚â”‚å·¥å…·â”‚â”‚æŠ¥å‘Šâ”‚â”‚çœ‹æ¿â”‚â”‚è°ƒåº¦â”‚â”‚æ¶ˆæ¯â”‚
   â”‚æœåŠ¡â”‚â”‚åº“  â”‚â”‚ä½“  â”‚â”‚æœåŠ¡â”‚â”‚æœåŠ¡â”‚â”‚æœåŠ¡â”‚â”‚æœåŠ¡â”‚â”‚æœåŠ¡â”‚â”‚æœåŠ¡â”‚â”‚æœåŠ¡â”‚â”‚æœåŠ¡â”‚â”‚æœåŠ¡â”‚
   â”‚8085â”‚â”‚8082â”‚â”‚8081â”‚â”‚8088â”‚â”‚8086â”‚â”‚8087â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚
   â””â”€â”€â”€â”€â”˜â””â”€â”¬â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜
          â”‚
          â”‚ å¼‚æ­¥ä»»åŠ¡è°ƒç”¨
          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                 ä»»åŠ¡ç®¡ç†æœåŠ¡ (Task Manager)                          â”‚
   â”‚                   task-manager-service:8084                         â”‚
   â”‚  â€¢ å¼‚æ­¥ä»»åŠ¡å¤„ç†  â€¢ é˜Ÿåˆ—ç®¡ç†  â€¢ å·¥ä½œè¿›ç¨‹æ±   â€¢ çŠ¶æ€è¿½è¸ª                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                    åŸºç¡€è®¾æ–½å±‚                                        â”‚
   â”‚  PostgreSQL  â”‚  Redis  â”‚  Milvus  â”‚  Elasticsearch  â”‚  RabbitMQ    â”‚
   â”‚    5434      â”‚  6379   â”‚   19530  â”‚      9200       â”‚    5672      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æœåŠ¡è°ƒç”¨å…³ç³»è¯¦è§£

### 1. å‰ç«¯ â†’ ç½‘å…³ â†’ çŸ¥è¯†åº“æœåŠ¡ (åŒæ­¥è°ƒç”¨)

```mermaid
sequenceDiagram
    participant F as Frontend
    participant G as Gateway
    participant K as Knowledge Service
    participant T as Task Manager
    
    F->>G: POST /api/v1/knowledge/upload
    G->>K: è½¬å‘ä¸Šä¼ è¯·æ±‚
    K->>K: ä¿å­˜æ–‡ä»¶å…ƒä¿¡æ¯
    K->>T: æäº¤æ–‡æ¡£å¤„ç†ä»»åŠ¡
    T->>K: è¿”å›ä»»åŠ¡ID
    K->>G: è¿”å›ä»»åŠ¡ID
    G->>F: è¿”å›ä»»åŠ¡ID
    
    Note over T: å¼‚æ­¥å¤„ç†æ–‡æ¡£
    T->>T: æ–‡æ¡£åˆ‡åˆ†ã€å‘é‡åŒ–ã€å­˜å‚¨
    T->>K: å®Œæˆå›è°ƒï¼ˆå¯é€‰ï¼‰
```

### 2. çŸ¥è¯†åº“æœåŠ¡ â†’ ä»»åŠ¡ç®¡ç†å™¨ (å¼‚æ­¥ä»»åŠ¡)

```python
# çŸ¥è¯†åº“æœåŠ¡ä¸­æäº¤ä»»åŠ¡
async def process_document(kb_id: str, file_path: str):
    """æäº¤æ–‡æ¡£å¤„ç†ä»»åŠ¡"""
    task_request = {
        "task_type": "document_processing",
        "kb_id": kb_id,
        "priority": "high",
        "payload": {
            "file_path": file_path,
            "chunk_size": 1000,
            "chunk_overlap": 200,
            "processing_mode": "intelligent_split"
        }
    }
    
    # è°ƒç”¨ä»»åŠ¡ç®¡ç†å™¨
    async with httpx.AsyncClient() as client:
        response = await client.post(
            "http://localhost:8084/api/v1/tasks",
            json=task_request
        )
        task_info = response.json()
        
    # è¿”å›ä»»åŠ¡IDç»™å‰ç«¯
    return {
        "task_id": task_info["id"],
        "status": "submitted",
        "message": "æ–‡æ¡£å¤„ç†ä»»åŠ¡å·²æäº¤"
    }
```

### 3. æ™ºèƒ½ä½“æœåŠ¡ â†’ ä»»åŠ¡ç®¡ç†å™¨ (æ‰¹å¤„ç†ä»»åŠ¡)

```python
# æ™ºèƒ½ä½“æœåŠ¡ä¸­æ‰¹é‡å¤„ç†
async def batch_knowledge_enhancement(kb_ids: List[str]):
    """æ‰¹é‡çŸ¥è¯†åº“å¢å¼º"""
    tasks = []
    for kb_id in kb_ids:
        tasks.append({
            "task_type": "knowledge_indexing",
            "kb_id": kb_id,
            "priority": "normal",
            "payload": {
                "enhancement_type": "semantic_analysis",
                "rebuild_index": True
            }
        })
    
    # æ‰¹é‡æäº¤ä»»åŠ¡
    async with httpx.AsyncClient() as client:
        response = await client.post(
            "http://localhost:8084/api/v1/tasks/batch",
            json=tasks
        )
        
    return response.json()
```

## ğŸ¯ Task Manager æ ¸å¿ƒèŒè´£

### 1. å¼‚æ­¥ä»»åŠ¡å¤„ç†ä¸­å¿ƒ

**ä¸»è¦èŒè´£**:
- æ¥æ”¶æ¥è‡ªå„ä¸ªå¾®æœåŠ¡çš„å¼‚æ­¥ä»»åŠ¡è¯·æ±‚
- ç®¡ç†ä»»åŠ¡é˜Ÿåˆ—å’Œä¼˜å…ˆçº§è°ƒåº¦
- æä¾›é«˜å¹¶å‘çš„ä»»åŠ¡å¤„ç†èƒ½åŠ›
- ä¿è¯ä»»åŠ¡æ‰§è¡Œçš„å¯é æ€§å’Œä¸€è‡´æ€§

**è´Ÿè´£çš„ä»»åŠ¡ç±»å‹**:
```go
const (
    TaskTypeDocumentProcessing   = "document_processing"    // æ–‡æ¡£å¤„ç†
    TaskTypeBatchProcessing      = "batch_processing"       // æ‰¹é‡å¤„ç†
    TaskTypeKnowledgeIndexing    = "knowledge_indexing"     // çŸ¥è¯†ç´¢å¼•
    TaskTypeEmbeddingGeneration  = "embedding_generation"   // åµŒå…¥ç”Ÿæˆ
    TaskTypeVectorStorage        = "vector_storage"         // å‘é‡å­˜å‚¨
    TaskTypeHealthCheck          = "health_check"           // å¥åº·æ£€æŸ¥
)
```

### 2. è§£å†³çš„æ ¸å¿ƒé—®é¢˜

#### é—®é¢˜1: APIå“åº”æ€§èƒ½
```
åŸå§‹é—®é¢˜: çŸ¥è¯†åº“APIå¤„ç†è€—æ—¶60ç§’ï¼Œå‰ç«¯æ— å“åº”
è§£å†³æ–¹æ¡ˆ: APIç§’çº§å“åº” + å¼‚æ­¥ä»»åŠ¡å¤„ç†
```

#### é—®é¢˜2: ç³»ç»Ÿèµ„æºç®¡ç†
```
åŸå§‹é—®é¢˜: å•è¿›ç¨‹åŒæ—¶å¤„ç†APIå’Œä»»åŠ¡ï¼Œèµ„æºå†²çª
è§£å†³æ–¹æ¡ˆ: æœåŠ¡åˆ†ç¦»ï¼Œä¸“ä¸šåŒ–å¤„ç†
```

#### é—®é¢˜3: ä»»åŠ¡å¯é æ€§
```
åŸå§‹é—®é¢˜: ä»»åŠ¡å¤±è´¥æ— é‡è¯•ï¼ŒçŠ¶æ€ä¸é€æ˜
è§£å†³æ–¹æ¡ˆ: å®Œæ•´çš„ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
```

### 3. å…·ä½“å·¥ä½œæµç¨‹

#### æ–‡æ¡£å¤„ç†æµç¨‹
```
1. çŸ¥è¯†åº“æœåŠ¡æ”¶åˆ°ä¸Šä¼ è¯·æ±‚ (50ms)
   â”œâ”€â”€ ä¿å­˜æ–‡ä»¶å…ƒä¿¡æ¯åˆ°æ•°æ®åº“
   â”œâ”€â”€ æäº¤å¤„ç†ä»»åŠ¡åˆ°Task Manager  
   â””â”€â”€ ç«‹å³è¿”å›ä»»åŠ¡IDç»™å‰ç«¯

2. Task Managerå¼‚æ­¥å¤„ç† (2-5åˆ†é’Ÿ)
   â”œâ”€â”€ é˜Ÿåˆ—è°ƒåº¦å’Œä¼˜å…ˆçº§ç®¡ç†
   â”œâ”€â”€ Workerè¿›ç¨‹æ± å¹¶å‘å¤„ç†
   â”œâ”€â”€ æ–‡æ¡£è§£æå’Œå†…å®¹æå–
   â”œâ”€â”€ æ™ºèƒ½åˆ‡åˆ†å’Œè¯­ä¹‰åˆ†æ
   â”œâ”€â”€ å‘é‡åŒ–å’ŒåµŒå…¥ç”Ÿæˆ
   â”œâ”€â”€ å­˜å‚¨åˆ°Milvuså’ŒElasticsearch
   â””â”€â”€ æ›´æ–°çŸ¥è¯†åº“ç´¢å¼•çŠ¶æ€

3. çŠ¶æ€æŸ¥è¯¢å’Œé€šçŸ¥
   â”œâ”€â”€ å‰ç«¯é€šè¿‡APIæŸ¥è¯¢ä»»åŠ¡è¿›åº¦
   â”œâ”€â”€ WebSocketå®æ—¶æ¨é€çŠ¶æ€æ›´æ–°
   â””â”€â”€ ä»»åŠ¡å®Œæˆåå›è°ƒé€šçŸ¥
```

## ğŸ”— æœåŠ¡é—´é€šä¿¡åè®®

### 1. HTTPåŒæ­¥è°ƒç”¨ (Service Client SDK)

```python
# çŸ¥è¯†åº“æœåŠ¡è°ƒç”¨ä»»åŠ¡ç®¡ç†å™¨
from shared.service_client import call_service, CallMethod

async def submit_task(task_data):
    result = await call_service(
        service_name="task-manager-service",
        method=CallMethod.POST,
        path="/api/v1/tasks",
        json=task_data,
        config=CallConfig(
            timeout=10,  # å¿«é€Ÿè¶…æ—¶ï¼Œé¿å…é˜»å¡
            retry_times=2
        )
    )
    return result
```

### 2. ä»»åŠ¡çŠ¶æ€å›è°ƒæœºåˆ¶

```python
# ä»»åŠ¡ç®¡ç†å™¨å®Œæˆåå›è°ƒçŸ¥è¯†åº“æœåŠ¡
async def task_completion_callback(task_id: str, result: dict):
    """ä»»åŠ¡å®Œæˆå›è°ƒ"""
    callback_data = {
        "task_id": task_id,
        "status": "completed",
        "result": result,
        "completed_at": datetime.now().isoformat()
    }
    
    await call_service(
        service_name="knowledge-service",
        method=CallMethod.POST,
        path=f"/api/v1/tasks/{task_id}/callback",
        json=callback_data
    )
```

### 3. WebSocketå®æ—¶é€šçŸ¥

```javascript
// å‰ç«¯å®æ—¶ç›‘æ§ä»»åŠ¡çŠ¶æ€
const ws = new WebSocket('ws://localhost:8080/ws/tasks');

ws.onmessage = function(event) {
    const taskUpdate = JSON.parse(event.data);
    console.log(`ä»»åŠ¡ ${taskUpdate.task_id} çŠ¶æ€: ${taskUpdate.status}`);
    console.log(`è¿›åº¦: ${taskUpdate.progress}%`);
    
    if (taskUpdate.status === 'completed') {
        // åˆ·æ–°çŸ¥è¯†åº“åˆ—è¡¨
        refreshKnowledgeBase();
    }
};
```

## ğŸ¨ ä»»åŠ¡ç®¡ç†å™¨å†…éƒ¨æ¶æ„

### 1. åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      APIå±‚ (HTTP/REST)                     â”‚
â”‚  TaskHandler â”‚ Routes â”‚ Middleware â”‚ Authentication       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Service)                      â”‚
â”‚  TaskService â”‚ WorkerService â”‚ QueueManager              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   ä»»åŠ¡å¤„ç†å±‚ (Worker)                       â”‚
â”‚  Worker Pool â”‚ Task Processors â”‚ Result Handlers         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    æ•°æ®è®¿é—®å±‚ (Repository)                   â”‚
â”‚  PostgreSQL â”‚ Redis â”‚ Task Storage â”‚ Status Tracking      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å·¥ä½œè¿›ç¨‹æ¨¡å‹

```go
// å·¥ä½œè¿›ç¨‹æ± ç®¡ç†
type WorkerPool struct {
    workers    map[string]*Worker
    queue      chan Task
    results    chan TaskResult
    maxWorkers int
}

// å•ä¸ªå·¥ä½œè¿›ç¨‹
type Worker struct {
    ID           string
    Status       WorkerStatus  // idle, busy, stopped
    CurrentTask  *Task
    ProcessedCount int64
    StartTime    time.Time
}
```

### 3. ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ

```
queued â†’ processing â†’ completed
   â”‚         â”‚            â”‚
   â”‚         â–¼            â–¼
   â”‚     retrying â”€â”€â†’ failed
   â”‚         â”‚            â”‚
   â–¼         â–¼            â–¼
canceled â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š æ€§èƒ½ä¸ç›‘æ§

### 1. å…³é”®æ€§èƒ½æŒ‡æ ‡

- **ä»»åŠ¡ååé‡**: 100+ tasks/second
- **APIå“åº”æ—¶é—´**: < 50ms
- **ä»»åŠ¡å¤„ç†å»¶è¿Ÿ**: < 1ç§’å…¥é˜Ÿ
- **ç³»ç»Ÿèµ„æºå ç”¨**: < 100MBå†…å­˜
- **ä»»åŠ¡æˆåŠŸç‡**: > 99%

### 2. ç›‘æ§æŒ‡æ ‡

```go
// PrometheusæŒ‡æ ‡
task_queue_size{priority="high"}           // é˜Ÿåˆ—å¤§å°
task_processing_duration_seconds           // å¤„ç†è€—æ—¶
task_success_total{type="document"}        // æˆåŠŸè®¡æ•°
task_failure_total{type="embedding"}      // å¤±è´¥è®¡æ•°
worker_pool_active_count                  // æ´»è·ƒWorkeræ•°
worker_pool_idle_count                    // ç©ºé—²Workeræ•°
```

### 3. å¥åº·æ£€æŸ¥

```bash
# æœåŠ¡å¥åº·æ£€æŸ¥
curl http://localhost:8084/health

# é˜Ÿåˆ—çŠ¶æ€æ£€æŸ¥  
curl http://localhost:8084/api/v1/stats/system
```

## ğŸš€ éƒ¨ç½²å’Œæ‰©å±•

### 1. å•æœºéƒ¨ç½²
```
Knowledge Service â”€â”€â”
Agent Service â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’ Task Manager (å•å®ä¾‹)
Model Service â”€â”€â”€â”€â”€â”€â”˜     â”œâ”€â”€ PostgreSQL
                          â””â”€â”€ Redis
```

### 2. é›†ç¾¤éƒ¨ç½²
```
Knowledge Service â”€â”€â”
Agent Service â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’ Load Balancer â”€â”€â†’ Task Manager Cluster
Model Service â”€â”€â”€â”€â”€â”€â”˜                       â”œâ”€â”€ Task Manager 1
                                            â”œâ”€â”€ Task Manager 2  
                                            â””â”€â”€ Task Manager N
                                                 â”œâ”€â”€ PostgreSQL (ä¸»ä»)
                                                 â””â”€â”€ Redis (é›†ç¾¤)
```

## ğŸ¯ æ€»ç»“

**Task Managerçš„æ ¸å¿ƒä»·å€¼**:

1. **æ€§èƒ½æå‡**: APIå“åº”ä»60ç§’ä¼˜åŒ–åˆ°æ¯«ç§’çº§
2. **æ¶æ„è§£è€¦**: ä¸šåŠ¡æœåŠ¡ä¸ä»»åŠ¡å¤„ç†å®Œå…¨åˆ†ç¦»
3. **å¯é æ€§å¢å¼º**: å®Œæ•´çš„ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
4. **æ‰©å±•æ€§ä¿è¯**: ç‹¬ç«‹æ‰©å®¹ï¼ŒæŒ‰éœ€è°ƒæ•´å¤„ç†èƒ½åŠ›
5. **è¿ç»´å‹å¥½**: ç‹¬ç«‹ç›‘æ§ã€æ—¥å¿—ã€éƒ¨ç½²

é€šè¿‡å¼•å…¥Task Managerï¼Œæ•´ä¸ªå¾®æœåŠ¡æ¶æ„å®ç°äº†**"å¿«é€Ÿå“åº” + å¯é å¤„ç†"**çš„å®Œç¾å¹³è¡¡ï¼Œå½»åº•è§£å†³äº†çŸ¥è¯†åº“æœåŠ¡çš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜ï¼ğŸ‰