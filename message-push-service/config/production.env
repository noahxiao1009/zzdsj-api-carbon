# Message Push Service 生产环境配置
# 请根据实际部署环境修改相应配置

# ===== 服务基本配置 =====
SERVICE_NAME=message-push-service
SERVICE_PORT=8089
SERVICE_VERSION=1.0.0
ENVIRONMENT=production

# ===== Redis配置 =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=5
REDIS_PASSWORD=your_redis_password_here
REDIS_MAX_CONNECTIONS=50
REDIS_CONNECTION_TIMEOUT=5
REDIS_SOCKET_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30

# ===== 日志配置 =====
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/message-push-service.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_ROTATE=true

# ===== 性能配置 =====
MAX_CONNECTIONS=1000
CONNECTION_TIMEOUT=300
HEARTBEAT_INTERVAL=30
MESSAGE_QUEUE_SIZE=10000
WORKER_THREADS=4
MAX_MESSAGE_SIZE=1048576

# ===== 安全配置 =====
ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_CREDENTIALS=true
RATE_LIMIT_PER_MINUTE=1000
ENABLE_API_KEY_AUTH=false
API_KEY=your_api_key_here

# ===== 监控配置 =====
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_HEALTH_CHECK=true
HEALTH_CHECK_INTERVAL=30
ENABLE_TRACING=false
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# ===== 消息队列配置 =====
MESSAGE_QUEUE_TYPE=redis
MESSAGE_TTL=3600
MESSAGE_RETRY_ATTEMPTS=3
MESSAGE_RETRY_DELAY=5
DEAD_LETTER_QUEUE=true

# ===== 集群配置 =====
CLUSTER_MODE=false
CLUSTER_NODES=
CLUSTER_DISCOVERY_SERVICE=
SERVICE_DISCOVERY_TTL=30

# ===== 缓存配置 =====
ENABLE_CACHE=true
CACHE_TTL=300
CACHE_MAX_SIZE=1000
CACHE_EVICTION_POLICY=lru

# ===== 限流配置 =====
ENABLE_RATE_LIMITING=true
RATE_LIMIT_WINDOW=60
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_BURST=100

# ===== SSL/TLS配置 =====
ENABLE_SSL=false
SSL_CERT_PATH=/app/ssl/cert.pem
SSL_KEY_PATH=/app/ssl/key.pem
SSL_CA_PATH=/app/ssl/ca.pem

# ===== 数据库配置 (如果需要持久化) =====
DATABASE_URL=postgresql://user:password@postgres:5432/message_push_db
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30

# ===== 外部服务配置 =====
GATEWAY_SERVICE_URL=http://gateway-service:8080
KNOWLEDGE_SERVICE_URL=http://knowledge-service:8082
AGENT_SERVICE_URL=http://agent-service:8081

# ===== 备份和恢复配置 =====
ENABLE_BACKUP=false
BACKUP_INTERVAL=3600
BACKUP_RETENTION_DAYS=7
BACKUP_STORAGE_PATH=/app/backups

# ===== 开发/调试配置 =====
DEBUG=false
RELOAD=false
PROFILING=false
ENABLE_SWAGGER=false