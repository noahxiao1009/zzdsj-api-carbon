2025-07-21 02:28:26,943 - __main__ - INFO - 🚀 Starting Simple Knowledge Service on port 8082
[32mINFO[0m:     Will watch for changes in these directories: ['/Users/wxn/Desktop/carbon/zzdsl-api-carbon/knowledge-service']
[32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:8082[0m (Press CTRL+C to quit)
[32mINFO[0m:     Started reloader process [[36m[1m33785[0m] using [36m[1mWatchFiles[0m
[32mINFO[0m:     Started server process [[36m33792[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:28:29,156 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:28:29,156 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:28:29,157 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:28:29,157 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:28:29,157 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:28:33,149 - simple_main - INFO - 🔵 [req_1753036113149] GET http://localhost:8082/health
2025-07-21 02:28:33,151 - simple_main - INFO - 🟢 [req_1753036113149] 200 - 0.001s
[32mINFO[0m:     127.0.0.1:51599 - "[1mGET /health HTTP/1.1[0m" [32m200 OK[0m
2025-07-21 02:28:37,667 - simple_main - INFO - 🔵 [req_1753036117667] GET http://localhost:8082/
2025-07-21 02:28:37,668 - simple_main - INFO - 🟢 [req_1753036117667] 200 - 0.001s
[32mINFO[0m:     127.0.0.1:51614 - "[1mGET / HTTP/1.1[0m" [32m200 OK[0m
2025-07-21 02:28:43,232 - simple_main - INFO - 🔵 [req_1753036123232] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 02:28:43,233 - simple_main - INFO - 🟢 [req_1753036123232] 200 - 0.001s
[32mINFO[0m:     127.0.0.1:51626 - "[1mGET /api/v1/knowledge-bases/ HTTP/1.1[0m" [32m200 OK[0m
2025-07-21 02:29:09,548 - watchfiles.main - INFO - 1 change detected
2025-07-21 02:42:19,249 - watchfiles.main - INFO - 1 change detected
2025-07-21 02:42:51,776 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/config/settings.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:42:51,902 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m33792[0m]
2025-07-21 02:42:52,265 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m34570[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:42:52,984 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:42:52,984 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:42:52,984 - watchfiles.main - INFO - 3 changes detected
2025-07-21 02:42:52,984 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:42:52,984 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:42:52,984 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:43:01,983 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/config/settings.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:43:02,165 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m34570[0m]
2025-07-21 02:43:02,532 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m34589[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:43:02,814 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:43:02,814 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:43:02,814 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:43:02,814 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:43:02,814 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:43:02,889 - watchfiles.main - INFO - 3 changes detected
2025-07-21 02:43:38,132 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/utils/minio_client.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:43:38,240 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m34589[0m]
2025-07-21 02:43:38,608 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m34688[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:43:39,423 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:43:39,423 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:43:39,423 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:43:39,423 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:43:39,423 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:43:47,927 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/services/document_processing/file_uploader.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:43:48,125 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m34688[0m]
2025-07-21 02:43:48,490 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m34724[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:43:49,666 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:43:49,666 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:43:49,666 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:43:49,666 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:43:49,666 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:44:00,954 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/services/document_processing/file_uploader.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:44:01,135 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m34724[0m]
2025-07-21 02:44:01,504 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m34756[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:44:02,455 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:44:02,456 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:44:02,456 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:44:02,456 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:44:02,456 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:44:37,008 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/utils/minio_client.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:44:37,140 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m34756[0m]
2025-07-21 02:44:37,514 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m34845[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:44:38,733 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:44:38,733 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:44:38,734 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:44:38,734 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:44:38,734 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:44:53,035 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'test_minio.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:44:53,205 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m34845[0m]
2025-07-21 02:44:53,575 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m34866[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:44:54,760 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:44:54,760 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:44:54,760 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:44:54,760 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:44:54,760 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:44:58,496 - watchfiles.main - INFO - 4 changes detected
2025-07-21 02:45:06,419 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/config/settings.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:45:06,535 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m34866[0m]
2025-07-21 02:45:06,906 - watchfiles.main - INFO - 1 change detected
2025-07-21 02:45:07,731 - watchfiles.main - INFO - 3 changes detected
[32mINFO[0m:     Started server process [[36m34910[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:45:07,843 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:45:07,844 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:45:07,844 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:45:07,844 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:45:07,844 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:46:12,289 - watchfiles.main - INFO - 1 change detected
2025-07-21 02:48:09,922 - watchfiles.main - INFO - 3 changes detected
2025-07-21 02:54:56,463 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/core/splitters/base_splitter.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:54:56,580 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m34910[0m]
2025-07-21 02:54:56,940 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m35630[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:54:57,293 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:54:57,293 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:54:57,293 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:54:57,293 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:54:57,293 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:55:03,625 - watchfiles.main - INFO - 12 changes detected
2025-07-21 02:55:19,783 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/core/splitters/__init__.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 02:55:19,940 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m35630[0m]
2025-07-21 02:55:20,302 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m35733[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 02:55:20,887 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 02:55:20,887 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 02:55:20,887 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 02:55:20,887 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 02:55:20,887 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 02:55:26,324 - watchfiles.main - INFO - 3 changes detected
2025-07-21 02:55:26,695 - watchfiles.main - INFO - 3 changes detected
2025-07-21 03:05:20,330 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/core/splitters/agentic_based_splitter.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 03:05:20,487 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m35733[0m]
2025-07-21 03:05:20,891 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m36893[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 03:05:22,815 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 03:05:22,816 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 03:05:22,816 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 03:05:22,816 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 03:05:22,816 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 03:05:33,202 - watchfiles.main - INFO - 3 changes detected
2025-07-21 03:10:34,819 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/core/splitters/agentic_based_splitter.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 03:10:34,993 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m36893[0m]
2025-07-21 03:10:35,354 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m37159[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 03:10:35,939 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 03:10:35,939 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 03:10:35,939 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 03:10:35,939 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 03:10:35,939 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 03:10:43,369 - watchfiles.main - INFO - 6 changes detected
2025-07-21 03:11:04,873 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/services/document_processing/embedding_service.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 03:11:05,049 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m37159[0m]
2025-07-21 03:11:05,416 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m37216[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 03:11:05,596 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 03:11:05,596 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 03:11:05,596 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 03:11:05,596 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 03:11:05,596 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 03:11:13,120 - watchfiles.main - INFO - 10 changes detected
2025-07-21 03:11:13,526 - watchfiles.main - INFO - 9 changes detected
2025-07-21 03:11:14,826 - watchfiles.main - INFO - 3 changes detected
2025-07-21 03:12:56,699 - watchfiles.main - INFO - 1 change detected
[33mWARNING[0m:  WatchFiles detected changes in 'app/api/splitter_routes.py'. Reloading...
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 03:12:56,869 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m37216[0m]
2025-07-21 03:12:57,232 - watchfiles.main - INFO - 1 change detected
[32mINFO[0m:     Started server process [[36m37327[0m]
[32mINFO[0m:     Waiting for application startup.
2025-07-21 03:12:57,699 - simple_main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 03:12:57,699 - simple_main - INFO - ✅ Settings loaded successfully
2025-07-21 03:12:57,699 - simple_main - INFO - 📊 Database URL: postgresql://zzdsj_demo:zzdsj123@167.71.85.231:5432/zzdsj_demo
2025-07-21 03:12:57,699 - simple_main - INFO - 📊 Redis URL: redis://localhost:6379/0
2025-07-21 03:12:57,699 - simple_main - INFO - 🎯 Knowledge Service ready on port 8082
[32mINFO[0m:     Application startup complete.
2025-07-21 03:13:20,777 - watchfiles.main - INFO - 4 changes detected
[32mINFO[0m:     Shutting down
[32mINFO[0m:     Waiting for application shutdown.
2025-07-21 03:13:33,453 - simple_main - INFO - 🛑 Knowledge Service shutting down...
[32mINFO[0m:     Application shutdown complete.
[32mINFO[0m:     Finished server process [[36m37327[0m]
[32mINFO[0m:     Stopping reloader process [[36m[1m33785[0m]
2025-07-21 03:13:41,284 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 03:13:43,759 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 03:13:43,760 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 03:13:43,760 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 03:13:43,760 - main - ERROR - ❌ Failed to initialize Knowledge Service: TokenBasedSplitter.__init__() missing 1 required positional argument: 'config'
2025-07-21 03:13:43,855 - watchfiles.main - INFO - 4 changes detected
2025-07-21 03:13:44,218 - watchfiles.main - INFO - 1 change detected
2025-07-21 03:33:12,344 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 03:33:15,274 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 03:33:15,275 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 03:33:15,275 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 03:33:15,275 - main - ERROR - ❌ Failed to initialize Knowledge Service: Can't instantiate abstract class SemanticBasedSplitter without an implementation for abstract method 'split_text'
2025-07-21 03:33:15,789 - watchfiles.main - INFO - 1 change detected
2025-07-21 03:53:32,004 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 03:53:35,496 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 03:53:35,497 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 03:53:35,497 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 03:53:35,497 - main - ERROR - ❌ Failed to initialize Knowledge Service: BaseSplitter.__init__() missing 1 required positional argument: 'splitter_type'
2025-07-21 03:53:36,025 - watchfiles.main - INFO - 1 change detected
2025-07-21 04:32:19,718 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 04:32:22,549 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 04:32:22,549 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 04:32:22,550 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 04:32:22,550 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 04:32:22,550 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 04:32:22,550 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 04:32:24,800 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 04:32:24,800 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 04:32:25,399 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 04:32:25,399 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 04:32:25,911 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 04:32:25,911 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 04:32:26,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 04:32:26,445 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 04:32:26,446 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'status_1': 'active', 'param_1': 1}
2025-07-21 04:32:26,962 - app.core.enhanced_knowledge_manager - ERROR - Failed to get manager stats: (psycopg2.errors.UndefinedColumn) column knowledge_bases.status does not exist
LINE 1: ...al_count, count(knowledge_bases.id) FILTER (WHERE knowledge_...
                                                             ^

[SQL: SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'active', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 04:32:26,963 - main - INFO - 📊 Knowledge Service Stats: {'error': "(psycopg2.errors.UndefinedColumn) column knowledge_bases.status does not exist\nLINE 1: ...al_count, count(knowledge_bases.id) FILTER (WHERE knowledge_...\n                                                             ^\n\n[SQL: SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size \nFROM knowledge_bases \n LIMIT %(param_1)s]\n[parameters: {'status_1': 'active', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
2025-07-21 04:32:26,963 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 04:33:22,014 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 05:17:12,103 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 05:17:14,900 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 05:17:14,900 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 05:17:14,900 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 05:17:14,900 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 05:17:14,901 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 05:17:14,901 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 05:17:17,079 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 05:17:17,079 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:17:17,594 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 05:17:17,595 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:17:18,110 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 05:17:18,111 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:17:18,623 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 05:17:18,645 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 05:17:18,662 - sqlalchemy.engine.Engine - INFO - [generated in 0.01661s] {'status_1': 'active', 'param_1': 1}
2025-07-21 05:17:19,180 - app.core.enhanced_knowledge_manager - ERROR - Failed to get manager stats: (psycopg2.errors.UndefinedColumn) column knowledge_bases.status does not exist
LINE 1: ...al_count, count(knowledge_bases.id) FILTER (WHERE knowledge_...
                                                             ^

[SQL: SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'active', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 05:17:19,181 - main - INFO - 📊 Knowledge Service Stats: {'error': "(psycopg2.errors.UndefinedColumn) column knowledge_bases.status does not exist\nLINE 1: ...al_count, count(knowledge_bases.id) FILTER (WHERE knowledge_...\n                                                             ^\n\n[SQL: SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size \nFROM knowledge_bases \n LIMIT %(param_1)s]\n[parameters: {'status_1': 'active', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
2025-07-21 05:17:19,181 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 05:48:38,608 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 05:48:44,315 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 05:48:46,871 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 05:48:46,872 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 05:48:46,872 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 05:48:46,872 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 05:48:46,872 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 05:48:46,872 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 05:48:49,043 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 05:48:49,044 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:48:49,555 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 05:48:49,556 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:48:50,089 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 05:48:50,089 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:48:50,604 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 05:48:50,624 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 05:48:50,624 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'status_1': 'active', 'param_1': 1}
2025-07-21 05:48:51,167 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 05:48:51,167 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 05:48:51,426 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 05:48:51,426 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 05:48:51,685 - app.core.enhanced_knowledge_manager - ERROR - Failed to get manager stats: (psycopg2.errors.UndefinedColumn) column document_chunks.embedding_status does not exist
LINE 1: ...l_chunks, count(document_chunks.id) FILTER (WHERE document_c...
                                                             ^

[SQL: SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s]
[parameters: {'embedding_status_1': 'completed', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 05:48:51,685 - main - INFO - 📊 Knowledge Service Stats: {'error': "(psycopg2.errors.UndefinedColumn) column document_chunks.embedding_status does not exist\nLINE 1: ...l_chunks, count(document_chunks.id) FILTER (WHERE document_c...\n                                                             ^\n\n[SQL: SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens \nFROM document_chunks \n LIMIT %(param_1)s]\n[parameters: {'embedding_status_1': 'completed', 'param_1': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
2025-07-21 05:48:51,686 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 05:51:02,000 - main - INFO - 🔵 [req_1753048262000] GET http://localhost:8082/health
2025-07-21 05:51:02,002 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 05:51:02,003 - sqlalchemy.engine.Engine - INFO - [cached since 131.4s ago] {'status_1': 'active', 'param_1': 1}
2025-07-21 05:51:02,274 - app.core.enhanced_knowledge_manager - ERROR - Failed to get manager stats: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block

[SQL: SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'active', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/2j85)
2025-07-21 05:51:02,274 - main - INFO - 🟢 [req_1753048262000] 200 - 0.274s
2025-07-21 05:52:19,303 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 05:52:25,217 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 05:52:27,652 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 05:52:27,653 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 05:52:27,653 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 05:52:27,653 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 05:52:27,653 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 05:52:27,653 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 05:52:29,799 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 05:52:29,799 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:52:30,411 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 05:52:30,411 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:52:31,029 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 05:52:31,030 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:52:31,548 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 05:52:31,569 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 05:52:31,569 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'active', 'param_1': 1}
2025-07-21 05:52:32,076 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 05:52:32,076 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 05:52:32,334 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 05:52:32,334 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 05:52:32,665 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 05:52:32,665 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {}
2025-07-21 05:52:32,974 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 05:52:32,974 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 05:52:33,277 - app.core.enhanced_knowledge_manager - ERROR - Failed to get manager stats: (psycopg2.errors.UndefinedTable) relation "processing_jobs" does not exist
LINE 2: FROM processing_jobs 
             ^

[SQL: SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 05:52:33,278 - main - INFO - 📊 Knowledge Service Stats: {'error': '(psycopg2.errors.UndefinedTable) relation "processing_jobs" does not exist\nLINE 2: FROM processing_jobs \n             ^\n\n[SQL: SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration \nFROM processing_jobs \n LIMIT %(param_1)s]\n[parameters: {\'status_1\': \'pending\', \'status_2\': \'running\', \'status_3\': \'completed\', \'status_4\': \'failed\', \'param_1\': 1}]\n(Background on this error at: https://sqlalche.me/e/20/f405)'}
2025-07-21 05:52:33,278 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 05:54:15,489 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 05:54:20,118 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 05:54:22,746 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 05:54:22,747 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 05:54:22,747 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 05:54:22,747 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 05:54:22,747 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 05:54:22,747 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 05:54:24,856 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 05:54:24,856 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:54:25,365 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 05:54:25,365 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:54:25,871 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 05:54:25,871 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 05:54:26,433 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 05:54:26,457 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 05:54:26,457 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'active', 'param_1': 1}
2025-07-21 05:54:27,048 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 05:54:27,049 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 05:54:27,306 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 05:54:27,306 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 05:54:27,662 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 05:54:27,663 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 05:54:27,971 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 05:54:27,972 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 05:54:28,228 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 05:54:28,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 05:54:28,483 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 05:54:28,484 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 05:59:47,759 - main - INFO - 🔵 [req_1753048787759] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 05:59:47,759 - main - INFO - 🟢 [req_1753048787759] 307 - 0.001s
2025-07-21 06:04:55,027 - main - INFO - 🔵 [req_1753049095027] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 06:04:55,028 - main - INFO - 🟢 [req_1753049095027] 307 - 0.001s
2025-07-21 06:05:11,038 - main - INFO - 🔵 [req_1753049111038] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 06:05:11,039 - main - INFO - 🟢 [req_1753049111038] 307 - 0.000s
2025-07-21 06:07:48,552 - main - INFO - 🔵 [req_1753049268552] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 06:07:48,554 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 06:07:48,554 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 06:07:50,907 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 06:07:50,912 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 06:07:50,934 - sqlalchemy.engine.Engine - INFO - [generated in 0.02197s] {'param_1': 10, 'param_2': 0}
2025-07-21 06:07:51,520 - app.core.enhanced_knowledge_manager - ERROR - Failed to list knowledge bases: (psycopg2.errors.UndefinedColumn) column knowledge_bases.vector_store_type does not exist
LINE 1: ...dimension AS knowledge_bases_embedding_dimension, knowledge_...
                                                             ^

[SQL: SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 06:07:51,534 - app.api.knowledge_routes - ERROR - Failed to list knowledge bases: 500: {'error': 'LIST_KNOWLEDGE_BASES_FAILED', 'message': "(psycopg2.errors.UndefinedColumn) column knowledge_bases.vector_store_type does not exist\nLINE 1: ...dimension AS knowledge_bases_embedding_dimension, knowledge_...\n                                                             ^\n\n[SQL: SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings \nFROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC \n LIMIT %(param_1)s OFFSET %(param_2)s]\n[parameters: {'param_1': 10, 'param_2': 0}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
2025-07-21 06:07:51,535 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 06:07:51,795 - main - INFO - 🟢 [req_1753049268552] 500 - 3.243s
2025-07-21 08:05:29,467 - main - INFO - 🔵 [req_1753056329467] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:05:29,468 - main - INFO - 🟢 [req_1753056329467] 307 - 0.001s
2025-07-21 08:05:31,270 - main - INFO - 🔵 [req_1753056331270] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 08:05:31,271 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 08:05:31,271 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 08:05:31,272 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 08:05:31,272 - main - INFO - 🟢 [req_1753056331270] 500 - 0.002s
2025-07-21 08:05:50,869 - main - INFO - 🔵 [req_1753056350869] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:05:50,872 - main - INFO - 🟢 [req_1753056350869] 307 - 0.003s
2025-07-21 08:05:50,910 - main - INFO - 🔵 [req_1753056350910] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:05:50,911 - main - INFO - 🟢 [req_1753056350910] 307 - 0.001s
2025-07-21 08:06:13,725 - main - INFO - 🔵 [req_1753056373725] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:06:13,726 - main - INFO - 🟢 [req_1753056373725] 307 - 0.001s
2025-07-21 08:06:13,784 - main - INFO - 🔵 [req_1753056373784] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:06:13,784 - main - INFO - 🟢 [req_1753056373784] 307 - 0.000s
2025-07-21 08:08:23,457 - main - INFO - 🔵 [req_1753056503457] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:08:23,459 - main - INFO - 🔵 [req_1753056503459] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:08:23,460 - main - INFO - 🟢 [req_1753056503457] 307 - 0.002s
2025-07-21 08:08:23,460 - main - INFO - 🟢 [req_1753056503459] 307 - 0.001s
2025-07-21 08:08:23,501 - main - INFO - 🔵 [req_1753056503501] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:08:23,502 - main - INFO - 🔵 [req_1753056503502] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:08:23,502 - main - INFO - 🟢 [req_1753056503501] 307 - 0.001s
2025-07-21 08:08:23,503 - main - INFO - 🟢 [req_1753056503502] 307 - 0.001s
2025-07-21 08:09:06,572 - main - INFO - 🔵 [req_1753056546572] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:09:06,573 - main - INFO - 🔵 [req_1753056546573] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:09:06,573 - main - INFO - 🟢 [req_1753056546572] 307 - 0.001s
2025-07-21 08:09:06,574 - main - INFO - 🟢 [req_1753056546573] 307 - 0.001s
2025-07-21 08:09:06,627 - main - INFO - 🔵 [req_1753056546627] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:09:06,628 - main - INFO - 🔵 [req_1753056546628] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:09:06,629 - main - INFO - 🟢 [req_1753056546627] 307 - 0.001s
2025-07-21 08:09:06,629 - main - INFO - 🟢 [req_1753056546628] 307 - 0.001s
2025-07-21 08:13:08,484 - main - INFO - 🔵 [req_1753056788483] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 08:13:08,485 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 08:13:08,485 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 08:13:10,068 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 08:13:10,068 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 08:13:10,069 - sqlalchemy.engine.Engine - INFO - [cached since 4826s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 08:13:10,586 - app.core.enhanced_knowledge_manager - ERROR - Failed to list knowledge bases: (psycopg2.errors.UndefinedColumn) column knowledge_bases.vector_store_type does not exist
LINE 1: ...dimension AS knowledge_bases_embedding_dimension, knowledge_...
                                                             ^

[SQL: SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 08:13:10,586 - app.api.knowledge_routes - ERROR - Failed to list knowledge bases: 500: {'error': 'LIST_KNOWLEDGE_BASES_FAILED', 'message': "(psycopg2.errors.UndefinedColumn) column knowledge_bases.vector_store_type does not exist\nLINE 1: ...dimension AS knowledge_bases_embedding_dimension, knowledge_...\n                                                             ^\n\n[SQL: SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings \nFROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC \n LIMIT %(param_1)s OFFSET %(param_2)s]\n[parameters: {'param_1': 10, 'param_2': 0}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
2025-07-21 08:13:10,587 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 08:13:10,844 - main - INFO - 🟢 [req_1753056788483] 500 - 2.361s
2025-07-21 08:15:18,012 - main - INFO - 🔵 [req_1753056918012] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:15:18,013 - main - INFO - 🔵 [req_1753056918013] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:15:18,013 - main - INFO - 🟢 [req_1753056918012] 307 - 0.001s
2025-07-21 08:15:18,014 - main - INFO - 🟢 [req_1753056918013] 307 - 0.001s
2025-07-21 08:15:20,757 - main - INFO - 🔵 [req_1753056920757] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 08:15:20,758 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 08:15:20,758 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 08:15:20,758 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 08:15:20,759 - main - INFO - 🟢 [req_1753056920757] 500 - 0.002s
2025-07-21 08:26:08,049 - main - INFO - 🔵 [req_1753057568049] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:26:08,049 - main - INFO - 🔵 [req_1753057568049] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:26:08,050 - main - INFO - 🟢 [req_1753057568049] 307 - 0.001s
2025-07-21 08:26:08,050 - main - INFO - 🟢 [req_1753057568049] 307 - 0.001s
2025-07-21 08:26:08,095 - main - INFO - 🔵 [req_1753057568095] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:26:08,096 - main - INFO - 🔵 [req_1753057568096] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:26:08,096 - main - INFO - 🟢 [req_1753057568095] 307 - 0.001s
2025-07-21 08:26:08,097 - main - INFO - 🟢 [req_1753057568096] 307 - 0.001s
2025-07-21 08:33:33,575 - main - INFO - 🔵 [req_1753058013575] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:33:33,576 - main - INFO - 🔵 [req_1753058013576] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:33:33,577 - main - INFO - 🟢 [req_1753058013575] 307 - 0.002s
2025-07-21 08:33:33,578 - main - INFO - 🟢 [req_1753058013576] 307 - 0.002s
2025-07-21 08:33:33,615 - main - INFO - 🔵 [req_1753058013615] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:33:33,616 - main - INFO - 🔵 [req_1753058013616] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:33:33,616 - main - INFO - 🟢 [req_1753058013615] 307 - 0.001s
2025-07-21 08:33:33,616 - main - INFO - 🟢 [req_1753058013616] 307 - 0.001s
2025-07-21 08:52:22,625 - main - INFO - 🔵 [req_1753059142625] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:52:22,625 - main - INFO - 🔵 [req_1753059142625] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:52:22,626 - main - INFO - 🟢 [req_1753059142625] 307 - 0.001s
2025-07-21 08:52:22,626 - main - INFO - 🟢 [req_1753059142625] 307 - 0.001s
2025-07-21 08:52:22,679 - main - INFO - 🔵 [req_1753059142679] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 08:52:22,680 - main - INFO - 🔵 [req_1753059142680] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 08:52:22,680 - main - INFO - 🟢 [req_1753059142679] 307 - 0.001s
2025-07-21 08:52:22,680 - main - INFO - 🟢 [req_1753059142680] 307 - 0.001s
2025-07-21 08:54:42,544 - main - INFO - 🔵 [req_1753059282544] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 08:54:42,545 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 08:54:42,545 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 08:56:15,287 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 08:56:15,288 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 08:56:15,288 - sqlalchemy.engine.Engine - INFO - [cached since 6210s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 08:56:15,827 - app.core.enhanced_knowledge_manager - ERROR - Failed to list knowledge bases: (psycopg2.errors.UndefinedColumn) column knowledge_bases.vector_store_type does not exist
LINE 1: ...dimension AS knowledge_bases_embedding_dimension, knowledge_...
                                                             ^

[SQL: SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 08:56:15,828 - app.api.knowledge_routes - ERROR - Failed to list knowledge bases: 500: {'error': 'LIST_KNOWLEDGE_BASES_FAILED', 'message': "(psycopg2.errors.UndefinedColumn) column knowledge_bases.vector_store_type does not exist\nLINE 1: ...dimension AS knowledge_bases_embedding_dimension, knowledge_...\n                                                             ^\n\n[SQL: SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings \nFROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC \n LIMIT %(param_1)s OFFSET %(param_2)s]\n[parameters: {'param_1': 10, 'param_2': 0}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
2025-07-21 08:56:15,829 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 08:56:16,138 - main - INFO - 🟢 [req_1753059282544] 500 - 93.594s
2025-07-21 09:11:10,791 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 09:11:48,944 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 09:11:51,322 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 09:11:51,323 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 09:11:51,323 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 09:11:51,323 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:11:51,323 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:11:51,323 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 09:11:53,852 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 09:11:53,852 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:11:54,385 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 09:11:54,385 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:11:55,007 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 09:11:55,007 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:11:55,613 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:11:55,636 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 09:11:55,636 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'active', 'param_1': 1}
2025-07-21 09:11:56,239 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 09:11:56,239 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {}
2025-07-21 09:11:56,540 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 09:11:56,540 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 09:11:56,957 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 09:11:56,957 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 09:11:57,235 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 09:11:57,235 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 09:11:57,504 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 09:11:57,504 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 09:11:57,877 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 09:11:57,877 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 09:12:17,394 - main - INFO - 🔵 [req_1753060337394] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 09:12:17,395 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:12:17,395 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:12:19,062 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:12:19,066 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 09:12:19,067 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'param_1': 10, 'param_2': 0}
2025-07-21 09:12:19,662 - app.core.enhanced_knowledge_manager - ERROR - Failed to list knowledge bases: (psycopg2.errors.UndefinedColumn) column knowledge_bases.similarity_threshold does not exist
LINE 1: ...chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_...
                                                             ^

[SQL: SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s]
[parameters: {'param_1': 10, 'param_2': 0}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 09:12:19,662 - app.api.knowledge_routes - ERROR - Failed to list knowledge bases: 500: {'error': 'LIST_KNOWLEDGE_BASES_FAILED', 'message': "(psycopg2.errors.UndefinedColumn) column knowledge_bases.similarity_threshold does not exist\nLINE 1: ...chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_...\n                                                             ^\n\n[SQL: SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings \nFROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC \n LIMIT %(param_1)s OFFSET %(param_2)s]\n[parameters: {'param_1': 10, 'param_2': 0}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
2025-07-21 09:12:19,663 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 09:12:19,987 - main - INFO - 🟢 [req_1753060337394] 500 - 2.593s
2025-07-21 09:12:41,134 - watchfiles.main - INFO - 1 change detected
2025-07-21 09:12:41,329 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 09:12:41,710 - watchfiles.main - INFO - 1 change detected
2025-07-21 09:12:43,929 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 09:12:43,930 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 09:12:43,930 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 09:12:43,930 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:12:43,930 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:12:43,930 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 09:12:46,406 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 09:12:46,406 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:12:46,972 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 09:12:46,973 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:12:47,632 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 09:12:47,632 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:12:48,204 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:12:48,228 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 09:12:48,228 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'status_1': 'active', 'param_1': 1}
2025-07-21 09:12:48,766 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 09:12:48,766 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 09:12:49,038 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 09:12:49,038 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 09:12:49,377 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 09:12:49,377 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {}
2025-07-21 09:12:49,657 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 09:12:49,657 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 09:12:49,993 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 09:12:49,993 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 09:12:50,307 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 09:12:50,307 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 09:22:17,978 - main - INFO - 🔵 [req_1753060937978] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 09:22:17,979 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:22:17,979 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:22:19,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:22:19,747 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 09:22:19,748 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] {'param_1': 10, 'param_2': 0}
2025-07-21 09:22:20,384 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 09:22:20,385 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] {}
2025-07-21 09:22:20,715 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 09:22:20,981 - main - INFO - 🟢 [req_1753060937978] 200 - 3.004s
2025-07-21 09:23:03,859 - main - INFO - 🔵 [req_1753060983859] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 09:23:03,860 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:23:03,860 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:23:03,870 - main - INFO - 🟢 [req_1753060983859] 422 - 0.011s
2025-07-21 09:23:28,565 - watchfiles.main - INFO - 1 change detected
2025-07-21 09:23:28,749 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 09:23:29,133 - watchfiles.main - INFO - 1 change detected
2025-07-21 09:23:29,653 - watchfiles.main - INFO - 3 changes detected
2025-07-21 09:23:31,250 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 09:23:31,250 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 09:23:31,250 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 09:23:31,250 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:23:31,250 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:23:31,251 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 09:23:34,295 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 09:23:34,296 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:23:34,933 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 09:23:34,933 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:23:35,494 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 09:23:35,494 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:23:36,066 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:23:36,090 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 09:23:36,090 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'active', 'param_1': 1}
2025-07-21 09:23:36,753 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 09:23:36,753 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {}
2025-07-21 09:23:37,167 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 09:23:37,167 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 09:23:37,573 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 09:23:37,573 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 09:23:37,983 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 09:23:37,984 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 09:23:38,387 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 09:23:38,387 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 09:23:38,845 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 09:23:38,845 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 09:23:51,353 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 09:23:53,767 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 09:23:53,767 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 09:23:53,767 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 09:23:53,767 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:23:53,767 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:23:53,767 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 09:23:56,210 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 09:23:56,210 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:23:56,790 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 09:23:56,790 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:23:57,525 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 09:23:57,525 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:23:58,077 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:23:58,100 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 09:23:58,101 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'status_1': 'active', 'param_1': 1}
2025-07-21 09:23:58,771 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 09:23:58,771 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 09:23:59,073 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 09:23:59,073 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 09:23:59,568 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 09:23:59,568 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 09:23:59,845 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 09:23:59,846 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 09:24:00,152 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 09:24:00,152 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 09:24:00,427 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 09:24:00,427 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 09:24:09,248 - main - INFO - 🔵 [req_1753061049248] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 09:24:09,250 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:24:09,250 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:24:10,851 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:24:10,855 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 09:24:10,856 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'name_1': '测试知识库', 'param_1': 1}
2025-07-21 09:24:11,466 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: 'KnowledgeBaseCreate' object has no attribute 'vector_store_config'
2025-07-21 09:24:11,466 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': "'KnowledgeBaseCreate' object has no attribute 'vector_store_config'"}
2025-07-21 09:24:11,467 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 09:24:11,739 - main - INFO - 🟢 [req_1753061049248] 500 - 2.491s
2025-07-21 09:24:39,445 - watchfiles.main - INFO - 1 change detected
2025-07-21 09:24:39,576 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 09:24:39,953 - watchfiles.main - INFO - 1 change detected
2025-07-21 09:24:40,468 - watchfiles.main - INFO - 3 changes detected
2025-07-21 09:24:42,050 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 09:24:42,050 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 09:24:42,050 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 09:24:42,051 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:24:42,051 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:24:42,051 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 09:24:44,644 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 09:24:44,645 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:24:45,184 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 09:24:45,184 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:24:45,726 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 09:24:45,726 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:24:46,352 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:24:46,376 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 09:24:46,377 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'active', 'param_1': 1}
2025-07-21 09:24:46,923 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 09:24:46,924 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 09:24:47,190 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 09:24:47,190 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 09:24:47,464 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 09:24:47,465 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 09:24:47,731 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 09:24:47,731 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 09:24:48,021 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 09:24:48,021 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 09:24:48,285 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 09:24:48,286 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 09:25:08,657 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 09:25:12,908 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 09:25:15,324 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 09:25:15,325 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 09:25:15,325 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 09:25:15,325 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:25:15,325 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:25:15,325 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 09:25:18,650 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 09:25:18,650 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:25:19,360 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 09:25:19,360 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:25:20,177 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 09:25:20,177 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:25:20,768 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:25:20,792 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 09:25:20,792 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'status_1': 'active', 'param_1': 1}
2025-07-21 09:25:21,481 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 09:25:21,481 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 09:25:21,776 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 09:25:21,776 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 09:25:22,122 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 09:25:22,123 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 09:25:22,433 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 09:25:22,433 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 09:25:22,741 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 09:25:22,741 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {}
2025-07-21 09:25:23,022 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 09:25:23,022 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 09:25:30,767 - main - INFO - 🔵 [req_1753061130767] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 09:25:30,769 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:25:30,769 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:25:32,669 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:25:32,674 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 09:25:32,674 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name_1': '测试知识库', 'param_1': 1}
2025-07-21 09:25:33,259 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 09:25:33,259 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] {'id': UUID('ad95dca6-3678-4384-a218-575888a57015'), 'name': '测试知识库', 'description': '这是一个测试知识库', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1000, 'chunk_overlap': 200, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': True, 'enable_agno_integration': True, 'agno_search_type': 'hybrid', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 09:25:33,692 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 09:25:34,102 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint
DETAIL:  Failing row contains (ad95dca6-3678-4384-a218-575888a57015, 测试知识库, 这是一个测试知识库, null, token_based, 1000, 200, null, null, null, f, 0, 0, 2025-07-21 01:25:32.886934, 2025-07-21 01:25:32.886934, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, t, t, hybrid, 0.7).

[SQL: INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('ad95dca6-3678-4384-a218-575888a57015'), 'name': '测试知识库', 'description': '这是一个测试知识库', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1000, 'chunk_overlap': 200, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': True, 'enable_agno_integration': True, 'agno_search_type': 'hybrid', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 09:25:34,102 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint\nDETAIL:  Failing row contains (ad95dca6-3678-4384-a218-575888a57015, 测试知识库, 这是一个测试知识库, null, token_based, 1000, 200, null, null, null, f, 0, 0, 2025-07-21 01:25:32.886934, 2025-07-21 01:25:32.886934, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, t, t, hybrid, 0.7).\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'ad95dca6-3678-4384-a218-575888a57015\'), \'name\': \'测试知识库\', \'description\': \'这是一个测试知识库\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1000, \'chunk_overlap\': 200, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': True, \'enable_agno_integration\': True, \'agno_search_type\': \'hybrid\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 09:25:34,103 - main - INFO - 🟢 [req_1753061130767] 500 - 3.336s
2025-07-21 09:31:46,777 - main - INFO - 🔵 [req_1753061506777] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 09:31:46,777 - main - INFO - 🔵 [req_1753061506777] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 09:31:46,778 - main - INFO - 🟢 [req_1753061506777] 307 - 0.001s
2025-07-21 09:31:46,778 - main - INFO - 🟢 [req_1753061506777] 307 - 0.001s
2025-07-21 09:31:49,000 - main - INFO - 🔵 [req_1753061509000] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 09:31:49,001 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:31:49,001 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:31:49,001 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 09:31:49,002 - main - INFO - 🟢 [req_1753061509000] 500 - 0.002s
2025-07-21 09:31:53,199 - main - INFO - 🔵 [req_1753061513199] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 09:31:53,200 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:31:53,200 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:31:53,200 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 09:31:53,201 - main - INFO - 🟢 [req_1753061513199] 500 - 0.001s
2025-07-21 09:32:27,250 - main - INFO - 🔵 [req_1753061547250] OPTIONS http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 09:32:27,250 - main - INFO - 🟢 [req_1753061547250] 400 - 0.000s
2025-07-21 09:35:03,715 - watchfiles.main - INFO - 4 changes detected
2025-07-21 09:36:13,809 - watchfiles.main - INFO - 6 changes detected
2025-07-21 09:38:04,940 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 09:38:07,373 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 09:38:07,373 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 09:38:07,373 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 09:38:07,373 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:38:07,374 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:38:07,374 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 09:38:10,224 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 09:38:10,225 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:38:10,818 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 09:38:10,818 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:38:11,406 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 09:38:11,406 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 09:38:11,963 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:38:11,986 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 09:38:11,986 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'active', 'param_1': 1}
2025-07-21 09:38:12,584 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 09:38:12,584 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 09:38:12,870 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 09:38:12,870 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 09:38:13,198 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 09:38:13,199 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 09:38:13,507 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 09:38:13,507 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 09:38:13,914 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 09:38:13,915 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 09:38:14,214 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 09:38:14,214 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 09:38:17,593 - main - INFO - 🔵 [req_1753061897593] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 09:38:17,595 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 09:38:17,595 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 09:38:19,238 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 09:38:19,242 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 09:38:19,242 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] {'name_1': '测试知识库', 'param_1': 1}
2025-07-21 09:38:19,958 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 09:38:19,959 - sqlalchemy.engine.Engine - INFO - [generated in 0.00066s] {'id': UUID('d5dc5e53-1208-4bed-bc68-95f501027b89'), 'name': '测试知识库', 'description': '这是一个测试知识库', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1000, 'chunk_overlap': 200, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': True, 'enable_agno_integration': True, 'agno_search_type': 'hybrid', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 09:38:20,263 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 09:38:20,542 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.CheckViolation) new row for relation "knowledge_bases" violates check constraint "knowledge_bases_chunk_strategy_check"
DETAIL:  Failing row contains (d5dc5e53-1208-4bed-bc68-95f501027b89, 测试知识库, 这是一个测试知识库, null, token_based, 1000, 200, null, null, null, f, 0, 0, 2025-07-21 01:38:19.458176, 2025-07-21 01:38:19.458176, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, t, t, hybrid, 0.7).

[SQL: INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('d5dc5e53-1208-4bed-bc68-95f501027b89'), 'name': '测试知识库', 'description': '这是一个测试知识库', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1000, 'chunk_overlap': 200, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': True, 'enable_agno_integration': True, 'agno_search_type': 'hybrid', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 09:38:20,543 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.CheckViolation) new row for relation "knowledge_bases" violates check constraint "knowledge_bases_chunk_strategy_check"\nDETAIL:  Failing row contains (d5dc5e53-1208-4bed-bc68-95f501027b89, 测试知识库, 这是一个测试知识库, null, token_based, 1000, 200, null, null, null, f, 0, 0, 2025-07-21 01:38:19.458176, 2025-07-21 01:38:19.458176, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, t, t, hybrid, 0.7).\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'d5dc5e53-1208-4bed-bc68-95f501027b89\'), \'name\': \'测试知识库\', \'description\': \'这是一个测试知识库\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1000, \'chunk_overlap\': 200, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': True, \'enable_agno_integration\': True, \'agno_search_type\': \'hybrid\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 09:38:20,544 - main - INFO - 🟢 [req_1753061897593] 500 - 2.951s
2025-07-21 10:01:00,537 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:01:00,671 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 10:01:01,049 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:01:04,003 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 10:01:04,004 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 10:01:04,004 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 10:01:04,004 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:01:04,004 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:01:04,004 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 10:01:06,414 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 10:01:06,415 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:01:06,925 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 10:01:06,925 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:01:07,444 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 10:01:07,444 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:01:07,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:01:07,985 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 10:01:07,985 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'status_1': 'active', 'param_1': 1}
2025-07-21 10:01:08,516 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 10:01:08,516 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {}
2025-07-21 10:01:08,768 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 10:01:08,768 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 10:01:09,105 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 10:01:09,105 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 10:01:09,357 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 10:01:09,357 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 10:01:09,615 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 10:01:09,615 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 10:01:09,866 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 10:01:09,866 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 10:01:42,355 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:01:42,502 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 10:01:42,874 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:01:43,494 - watchfiles.main - INFO - 3 changes detected
2025-07-21 10:01:45,257 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 10:01:45,258 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 10:01:45,258 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 10:01:45,258 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:01:45,258 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:01:45,259 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 10:01:47,403 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 10:01:47,404 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:01:47,924 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 10:01:47,925 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:01:48,443 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 10:01:48,444 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:01:49,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:01:49,050 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 10:01:49,050 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'active', 'param_1': 1}
2025-07-21 10:01:49,585 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 10:01:49,585 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {}
2025-07-21 10:01:49,847 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 10:01:49,847 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 10:01:50,114 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 10:01:50,114 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 10:01:50,376 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 10:01:50,376 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 10:01:50,636 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 10:01:50,636 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-21 10:01:50,894 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 10:01:50,894 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 10:01:59,223 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:01:59,358 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 10:01:59,735 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:02:00,364 - watchfiles.main - INFO - 3 changes detected
2025-07-21 10:02:01,976 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 10:02:01,976 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 10:02:01,976 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 10:02:01,976 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:02:01,976 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:02:01,977 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 10:02:04,124 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 10:02:04,124 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:02:04,645 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 10:02:04,645 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:02:05,163 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 10:02:05,164 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:02:05,724 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:02:05,748 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 10:02:05,748 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'active', 'param_1': 1}
2025-07-21 10:02:06,264 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 10:02:06,264 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 10:02:06,606 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 10:02:06,606 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 10:02:06,865 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 10:02:06,865 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 10:02:07,127 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 10:02:07,127 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 10:02:07,384 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 10:02:07,385 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-21 10:02:07,643 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 10:02:07,643 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 10:02:36,808 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:02:36,980 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 10:02:37,361 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:02:39,463 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 10:02:39,464 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 10:02:39,464 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 10:02:39,464 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:02:39,464 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:02:39,464 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 10:02:41,613 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 10:02:41,613 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:02:42,133 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 10:02:42,133 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:02:42,663 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 10:02:42,663 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:02:43,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:02:43,204 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 10:02:43,204 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 10:02:43,726 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 10:02:43,726 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 10:02:43,987 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 10:02:43,987 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 10:02:44,251 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 10:02:44,251 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {}
2025-07-21 10:02:44,565 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 10:02:44,565 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 10:02:44,824 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 10:02:44,824 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {}
2025-07-21 10:02:45,083 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 10:02:45,083 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 10:02:50,733 - main - INFO - 🔵 [req_1753063370733] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:02:50,734 - main - INFO - 🔵 [req_1753063370734] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:02:50,734 - main - INFO - 🟢 [req_1753063370733] 307 - 0.001s
2025-07-21 10:02:50,735 - main - INFO - 🟢 [req_1753063370734] 307 - 0.001s
2025-07-21 10:02:50,760 - main - INFO - 🔵 [req_1753063370760] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:02:50,760 - main - INFO - 🔵 [req_1753063370760] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:02:50,761 - main - INFO - 🟢 [req_1753063370760] 307 - 0.001s
2025-07-21 10:02:50,761 - main - INFO - 🟢 [req_1753063370760] 307 - 0.001s
2025-07-21 10:02:50,762 - main - INFO - 🔵 [req_1753063370762] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:02:50,763 - main - INFO - 🔵 [req_1753063370763] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:02:50,765 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:02:50,765 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:02:50,765 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:02:50,765 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:02:52,174 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:02:52,178 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:02:52,178 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] {'param_1': 10, 'param_2': 0}
2025-07-21 10:02:52,699 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:02:52,699 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] {}
2025-07-21 10:02:54,424 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:02:54,424 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:02:54,425 - sqlalchemy.engine.Engine - INFO - [cached since 2.247s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:02:55,004 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:02:55,005 - sqlalchemy.engine.Engine - INFO - [cached since 2.306s ago] {}
2025-07-21 10:02:55,264 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:02:55,264 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:02:55,626 - main - INFO - 🟢 [req_1753063370762] 200 - 4.864s
2025-07-21 10:02:55,627 - main - INFO - 🟢 [req_1753063370763] 200 - 4.864s
2025-07-21 10:02:55,627 - main - INFO - 🔵 [req_1753063375627] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:02:55,629 - main - INFO - 🔵 [req_1753063375629] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:02:55,630 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:02:55,630 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:02:55,630 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:02:55,631 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:02:55,893 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:02:55,893 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:02:55,894 - sqlalchemy.engine.Engine - INFO - [cached since 3.716s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:02:56,414 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:02:56,414 - sqlalchemy.engine.Engine - INFO - [cached since 3.716s ago] {}
2025-07-21 10:02:57,023 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:02:57,024 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:02:57,024 - sqlalchemy.engine.Engine - INFO - [cached since 4.847s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:02:57,544 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:02:57,545 - sqlalchemy.engine.Engine - INFO - [cached since 4.846s ago] {}
2025-07-21 10:02:57,803 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:02:57,803 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:02:58,063 - main - INFO - 🟢 [req_1753063375629] 200 - 2.435s
2025-07-21 10:02:58,064 - main - INFO - 🟢 [req_1753063375627] 200 - 2.436s
2025-07-21 10:03:20,491 - main - INFO - 🔵 [req_1753063400491] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:03:20,492 - main - INFO - 🔵 [req_1753063400491] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:03:20,492 - main - INFO - 🟢 [req_1753063400491] 307 - 0.001s
2025-07-21 10:03:20,492 - main - INFO - 🟢 [req_1753063400491] 307 - 0.001s
2025-07-21 10:03:20,561 - main - INFO - 🔵 [req_1753063400561] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:03:20,562 - main - INFO - 🔵 [req_1753063400562] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:03:20,563 - main - INFO - 🔵 [req_1753063400563] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:03:20,563 - main - INFO - 🟢 [req_1753063400561] 307 - 0.002s
2025-07-21 10:03:20,564 - main - INFO - 🔵 [req_1753063400564] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:03:20,564 - main - INFO - 🟢 [req_1753063400562] 307 - 0.002s
2025-07-21 10:03:20,566 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:03:20,566 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:03:20,566 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:03:20,567 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:03:20,880 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:03:20,881 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:03:20,881 - sqlalchemy.engine.Engine - INFO - [cached since 28.7s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:03:21,485 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:03:21,486 - sqlalchemy.engine.Engine - INFO - [cached since 28.79s ago] {}
2025-07-21 10:03:22,103 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:03:22,103 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:03:22,104 - sqlalchemy.engine.Engine - INFO - [cached since 29.93s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:03:22,724 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:03:22,725 - sqlalchemy.engine.Engine - INFO - [cached since 30.03s ago] {}
2025-07-21 10:03:23,034 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:03:23,035 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:03:23,293 - main - INFO - 🟢 [req_1753063400564] 200 - 2.729s
2025-07-21 10:03:23,294 - main - INFO - 🟢 [req_1753063400563] 200 - 2.731s
2025-07-21 10:03:23,296 - main - INFO - 🔵 [req_1753063403296] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:03:23,296 - main - INFO - 🔵 [req_1753063403296] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:03:23,298 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:03:23,299 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:03:23,299 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:03:23,299 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:03:23,553 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:03:23,554 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:03:23,555 - sqlalchemy.engine.Engine - INFO - [cached since 31.38s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:03:24,124 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:03:24,124 - sqlalchemy.engine.Engine - INFO - [cached since 31.43s ago] {}
2025-07-21 10:03:24,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:03:24,644 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:03:24,644 - sqlalchemy.engine.Engine - INFO - [cached since 32.47s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:03:25,274 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:03:25,275 - sqlalchemy.engine.Engine - INFO - [cached since 32.58s ago] {}
2025-07-21 10:03:25,534 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:03:25,534 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:03:25,794 - main - INFO - 🟢 [req_1753063403296] 200 - 2.498s
2025-07-21 10:03:25,794 - main - INFO - 🟢 [req_1753063403296] 200 - 2.498s
2025-07-21 10:23:02,724 - main - INFO - 🔵 [req_1753064582724] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:23:02,725 - main - INFO - 🔵 [req_1753064582725] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:23:02,725 - main - INFO - 🟢 [req_1753064582724] 307 - 0.001s
2025-07-21 10:23:02,726 - main - INFO - 🟢 [req_1753064582725] 307 - 0.001s
2025-07-21 10:23:02,748 - main - INFO - 🔵 [req_1753064582748] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:23:02,748 - main - INFO - 🔵 [req_1753064582748] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:23:02,749 - main - INFO - 🟢 [req_1753064582748] 307 - 0.001s
2025-07-21 10:23:02,749 - main - INFO - 🔵 [req_1753064582749] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:23:02,749 - main - INFO - 🟢 [req_1753064582748] 307 - 0.001s
2025-07-21 10:23:02,750 - main - INFO - 🔵 [req_1753064582750] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:23:02,751 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:23:02,751 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:23:02,752 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:23:02,752 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:24:43,615 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:24:43,615 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:24:43,616 - sqlalchemy.engine.Engine - INFO - [cached since 1311s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:24:44,106 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:24:44,106 - sqlalchemy.engine.Engine - INFO - [cached since 1311s ago] {}
2025-07-21 10:24:44,346 - main - INFO - 🔵 [req_1753064684346] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:24:44,346 - main - INFO - 🔵 [req_1753064684346] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:24:45,596 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:24:45,597 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:24:45,597 - sqlalchemy.engine.Engine - INFO - [cached since 1313s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:24:46,095 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:24:46,095 - sqlalchemy.engine.Engine - INFO - [cached since 1313s ago] {}
2025-07-21 10:24:46,347 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:24:46,348 - main - INFO - 🔵 [req_1753064686348] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:24:46,349 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:24:46,350 - main - INFO - 🟢 [req_1753064684346] 307 - 2.004s
2025-07-21 10:24:46,350 - main - INFO - 🔵 [req_1753064686350] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:24:46,351 - main - INFO - 🔵 [req_1753064686351] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:24:46,351 - main - INFO - 🟢 [req_1753064686348] 307 - 0.003s
2025-07-21 10:24:46,352 - main - INFO - 🔵 [req_1753064686352] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:24:46,352 - main - INFO - 🟢 [req_1753064686350] 307 - 0.002s
2025-07-21 10:24:46,353 - main - INFO - 🟢 [req_1753064686351] 307 - 0.002s
2025-07-21 10:24:46,354 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:24:46,354 - main - INFO - 🟢 [req_1753064686352] 307 - 0.002s
2025-07-21 10:24:46,354 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:24:46,355 - main - INFO - 🔵 [req_1753064686355] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:24:46,355 - main - INFO - 🔵 [req_1753064686355] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:24:47,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:24:47,676 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:24:47,676 - sqlalchemy.engine.Engine - INFO - [cached since 1315s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:24:48,195 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:24:48,195 - sqlalchemy.engine.Engine - INFO - [cached since 1315s ago] {}
2025-07-21 10:24:48,447 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:24:48,448 - main - INFO - 🟢 [req_1753064582749] 200 - 105.698s
2025-07-21 10:24:48,448 - main - INFO - 🟢 [req_1753064582750] 200 - 105.698s
2025-07-21 10:24:48,449 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:24:48,449 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:24:48,449 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:24:48,449 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:24:48,716 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:24:48,717 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:24:48,717 - sqlalchemy.engine.Engine - INFO - [cached since 1317s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:24:49,329 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:24:49,329 - sqlalchemy.engine.Engine - INFO - [cached since 1317s ago] {}
2025-07-21 10:24:49,955 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:24:49,956 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:24:49,956 - sqlalchemy.engine.Engine - INFO - [cached since 1318s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:24:50,465 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:24:50,465 - sqlalchemy.engine.Engine - INFO - [cached since 1318s ago] {}
2025-07-21 10:24:50,788 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:24:50,789 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:24:50,789 - main - INFO - 🟢 [req_1753064684346] 200 - 6.443s
2025-07-21 10:24:51,086 - main - INFO - 🟢 [req_1753064686355] 200 - 4.731s
2025-07-21 10:24:51,087 - main - INFO - 🟢 [req_1753064686355] 200 - 4.732s
2025-07-21 10:24:51,087 - main - INFO - 🔵 [req_1753064691087] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:24:51,088 - main - INFO - 🔵 [req_1753064691088] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:24:51,089 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:24:51,089 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:24:51,089 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:24:51,090 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:24:51,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:24:51,345 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:24:51,345 - sqlalchemy.engine.Engine - INFO - [cached since 1319s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:24:51,845 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:24:51,846 - sqlalchemy.engine.Engine - INFO - [cached since 1319s ago] {}
2025-07-21 10:24:52,345 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:24:52,346 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:24:52,346 - sqlalchemy.engine.Engine - INFO - [cached since 1320s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:24:52,947 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:24:52,948 - sqlalchemy.engine.Engine - INFO - [cached since 1320s ago] {}
2025-07-21 10:24:53,196 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:24:53,196 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:24:53,465 - main - INFO - 🟢 [req_1753064691088] 200 - 2.377s
2025-07-21 10:24:53,466 - main - INFO - 🟢 [req_1753064691087] 200 - 2.378s
2025-07-21 10:25:30,261 - main - INFO - 🔵 [req_1753064730261] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:25:30,262 - main - INFO - 🔵 [req_1753064730262] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:25:30,262 - main - INFO - 🟢 [req_1753064730261] 307 - 0.001s
2025-07-21 10:25:30,262 - main - INFO - 🟢 [req_1753064730262] 307 - 0.001s
2025-07-21 10:25:30,283 - main - INFO - 🔵 [req_1753064730283] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:25:30,284 - main - INFO - 🔵 [req_1753064730284] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:25:30,285 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:25:30,286 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:25:30,286 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:25:30,286 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:25:30,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:25:30,535 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:25:30,536 - sqlalchemy.engine.Engine - INFO - [cached since 1358s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:25:31,036 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:25:31,036 - sqlalchemy.engine.Engine - INFO - [cached since 1358s ago] {}
2025-07-21 10:25:31,525 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:25:31,526 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:25:31,526 - sqlalchemy.engine.Engine - INFO - [cached since 1359s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:25:32,026 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:25:32,026 - sqlalchemy.engine.Engine - INFO - [cached since 1359s ago] {}
2025-07-21 10:25:32,276 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:25:32,276 - main - INFO - 🔵 [req_1753064732276] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:25:32,276 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:25:32,278 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:25:32,279 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:25:32,279 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:25:32,280 - main - INFO - 🟢 [req_1753064732276] 500 - 0.003s
2025-07-21 10:25:32,525 - main - INFO - 🟢 [req_1753064730283] 200 - 2.243s
2025-07-21 10:25:32,526 - main - INFO - 🟢 [req_1753064730284] 200 - 2.243s
2025-07-21 10:25:47,482 - main - INFO - 🔵 [req_1753064747482] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:25:47,484 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:25:47,484 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:25:47,484 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:25:47,485 - main - INFO - 🟢 [req_1753064747482] 500 - 0.003s
2025-07-21 10:26:07,707 - main - INFO - 🔵 [req_1753064767707] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:26:07,707 - main - INFO - 🟢 [req_1753064767707] 307 - 0.000s
2025-07-21 10:26:07,709 - main - INFO - 🔵 [req_1753064767709] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:26:07,709 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:26:07,709 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:26:07,966 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:26:07,967 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:26:07,967 - sqlalchemy.engine.Engine - INFO - [cached since 1396s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:26:08,465 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:26:08,465 - sqlalchemy.engine.Engine - INFO - [cached since 1396s ago] {}
2025-07-21 10:26:08,716 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:26:08,965 - main - INFO - 🟢 [req_1753064767709] 200 - 1.256s
2025-07-21 10:26:11,047 - main - INFO - 🔵 [req_1753064771047] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:26:11,048 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:26:11,048 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:26:11,048 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:26:11,048 - main - INFO - 🟢 [req_1753064771047] 500 - 0.002s
2025-07-21 10:26:24,461 - main - INFO - 🔵 [req_1753064784461] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:26:24,462 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:26:24,462 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:26:24,462 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:26:24,463 - main - INFO - 🟢 [req_1753064784461] 500 - 0.002s
2025-07-21 10:26:30,496 - main - INFO - 🔵 [req_1753064790496] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:26:30,497 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:26:30,497 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:26:30,497 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:26:30,497 - main - INFO - 🟢 [req_1753064790496] 500 - 0.002s
2025-07-21 10:27:09,733 - main - INFO - 🔵 [req_1753064829733] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:27:09,734 - main - INFO - 🔵 [req_1753064829734] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:27:09,734 - main - INFO - 🟢 [req_1753064829733] 307 - 0.001s
2025-07-21 10:27:09,734 - main - INFO - 🟢 [req_1753064829734] 307 - 0.001s
2025-07-21 10:27:09,774 - main - INFO - 🔵 [req_1753064829774] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:27:09,774 - main - INFO - 🔵 [req_1753064829774] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:27:09,775 - main - INFO - 🟢 [req_1753064829774] 307 - 0.001s
2025-07-21 10:27:09,775 - main - INFO - 🔵 [req_1753064829775] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:27:09,775 - main - INFO - 🟢 [req_1753064829774] 307 - 0.001s
2025-07-21 10:27:09,776 - main - INFO - 🔵 [req_1753064829776] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:27:09,777 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:09,777 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:09,778 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:09,778 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:10,090 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:10,091 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:10,091 - sqlalchemy.engine.Engine - INFO - [cached since 1458s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:27:10,651 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:10,652 - sqlalchemy.engine.Engine - INFO - [cached since 1458s ago] {}
2025-07-21 10:27:11,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:11,142 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:11,142 - sqlalchemy.engine.Engine - INFO - [cached since 1459s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:27:11,672 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:11,672 - sqlalchemy.engine.Engine - INFO - [cached since 1459s ago] {}
2025-07-21 10:27:11,921 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:11,921 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:12,262 - main - INFO - 🟢 [req_1753064829776] 200 - 2.486s
2025-07-21 10:27:12,262 - main - INFO - 🟢 [req_1753064829775] 200 - 2.487s
2025-07-21 10:27:12,264 - main - INFO - 🔵 [req_1753064832264] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:27:12,265 - main - INFO - 🔵 [req_1753064832265] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:27:12,266 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:12,266 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:12,267 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:12,267 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:12,521 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:12,521 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:12,521 - sqlalchemy.engine.Engine - INFO - [cached since 1460s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:27:13,023 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:13,024 - sqlalchemy.engine.Engine - INFO - [cached since 1460s ago] {}
2025-07-21 10:27:13,601 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:13,601 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:13,602 - sqlalchemy.engine.Engine - INFO - [cached since 1461s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:27:14,122 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:14,122 - sqlalchemy.engine.Engine - INFO - [cached since 1461s ago] {}
2025-07-21 10:27:14,403 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:14,403 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:14,641 - main - INFO - 🟢 [req_1753064832265] 200 - 2.376s
2025-07-21 10:27:14,651 - main - INFO - 🟢 [req_1753064832264] 200 - 2.387s
2025-07-21 10:27:43,730 - main - INFO - 🔵 [req_1753064863730] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:27:43,730 - main - INFO - 🔵 [req_1753064863730] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:27:43,731 - main - INFO - 🟢 [req_1753064863730] 307 - 0.001s
2025-07-21 10:27:43,731 - main - INFO - 🟢 [req_1753064863730] 307 - 0.001s
2025-07-21 10:27:43,754 - main - INFO - 🔵 [req_1753064863754] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:27:43,755 - main - INFO - 🔵 [req_1753064863755] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:27:43,755 - main - INFO - 🟢 [req_1753064863754] 307 - 0.001s
2025-07-21 10:27:43,756 - main - INFO - 🔵 [req_1753064863756] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:27:43,756 - main - INFO - 🟢 [req_1753064863755] 307 - 0.001s
2025-07-21 10:27:43,756 - main - INFO - 🔵 [req_1753064863756] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:27:43,758 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:43,758 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:43,758 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:43,758 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:44,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:44,012 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:44,012 - sqlalchemy.engine.Engine - INFO - [cached since 1492s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:27:44,572 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:44,573 - sqlalchemy.engine.Engine - INFO - [cached since 1492s ago] {}
2025-07-21 10:27:45,060 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:45,061 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:45,061 - sqlalchemy.engine.Engine - INFO - [cached since 1493s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:27:45,552 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:45,552 - sqlalchemy.engine.Engine - INFO - [cached since 1493s ago] {}
2025-07-21 10:27:45,791 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:45,792 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:46,041 - main - INFO - 🟢 [req_1753064863756] 200 - 2.285s
2025-07-21 10:27:46,041 - main - INFO - 🟢 [req_1753064863756] 200 - 2.285s
2025-07-21 10:27:46,042 - main - INFO - 🔵 [req_1753064866042] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:27:46,043 - main - INFO - 🔵 [req_1753064866043] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:27:46,044 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:46,044 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:46,044 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:46,044 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:46,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:46,291 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:46,291 - sqlalchemy.engine.Engine - INFO - [cached since 1494s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:27:46,853 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:46,854 - sqlalchemy.engine.Engine - INFO - [cached since 1494s ago] {}
2025-07-21 10:27:47,401 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:47,401 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:47,402 - sqlalchemy.engine.Engine - INFO - [cached since 1495s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:27:48,044 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:48,044 - sqlalchemy.engine.Engine - INFO - [cached since 1495s ago] {}
2025-07-21 10:27:48,353 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:48,353 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:48,601 - main - INFO - 🟢 [req_1753064866043] 200 - 2.559s
2025-07-21 10:27:48,611 - main - INFO - 🟢 [req_1753064866042] 200 - 2.569s
2025-07-21 10:27:52,113 - main - INFO - 🔵 [req_1753064872113] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:27:52,114 - main - INFO - 🔵 [req_1753064872114] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:27:52,114 - main - INFO - 🟢 [req_1753064872113] 307 - 0.001s
2025-07-21 10:27:52,114 - main - INFO - 🟢 [req_1753064872114] 307 - 0.001s
2025-07-21 10:27:52,160 - main - INFO - 🔵 [req_1753064872160] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:27:52,161 - main - INFO - 🔵 [req_1753064872161] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:27:52,161 - main - INFO - 🟢 [req_1753064872160] 307 - 0.001s
2025-07-21 10:27:52,162 - main - INFO - 🔵 [req_1753064872162] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:27:52,162 - main - INFO - 🟢 [req_1753064872161] 307 - 0.001s
2025-07-21 10:27:52,162 - main - INFO - 🔵 [req_1753064872162] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:27:52,163 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:52,164 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:52,164 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:52,164 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:52,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:52,411 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:52,411 - sqlalchemy.engine.Engine - INFO - [cached since 1500s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:27:52,901 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:52,902 - sqlalchemy.engine.Engine - INFO - [cached since 1500s ago] {}
2025-07-21 10:27:53,421 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:53,421 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:53,421 - sqlalchemy.engine.Engine - INFO - [cached since 1501s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:27:54,041 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:54,042 - sqlalchemy.engine.Engine - INFO - [cached since 1501s ago] {}
2025-07-21 10:27:54,292 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:54,292 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:54,562 - main - INFO - 🟢 [req_1753064872162] 200 - 2.400s
2025-07-21 10:27:54,563 - main - INFO - 🟢 [req_1753064872162] 200 - 2.400s
2025-07-21 10:27:54,563 - main - INFO - 🔵 [req_1753064874563] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:27:54,565 - main - INFO - 🔵 [req_1753064874565] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:27:54,566 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:54,566 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:54,566 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:54,567 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:54,821 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:54,821 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:54,822 - sqlalchemy.engine.Engine - INFO - [cached since 1503s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:27:55,392 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:55,394 - sqlalchemy.engine.Engine - INFO - [cached since 1503s ago] {}
2025-07-21 10:27:55,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:27:55,941 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:27:55,941 - sqlalchemy.engine.Engine - INFO - [cached since 1504s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:27:56,522 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:27:56,522 - sqlalchemy.engine.Engine - INFO - [cached since 1504s ago] {}
2025-07-21 10:27:56,831 - main - INFO - 🔵 [req_1753064876831] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:27:56,832 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:56,832 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:27:56,833 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:27:56,833 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:27:56,834 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:27:56,834 - main - INFO - 🟢 [req_1753064876831] 500 - 0.003s
2025-07-21 10:27:57,153 - main - INFO - 🟢 [req_1753064874565] 200 - 2.588s
2025-07-21 10:27:57,153 - main - INFO - 🟢 [req_1753064874563] 200 - 2.590s
2025-07-21 10:33:06,449 - main - INFO - 🔵 [req_1753065186449] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:33:06,452 - main - INFO - 🔵 [req_1753065186452] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:33:06,453 - main - INFO - 🟢 [req_1753065186449] 307 - 0.003s
2025-07-21 10:33:06,454 - main - INFO - 🟢 [req_1753065186452] 307 - 0.002s
2025-07-21 10:33:06,535 - main - INFO - 🔵 [req_1753065186535] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:33:06,536 - main - INFO - 🔵 [req_1753065186536] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:33:06,538 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:33:06,538 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:33:06,538 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:33:06,539 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:36:34,683 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:36:34,685 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:36:34,691 - sqlalchemy.engine.Engine - INFO - [cached since 2023s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:36:35,194 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:36:35,195 - sqlalchemy.engine.Engine - INFO - [cached since 2022s ago] {}
2025-07-21 10:36:36,843 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:36:36,844 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:36:36,844 - sqlalchemy.engine.Engine - INFO - [cached since 2025s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:36:37,423 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:36:37,441 - sqlalchemy.engine.Engine - INFO - [cached since 2025s ago] {}
2025-07-21 10:36:37,693 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:36:37,694 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:36:37,695 - main - INFO - 🔵 [req_1753065397695] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:36:37,696 - main - INFO - 🔵 [req_1753065397696] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:36:37,696 - main - INFO - 🔵 [req_1753065397696] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:36:37,697 - main - INFO - 🟢 [req_1753065397695] 307 - 0.001s
2025-07-21 10:36:37,697 - main - INFO - 🟢 [req_1753065397696] 307 - 0.001s
2025-07-21 10:36:37,698 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:36:37,699 - main - INFO - 🔵 [req_1753065397699] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:36:37,699 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:36:37,699 - main - INFO - 🔵 [req_1753065397699] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:36:37,700 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:36:37,701 - main - INFO - 🟢 [req_1753065397696] 500 - 0.005s
2025-07-21 10:36:37,701 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:36:37,701 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:36:37,702 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:36:37,702 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:36:39,327 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:36:39,327 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:36:39,341 - sqlalchemy.engine.Engine - INFO - [cached since 2027s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:36:39,953 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:36:39,991 - sqlalchemy.engine.Engine - INFO - [cached since 2027s ago] {}
2025-07-21 10:36:40,573 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:36:40,574 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:36:40,591 - sqlalchemy.engine.Engine - INFO - [cached since 2028s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:36:41,135 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:36:41,141 - sqlalchemy.engine.Engine - INFO - [cached since 2028s ago] {}
2025-07-21 10:36:41,396 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:36:41,397 - main - INFO - 🟢 [req_1753065186536] 200 - 214.861s
2025-07-21 10:36:41,396 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:36:41,397 - main - INFO - 🟢 [req_1753065186535] 200 - 214.862s
2025-07-21 10:36:41,654 - main - INFO - 🟢 [req_1753065397699] 200 - 3.956s
2025-07-21 10:36:41,655 - main - INFO - 🟢 [req_1753065397699] 200 - 3.956s
2025-07-21 10:37:04,315 - main - INFO - 🔵 [req_1753065424315] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:37:04,316 - main - INFO - 🔵 [req_1753065424316] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:37:04,316 - main - INFO - 🟢 [req_1753065424315] 307 - 0.002s
2025-07-21 10:37:04,317 - main - INFO - 🟢 [req_1753065424316] 307 - 0.002s
2025-07-21 10:37:04,349 - main - INFO - 🔵 [req_1753065424349] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:37:04,349 - main - INFO - 🔵 [req_1753065424349] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:37:04,350 - main - INFO - 🟢 [req_1753065424349] 307 - 0.001s
2025-07-21 10:37:04,350 - main - INFO - 🟢 [req_1753065424349] 307 - 0.001s
2025-07-21 10:37:04,355 - main - INFO - 🔵 [req_1753065424355] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:37:04,356 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:04,356 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:04,613 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:04,614 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:04,614 - sqlalchemy.engine.Engine - INFO - [cached since 2052s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:37:05,123 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:05,124 - sqlalchemy.engine.Engine - INFO - [cached since 2052s ago] {}
2025-07-21 10:37:05,394 - main - INFO - 🔵 [req_1753065425394] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:37:05,395 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:05,396 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:05,396 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:05,704 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:05,705 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:05,705 - sqlalchemy.engine.Engine - INFO - [cached since 2054s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:37:06,263 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:06,264 - sqlalchemy.engine.Engine - INFO - [cached since 2054s ago] {}
2025-07-21 10:37:06,535 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:06,535 - main - INFO - 🟢 [req_1753065424355] 200 - 2.180s
2025-07-21 10:37:06,536 - main - INFO - 🔵 [req_1753065426536] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:37:06,537 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:06,537 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:06,844 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:06,845 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:06,845 - sqlalchemy.engine.Engine - INFO - [cached since 2055s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:37:07,353 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:07,353 - sqlalchemy.engine.Engine - INFO - [cached since 2055s ago] {}
2025-07-21 10:37:07,605 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:07,605 - main - INFO - 🟢 [req_1753065425394] 200 - 2.211s
2025-07-21 10:37:07,606 - main - INFO - 🔵 [req_1753065427606] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:37:07,607 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:07,607 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:07,863 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:07,864 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:07,865 - sqlalchemy.engine.Engine - INFO - [cached since 2056s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:37:08,394 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:08,395 - sqlalchemy.engine.Engine - INFO - [cached since 2056s ago] {}
2025-07-21 10:37:08,936 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:08,936 - main - INFO - 🟢 [req_1753065426536] 200 - 2.400s
2025-07-21 10:37:09,193 - main - INFO - 🟢 [req_1753065427606] 200 - 1.587s
2025-07-21 10:37:12,594 - main - INFO - 🔵 [req_1753065432594] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:12,595 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:12,595 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:12,595 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:12,596 - main - INFO - 🟢 [req_1753065432594] 500 - 0.002s
2025-07-21 10:37:16,787 - main - INFO - 🔵 [req_1753065436787] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:16,789 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:16,789 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:16,790 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:16,790 - main - INFO - 🟢 [req_1753065436787] 500 - 0.003s
2025-07-21 10:37:19,570 - main - INFO - 🔵 [req_1753065439570] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:19,571 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:19,571 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:19,571 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:19,572 - main - INFO - 🟢 [req_1753065439570] 500 - 0.002s
2025-07-21 10:37:22,101 - main - INFO - 🔵 [req_1753065442101] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:22,101 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:22,102 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:22,102 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:22,102 - main - INFO - 🟢 [req_1753065442101] 500 - 0.002s
2025-07-21 10:37:24,203 - main - INFO - 🔵 [req_1753065444203] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:24,204 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:24,204 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:24,204 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:24,205 - main - INFO - 🟢 [req_1753065444203] 500 - 0.002s
2025-07-21 10:37:27,986 - main - INFO - 🔵 [req_1753065447986] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:27,987 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:27,987 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:27,988 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:27,988 - main - INFO - 🟢 [req_1753065447986] 500 - 0.002s
2025-07-21 10:37:34,321 - main - INFO - 🔵 [req_1753065454320] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:37:34,322 - main - INFO - 🔵 [req_1753065454322] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:37:34,323 - main - INFO - 🟢 [req_1753065454320] 307 - 0.002s
2025-07-21 10:37:34,323 - main - INFO - 🟢 [req_1753065454322] 307 - 0.002s
2025-07-21 10:37:34,362 - main - INFO - 🔵 [req_1753065454362] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:37:34,362 - main - INFO - 🔵 [req_1753065454362] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:37:34,363 - main - INFO - 🟢 [req_1753065454362] 307 - 0.001s
2025-07-21 10:37:34,363 - main - INFO - 🟢 [req_1753065454362] 307 - 0.001s
2025-07-21 10:37:34,367 - main - INFO - 🔵 [req_1753065454367] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:37:34,368 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:34,368 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:34,368 - main - INFO - 🔵 [req_1753065454368] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:37:34,663 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:34,664 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:34,664 - sqlalchemy.engine.Engine - INFO - [cached since 2082s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:37:35,164 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:35,165 - sqlalchemy.engine.Engine - INFO - [cached since 2082s ago] {}
2025-07-21 10:37:35,495 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:35,495 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:35,495 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:35,752 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:35,753 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:35,753 - sqlalchemy.engine.Engine - INFO - [cached since 2084s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:37:36,253 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:36,253 - sqlalchemy.engine.Engine - INFO - [cached since 2084s ago] {}
2025-07-21 10:37:36,515 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:36,515 - main - INFO - 🟢 [req_1753065454367] 200 - 2.148s
2025-07-21 10:37:36,516 - main - INFO - 🔵 [req_1753065456516] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:37:36,517 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:36,517 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:36,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:36,773 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:36,773 - sqlalchemy.engine.Engine - INFO - [cached since 2085s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:37:37,274 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:37,274 - sqlalchemy.engine.Engine - INFO - [cached since 2085s ago] {}
2025-07-21 10:37:37,525 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:37,525 - main - INFO - 🟢 [req_1753065454368] 200 - 3.157s
2025-07-21 10:37:37,526 - main - INFO - 🔵 [req_1753065457526] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:37:37,527 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:37,527 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:37,774 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:37,774 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:37,775 - sqlalchemy.engine.Engine - INFO - [cached since 2086s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:37:38,284 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:38,285 - sqlalchemy.engine.Engine - INFO - [cached since 2086s ago] {}
2025-07-21 10:37:38,596 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:38,596 - main - INFO - 🟢 [req_1753065456516] 200 - 2.080s
2025-07-21 10:37:38,904 - main - INFO - 🟢 [req_1753065457526] 200 - 1.378s
2025-07-21 10:37:43,442 - main - INFO - 🔵 [req_1753065463442] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:43,443 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:43,443 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:43,443 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:43,443 - main - INFO - 🟢 [req_1753065463442] 500 - 0.002s
2025-07-21 10:37:46,171 - main - INFO - 🔵 [req_1753065466171] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:46,172 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:46,172 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:46,172 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:46,172 - main - INFO - 🟢 [req_1753065466171] 500 - 0.002s
2025-07-21 10:37:50,426 - main - INFO - 🔵 [req_1753065470426] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:37:50,427 - main - INFO - 🔵 [req_1753065470427] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:37:50,427 - main - INFO - 🟢 [req_1753065470426] 307 - 0.001s
2025-07-21 10:37:50,428 - main - INFO - 🟢 [req_1753065470427] 307 - 0.001s
2025-07-21 10:37:50,474 - main - INFO - 🔵 [req_1753065470474] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:37:50,475 - main - INFO - 🔵 [req_1753065470475] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:37:50,476 - main - INFO - 🔵 [req_1753065470476] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:37:50,476 - main - INFO - 🟢 [req_1753065470474] 307 - 0.002s
2025-07-21 10:37:50,477 - main - INFO - 🔵 [req_1753065470476] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:37:50,477 - main - INFO - 🟢 [req_1753065470475] 307 - 0.002s
2025-07-21 10:37:50,479 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:50,479 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:50,480 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:50,480 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:50,800 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:50,822 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:50,823 - sqlalchemy.engine.Engine - INFO - [cached since 2099s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:37:51,834 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:51,834 - sqlalchemy.engine.Engine - INFO - [cached since 2099s ago] {}
2025-07-21 10:37:52,333 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:52,333 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:52,333 - sqlalchemy.engine.Engine - INFO - [cached since 2100s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:37:52,866 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:52,867 - sqlalchemy.engine.Engine - INFO - [cached since 2100s ago] {}
2025-07-21 10:37:53,115 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:53,115 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:53,385 - main - INFO - 🟢 [req_1753065470476] 200 - 2.909s
2025-07-21 10:37:53,385 - main - INFO - 🟢 [req_1753065470476] 200 - 2.909s
2025-07-21 10:37:53,387 - main - INFO - 🔵 [req_1753065473387] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:37:53,388 - main - INFO - 🔵 [req_1753065473388] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:37:53,389 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:53,389 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:53,389 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:53,389 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:53,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:53,643 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:53,643 - sqlalchemy.engine.Engine - INFO - [cached since 2101s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:37:54,263 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:54,291 - sqlalchemy.engine.Engine - INFO - [cached since 2102s ago] {}
2025-07-21 10:37:54,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:37:54,794 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:37:54,794 - sqlalchemy.engine.Engine - INFO - [cached since 2103s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:37:55,548 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:37:55,549 - sqlalchemy.engine.Engine - INFO - [cached since 2103s ago] {}
2025-07-21 10:37:55,866 - main - INFO - 🔵 [req_1753065475866] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:37:55,867 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:55,867 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:37:55,869 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:37:55,869 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:37:55,870 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:37:55,871 - main - INFO - 🟢 [req_1753065475866] 500 - 0.006s
2025-07-21 10:37:56,124 - main - INFO - 🟢 [req_1753065473387] 200 - 2.737s
2025-07-21 10:37:56,125 - main - INFO - 🟢 [req_1753065473388] 200 - 2.737s
2025-07-21 10:38:06,204 - main - INFO - 🔵 [req_1753065486204] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:38:06,205 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:38:06,205 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:38:06,206 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:38:06,206 - main - INFO - 🟢 [req_1753065486204] 500 - 0.002s
2025-07-21 10:39:36,183 - main - INFO - 🔵 [req_1753065576183] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:39:36,184 - main - INFO - 🔵 [req_1753065576184] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:39:36,184 - main - INFO - 🟢 [req_1753065576183] 307 - 0.001s
2025-07-21 10:39:36,185 - main - INFO - 🟢 [req_1753065576184] 307 - 0.001s
2025-07-21 10:39:36,206 - main - INFO - 🔵 [req_1753065576206] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:39:36,206 - main - INFO - 🔵 [req_1753065576206] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:39:36,207 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:39:36,208 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:39:36,208 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:39:36,208 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:39:36,462 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:39:36,463 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:39:36,493 - sqlalchemy.engine.Engine - INFO - [cached since 2204s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:39:36,993 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:39:36,994 - sqlalchemy.engine.Engine - INFO - [cached since 2204s ago] {}
2025-07-21 10:39:37,720 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:39:37,720 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:39:37,743 - sqlalchemy.engine.Engine - INFO - [cached since 2206s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:39:38,244 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:39:38,245 - sqlalchemy.engine.Engine - INFO - [cached since 2206s ago] {}
2025-07-21 10:39:38,493 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:39:38,495 - main - INFO - 🔵 [req_1753065578495] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:39:38,495 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:39:38,497 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:39:38,498 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:39:38,498 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:39:38,499 - main - INFO - 🟢 [req_1753065578495] 500 - 0.004s
2025-07-21 10:39:38,744 - main - INFO - 🟢 [req_1753065576206] 200 - 2.538s
2025-07-21 10:39:38,753 - main - INFO - 🟢 [req_1753065576206] 200 - 2.547s
2025-07-21 10:40:33,409 - main - INFO - 🔵 [req_1753065633409] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:40:33,409 - main - INFO - 🟢 [req_1753065633409] 307 - 0.001s
2025-07-21 10:40:33,411 - main - INFO - 🔵 [req_1753065633411] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:40:33,412 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:40:33,412 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:40:33,669 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:40:33,669 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:40:33,670 - sqlalchemy.engine.Engine - INFO - [cached since 2261s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:40:34,169 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:40:34,170 - sqlalchemy.engine.Engine - INFO - [cached since 2261s ago] {}
2025-07-21 10:40:34,511 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:40:34,769 - main - INFO - 🟢 [req_1753065633411] 200 - 1.358s
2025-07-21 10:40:35,540 - main - INFO - 🔵 [req_1753065635540] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:40:35,541 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:40:35,541 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:40:35,541 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:40:35,542 - main - INFO - 🟢 [req_1753065635540] 500 - 0.002s
2025-07-21 10:40:59,697 - main - INFO - 🔵 [req_1753065659697] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:40:59,698 - main - INFO - 🟢 [req_1753065659697] 307 - 0.001s
2025-07-21 10:40:59,700 - main - INFO - 🔵 [req_1753065659700] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:40:59,701 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:40:59,701 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:40:59,958 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:40:59,958 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:40:59,959 - sqlalchemy.engine.Engine - INFO - [cached since 2288s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:41:00,459 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:41:00,459 - sqlalchemy.engine.Engine - INFO - [cached since 2288s ago] {}
2025-07-21 10:41:00,720 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:41:00,969 - main - INFO - 🟢 [req_1753065659700] 200 - 1.269s
2025-07-21 10:41:01,337 - main - INFO - 🔵 [req_1753065661337] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:41:01,338 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:41:01,338 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:41:01,339 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:41:01,339 - main - INFO - 🟢 [req_1753065661337] 500 - 0.002s
2025-07-21 10:42:03,700 - main - INFO - 🔵 [req_1753065723700] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:42:03,701 - main - INFO - 🟢 [req_1753065723700] 307 - 0.001s
2025-07-21 10:42:03,703 - main - INFO - 🔵 [req_1753065723702] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:42:03,703 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:42:03,703 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:42:03,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:42:03,958 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:42:03,958 - sqlalchemy.engine.Engine - INFO - [cached since 2352s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:42:04,538 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:42:04,539 - sqlalchemy.engine.Engine - INFO - [cached since 2352s ago] {}
2025-07-21 10:42:04,788 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:42:05,038 - main - INFO - 🟢 [req_1753065723702] 200 - 1.335s
2025-07-21 10:42:11,701 - main - INFO - 🔵 [req_1753065731701] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:42:11,701 - main - INFO - 🟢 [req_1753065731701] 307 - 0.000s
2025-07-21 10:42:11,703 - main - INFO - 🔵 [req_1753065731703] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:42:11,704 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:42:11,704 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:42:12,048 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:42:12,048 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:42:12,048 - sqlalchemy.engine.Engine - INFO - [cached since 2360s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:42:12,559 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:42:12,559 - sqlalchemy.engine.Engine - INFO - [cached since 2360s ago] {}
2025-07-21 10:42:12,870 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:42:13,188 - main - INFO - 🟢 [req_1753065731703] 200 - 1.484s
2025-07-21 10:42:28,700 - main - INFO - 🔵 [req_1753065748700] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:42:28,701 - main - INFO - 🟢 [req_1753065748700] 307 - 0.001s
2025-07-21 10:42:28,703 - main - INFO - 🔵 [req_1753065748703] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:42:28,704 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:42:28,704 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:42:28,957 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:42:28,958 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:42:28,989 - sqlalchemy.engine.Engine - INFO - [cached since 2377s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:42:29,491 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:42:29,491 - sqlalchemy.engine.Engine - INFO - [cached since 2377s ago] {}
2025-07-21 10:42:29,748 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:42:30,038 - main - INFO - 🟢 [req_1753065748703] 200 - 1.335s
2025-07-21 10:44:15,194 - main - INFO - 🔵 [req_1753065855194] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:44:15,195 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:44:15,195 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:44:15,195 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:44:15,195 - main - INFO - 🟢 [req_1753065855194] 500 - 0.002s
2025-07-21 10:44:32,595 - main - INFO - 🔵 [req_1753065872595] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:44:32,596 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:44:32,596 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:44:32,596 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:44:32,596 - main - INFO - 🟢 [req_1753065872595] 500 - 0.002s
2025-07-21 10:45:49,698 - main - INFO - 🔵 [req_1753065949698] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:45:49,698 - main - INFO - 🟢 [req_1753065949698] 307 - 0.001s
2025-07-21 10:45:49,700 - main - INFO - 🔵 [req_1753065949700] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:45:49,701 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:45:49,701 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:45:49,954 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:45:49,955 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:45:49,955 - sqlalchemy.engine.Engine - INFO - [cached since 2578s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:45:50,577 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:45:50,578 - sqlalchemy.engine.Engine - INFO - [cached since 2578s ago] {}
2025-07-21 10:45:50,826 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:45:51,075 - main - INFO - 🟢 [req_1753065949700] 200 - 1.375s
2025-07-21 10:45:59,698 - main - INFO - 🔵 [req_1753065959698] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:45:59,698 - main - INFO - 🟢 [req_1753065959698] 307 - 0.000s
2025-07-21 10:45:59,700 - main - INFO - 🔵 [req_1753065959700] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:45:59,700 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:45:59,700 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:45:59,955 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:45:59,955 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:45:59,984 - sqlalchemy.engine.Engine - INFO - [cached since 2588s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:46:00,485 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:46:00,486 - sqlalchemy.engine.Engine - INFO - [cached since 2588s ago] {}
2025-07-21 10:46:00,757 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:46:01,025 - main - INFO - 🟢 [req_1753065959700] 200 - 1.325s
2025-07-21 10:47:11,978 - main - INFO - 🔵 [req_1753066031978] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:47:11,979 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:47:11,979 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:47:11,979 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:47:11,980 - main - INFO - 🟢 [req_1753066031978] 500 - 0.002s
2025-07-21 10:47:54,360 - main - INFO - 🔵 [req_1753066074360] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:47:54,361 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:47:54,361 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:47:54,361 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:47:54,362 - main - INFO - 🟢 [req_1753066074360] 500 - 0.002s
2025-07-21 10:47:56,444 - main - INFO - 🔵 [req_1753066076444] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:47:56,445 - main - INFO - 🟢 [req_1753066076444] 307 - 0.001s
2025-07-21 10:47:56,446 - main - INFO - 🔵 [req_1753066076446] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:47:56,447 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:47:56,447 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:50:10,957 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:53:38,922 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:53:38,922 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:53:38,923 - sqlalchemy.engine.Engine - INFO - [cached since 3047s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:53:39,443 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:53:39,444 - sqlalchemy.engine.Engine - INFO - [cached since 3047s ago] {}
2025-07-21 10:53:39,694 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:53:40,014 - main - INFO - 🟢 [req_1753066076446] 200 - 343.568s
2025-07-21 10:53:40,098 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 10:53:40,480 - watchfiles.main - INFO - 4 changes detected
2025-07-21 10:53:41,889 - watchfiles.main - INFO - 3 changes detected
2025-07-21 10:53:44,783 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 10:53:44,784 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 10:53:44,784 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 10:53:44,785 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:53:44,785 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:53:44,785 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 10:53:46,881 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 10:53:46,882 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:53:47,394 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 10:53:47,394 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:53:47,901 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 10:53:47,902 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:53:48,402 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:53:48,425 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 10:53:48,426 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'status_1': 'active', 'param_1': 1}
2025-07-21 10:53:48,953 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 10:53:48,954 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 10:53:49,216 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 10:53:49,216 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 10:53:49,956 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 10:53:49,956 - sqlalchemy.engine.Engine - INFO - [generated in 0.00062s] {}
2025-07-21 10:53:50,675 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 10:53:50,675 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 10:53:50,933 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 10:53:50,933 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 10:53:51,187 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 10:53:51,187 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 10:53:51,192 - main - INFO - 🔵 [req_1753066431192] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:53:51,193 - main - INFO - 🔵 [req_1753066431193] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:53:51,194 - main - INFO - 🔵 [req_1753066431194] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 10:53:51,194 - main - INFO - 🟢 [req_1753066431192] 307 - 0.001s
2025-07-21 10:53:51,195 - main - INFO - 🔵 [req_1753066431195] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 10:53:51,195 - main - INFO - 🟢 [req_1753066431193] 307 - 0.002s
2025-07-21 10:53:51,196 - main - INFO - 🔵 [req_1753066431195] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 10:53:51,196 - main - INFO - 🟢 [req_1753066431195] 307 - 0.002s
2025-07-21 10:53:51,197 - main - INFO - 🔵 [req_1753066431197] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:53:51,197 - main - INFO - 🟢 [req_1753066431195] 307 - 0.001s
2025-07-21 10:53:51,197 - main - INFO - 🔵 [req_1753066431197] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:53:51,199 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:53:51,199 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:53:51,199 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:53:51,199 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:53:51,199 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 10:53:51,199 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:53:51,199 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:53:52,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:53:52,436 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:53:52,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] {'param_1': 10, 'param_2': 0}
2025-07-21 10:53:52,927 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:53:52,928 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] {}
2025-07-21 10:53:54,441 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:53:54,442 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:53:54,442 - sqlalchemy.engine.Engine - INFO - [cached since 2.006s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:53:54,942 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:53:54,942 - sqlalchemy.engine.Engine - INFO - [cached since 2.015s ago] {}
2025-07-21 10:53:55,193 - main - INFO - 🟢 [req_1753066431194] 500 - 3.999s
2025-07-21 10:53:55,193 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:53:55,193 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:53:55,444 - main - INFO - 🟢 [req_1753066431197] 200 - 4.247s
2025-07-21 10:53:55,444 - main - INFO - 🟢 [req_1753066431197] 200 - 4.247s
2025-07-21 10:53:55,449 - main - INFO - 🔵 [req_1753066435449] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 10:53:55,449 - main - INFO - 🔵 [req_1753066435449] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 10:53:55,453 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:53:55,453 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:53:55,454 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:53:55,454 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:53:55,702 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:53:55,703 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:53:55,703 - sqlalchemy.engine.Engine - INFO - [cached since 3.267s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 10:53:56,202 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:53:56,203 - sqlalchemy.engine.Engine - INFO - [cached since 3.275s ago] {}
2025-07-21 10:53:56,691 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:53:56,692 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 10:53:56,692 - sqlalchemy.engine.Engine - INFO - [cached since 4.256s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 10:53:57,192 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 10:53:57,192 - sqlalchemy.engine.Engine - INFO - [cached since 4.265s ago] {}
2025-07-21 10:53:57,442 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:53:57,442 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 10:53:57,682 - main - INFO - 🟢 [req_1753066435449] 200 - 2.233s
2025-07-21 10:53:57,692 - main - INFO - 🟢 [req_1753066435449] 200 - 2.243s
2025-07-21 10:57:12,030 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:57:12,147 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 10:57:12,526 - watchfiles.main - INFO - 1 change detected
2025-07-21 10:57:15,696 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 10:57:15,697 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 10:57:15,697 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 10:57:15,697 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 10:57:15,697 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 10:57:15,697 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 10:57:17,828 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 10:57:17,828 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:57:18,349 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 10:57:18,350 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:57:18,968 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 10:57:18,968 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 10:57:19,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 10:57:19,541 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 10:57:19,541 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 10:57:20,060 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 10:57:20,061 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 10:57:20,411 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 10:57:20,411 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 10:57:20,669 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 10:57:20,669 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 10:57:20,931 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 10:57:20,931 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 10:57:21,189 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 10:57:21,189 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {}
2025-07-21 10:57:21,448 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 10:57:21,448 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:05:07,020 - main - INFO - 🔵 [req_1753067107020] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:05:07,021 - main - INFO - 🔵 [req_1753067107021] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:05:07,021 - main - INFO - 🟢 [req_1753067107020] 307 - 0.001s
2025-07-21 11:05:07,022 - main - INFO - 🟢 [req_1753067107021] 307 - 0.001s
2025-07-21 11:05:07,039 - main - INFO - 🔵 [req_1753067107039] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:05:07,039 - main - INFO - 🔵 [req_1753067107039] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:05:07,041 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:05:07,041 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:05:07,041 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:05:07,041 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:05:08,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:05:08,368 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:05:08,368 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] {'param_1': 10, 'param_2': 0}
2025-07-21 11:05:08,893 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:05:08,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00098s] {}
2025-07-21 11:05:10,423 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:05:10,424 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:05:10,424 - sqlalchemy.engine.Engine - INFO - [cached since 2.057s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 11:05:10,935 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:05:10,936 - sqlalchemy.engine.Engine - INFO - [cached since 2.043s ago] {}
2025-07-21 11:05:11,185 - main - INFO - 🔵 [req_1753067111185] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 11:05:11,186 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:05:11,187 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:05:11,188 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:05:11,189 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:05:11,189 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 11:05:11,191 - main - INFO - 🟢 [req_1753067111185] 500 - 0.006s
2025-07-21 11:05:11,436 - main - INFO - 🟢 [req_1753067107039] 200 - 4.396s
2025-07-21 11:05:11,445 - main - INFO - 🟢 [req_1753067107039] 200 - 4.406s
2025-07-21 11:05:40,233 - main - INFO - 🔵 [req_1753067140233] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:05:40,234 - main - INFO - 🔵 [req_1753067140234] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:05:40,235 - main - INFO - 🟢 [req_1753067140233] 307 - 0.001s
2025-07-21 11:05:40,235 - main - INFO - 🟢 [req_1753067140234] 307 - 0.001s
2025-07-21 11:05:40,287 - main - INFO - 🔵 [req_1753067140287] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:05:40,290 - main - INFO - 🔵 [req_1753067140290] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:05:40,291 - main - INFO - 🟢 [req_1753067140287] 307 - 0.004s
2025-07-21 11:05:40,292 - main - INFO - 🔵 [req_1753067140292] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:05:40,293 - main - INFO - 🔵 [req_1753067140293] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:05:40,293 - main - INFO - 🟢 [req_1753067140290] 307 - 0.003s
2025-07-21 11:05:40,314 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:05:40,314 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:05:40,315 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:05:40,315 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:05:40,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:05:40,564 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:05:40,564 - sqlalchemy.engine.Engine - INFO - [cached since 32.2s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 11:05:41,065 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:05:41,065 - sqlalchemy.engine.Engine - INFO - [cached since 32.17s ago] {}
2025-07-21 11:05:41,654 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:05:41,654 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:05:41,654 - sqlalchemy.engine.Engine - INFO - [cached since 33.29s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 11:05:42,175 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:05:42,175 - sqlalchemy.engine.Engine - INFO - [cached since 33.28s ago] {}
2025-07-21 11:05:42,434 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:05:42,435 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:05:42,684 - main - INFO - 🟢 [req_1753067140292] 200 - 2.392s
2025-07-21 11:05:42,686 - main - INFO - 🔵 [req_1753067142686] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:05:42,687 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:05:42,687 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:05:42,945 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:05:42,945 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:05:42,946 - sqlalchemy.engine.Engine - INFO - [cached since 34.58s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 11:05:43,444 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:05:43,445 - sqlalchemy.engine.Engine - INFO - [cached since 34.55s ago] {}
2025-07-21 11:05:43,694 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:05:43,695 - main - INFO - 🟢 [req_1753067140293] 200 - 3.401s
2025-07-21 11:05:43,696 - main - INFO - 🔵 [req_1753067143696] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:05:43,697 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:05:43,697 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:05:43,954 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:05:43,955 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:05:43,955 - sqlalchemy.engine.Engine - INFO - [cached since 35.59s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 11:05:44,504 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:05:44,504 - sqlalchemy.engine.Engine - INFO - [cached since 35.61s ago] {}
2025-07-21 11:05:44,765 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:05:44,766 - main - INFO - 🟢 [req_1753067142686] 200 - 2.080s
2025-07-21 11:05:45,024 - main - INFO - 🟢 [req_1753067143696] 200 - 1.327s
2025-07-21 11:07:21,055 - main - INFO - 🔵 [req_1753067241055] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:07:21,056 - main - INFO - 🔵 [req_1753067241056] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:07:21,056 - main - INFO - 🟢 [req_1753067241055] 307 - 0.001s
2025-07-21 11:07:21,056 - main - INFO - 🟢 [req_1753067241056] 307 - 0.001s
2025-07-21 11:07:21,105 - main - INFO - 🔵 [req_1753067241105] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:07:21,106 - main - INFO - 🔵 [req_1753067241106] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:07:21,106 - main - INFO - 🔵 [req_1753067241106] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:07:21,107 - main - INFO - 🟢 [req_1753067241105] 307 - 0.002s
2025-07-21 11:07:21,107 - main - INFO - 🔵 [req_1753067241107] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:07:21,108 - main - INFO - 🟢 [req_1753067241106] 307 - 0.002s
2025-07-21 11:07:21,110 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:07:21,110 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:07:21,110 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:07:21,110 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:07:21,415 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:07:21,415 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:07:21,416 - sqlalchemy.engine.Engine - INFO - [cached since 133s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 11:07:21,924 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:07:21,924 - sqlalchemy.engine.Engine - INFO - [cached since 133s ago] {}
2025-07-21 11:07:22,443 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:07:22,444 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:07:22,444 - sqlalchemy.engine.Engine - INFO - [cached since 134.1s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 11:07:23,075 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:07:23,076 - sqlalchemy.engine.Engine - INFO - [cached since 134.2s ago] {}
2025-07-21 11:07:23,376 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:07:23,376 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:07:23,624 - main - INFO - 🟢 [req_1753067241106] 200 - 2.518s
2025-07-21 11:07:23,626 - main - INFO - 🔵 [req_1753067243626] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:07:23,627 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:07:23,627 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:07:23,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:07:23,875 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:07:23,876 - sqlalchemy.engine.Engine - INFO - [cached since 135.5s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 11:07:24,375 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:07:24,376 - sqlalchemy.engine.Engine - INFO - [cached since 135.5s ago] {}
2025-07-21 11:07:24,625 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:07:24,625 - main - INFO - 🟢 [req_1753067241107] 200 - 3.518s
2025-07-21 11:07:24,627 - main - INFO - 🔵 [req_1753067244627] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:07:24,628 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:07:24,629 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:07:24,924 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:07:24,924 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:07:24,925 - sqlalchemy.engine.Engine - INFO - [cached since 136.6s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 11:07:25,446 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:07:25,447 - sqlalchemy.engine.Engine - INFO - [cached since 136.6s ago] {}
2025-07-21 11:07:25,706 - main - INFO - 🔵 [req_1753067245706] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:07:25,708 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:07:25,708 - main - INFO - 🟢 [req_1753067243626] 200 - 2.082s
2025-07-21 11:07:25,709 - main - INFO - 🟢 [req_1753067245706] 307 - 0.003s
2025-07-21 11:07:25,711 - main - INFO - 🔵 [req_1753067245711] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:07:25,712 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:07:25,712 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:07:26,066 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:07:26,066 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:07:26,066 - sqlalchemy.engine.Engine - INFO - [cached since 137.7s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 11:07:26,625 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:07:26,625 - sqlalchemy.engine.Engine - INFO - [cached since 137.7s ago] {}
2025-07-21 11:07:26,895 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:07:26,896 - main - INFO - 🟢 [req_1753067244627] 200 - 2.268s
2025-07-21 11:07:27,204 - main - INFO - 🟢 [req_1753067245711] 200 - 1.493s
2025-07-21 11:07:27,696 - main - INFO - 🔵 [req_1753067247696] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 11:07:27,697 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:07:27,697 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:07:27,697 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'UnifiedKnowledgeManager' object has no attribute 'get_available_embedding_models'
2025-07-21 11:07:27,698 - main - INFO - 🟢 [req_1753067247696] 500 - 0.002s
2025-07-21 11:12:31,849 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:12:31,971 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:12:32,356 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:12:33,028 - watchfiles.main - INFO - 3 changes detected
2025-07-21 11:12:34,849 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:12:34,850 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:12:34,850 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:12:34,851 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:12:34,851 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:12:34,851 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:12:36,977 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:12:36,978 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:12:37,496 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:12:37,497 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:12:38,017 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:12:38,017 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:12:38,536 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:12:38,556 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:12:38,556 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:12:39,077 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:12:39,077 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 11:12:39,338 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:12:39,338 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:12:39,596 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:12:39,597 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] {}
2025-07-21 11:12:39,858 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:12:39,858 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:12:40,115 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:12:40,115 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 11:12:40,376 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:12:40,376 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:12:57,219 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:12:57,219 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:12:57,219 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:12:57,220 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:12:57,220 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:12:57,220 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:12:57,238 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:12:59,316 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:12:59,316 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:12:59,906 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:12:59,907 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:13:00,416 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:13:00,416 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:13:00,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:13:00,936 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:13:00,936 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:13:01,467 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:13:01,468 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {}
2025-07-21 11:13:01,730 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:13:01,730 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:13:01,987 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:13:01,988 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 11:13:02,258 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:13:02,286 - sqlalchemy.engine.Engine - INFO - [generated in 0.02769s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:13:02,537 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:13:02,537 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 11:13:02,786 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:13:02,786 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:22:30,099 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:22:30,217 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:23:39,731 - sqlalchemy.pool.impl.QueuePool - ERROR - Exception during reset or similar
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 987, in _finalize_fairy
    fairy._reset(
  File "/opt/anaconda3/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1433, in _reset
    pool._dialect.do_rollback(self)
  File "/opt/anaconda3/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 703, in do_rollback
    dbapi_connection.rollback()
psycopg2.OperationalError: could not receive data from server: Operation timed out

2025-07-21 11:23:40,059 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:23:50,176 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:23:50,177 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:23:50,177 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:23:50,177 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:23:50,177 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:23:50,177 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:23:52,319 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:23:52,319 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:23:52,839 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:23:52,840 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:23:53,380 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:23:53,380 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:23:53,899 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:23:53,920 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:23:53,920 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:23:54,442 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:23:54,442 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 11:23:54,701 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:23:54,702 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:23:55,450 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:23:55,450 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 11:23:55,712 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:23:55,726 - sqlalchemy.engine.Engine - INFO - [generated in 0.01397s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:23:55,990 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:23:55,990 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 11:23:56,249 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:23:56,250 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:23:56,559 - main - INFO - 🔵 [req_1753068236559] GET http://localhost:8002/api/v1/knowledge-bases/models/embedding
2025-07-21 11:23:56,560 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:23:56,560 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:23:56,561 - main - INFO - 🟢 [req_1753068236559] 200 - 0.002s
2025-07-21 11:24:05,333 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:24:05,425 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:26:10,085 - main - INFO - 🔵 [req_1753068370085] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:26:10,086 - main - INFO - 🔵 [req_1753068370086] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:26:10,086 - main - INFO - 🟢 [req_1753068370085] 307 - 0.001s
2025-07-21 11:26:10,086 - main - INFO - 🟢 [req_1753068370086] 307 - 0.001s
2025-07-21 11:26:10,107 - main - INFO - 🔵 [req_1753068370107] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:26:10,108 - main - INFO - 🔵 [req_1753068370108] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:26:10,110 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:26:10,110 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:26:10,110 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:26:10,110 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:26:11,612 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:26:11,616 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:26:11,616 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] {'param_1': 12, 'param_2': 0}
2025-07-21 11:26:12,240 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:26:12,241 - sqlalchemy.engine.Engine - INFO - [generated in 0.00106s] {}
2025-07-21 11:26:14,111 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:26:14,112 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:26:14,112 - sqlalchemy.engine.Engine - INFO - [cached since 2.496s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 11:26:14,633 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:26:14,633 - sqlalchemy.engine.Engine - INFO - [cached since 2.393s ago] {}
2025-07-21 11:26:14,897 - main - INFO - 🔵 [req_1753068374897] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 11:26:14,897 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:26:14,898 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:26:14,900 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:26:14,900 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:26:14,901 - main - INFO - 🟢 [req_1753068374897] 200 - 0.004s
2025-07-21 11:26:15,153 - main - INFO - 🟢 [req_1753068370108] 200 - 5.044s
2025-07-21 11:26:15,154 - main - INFO - 🟢 [req_1753068370107] 200 - 5.046s
2025-07-21 11:28:41,170 - watchfiles.main - INFO - 4 changes detected
2025-07-21 11:28:41,351 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:28:41,731 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:28:44,040 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:28:44,044 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:28:44,044 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:28:44,044 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:28:44,044 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:28:44,045 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:28:44,045 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:28:46,180 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:28:46,180 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:28:46,703 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:28:46,703 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:28:47,220 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:28:47,220 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:28:47,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:28:47,763 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:28:47,763 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:28:48,137 - watchfiles.main - INFO - 8 changes detected
2025-07-21 11:28:48,281 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:28:48,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 11:28:48,542 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:28:48,542 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:28:48,801 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:28:48,801 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 11:28:49,126 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:28:49,126 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:28:49,392 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:28:49,392 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 11:28:49,651 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:28:49,651 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:28:50,033 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:28:52,218 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:28:52,218 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:28:52,218 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:28:52,219 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:28:52,219 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:28:52,219 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:28:54,395 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:28:54,396 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:28:54,971 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:28:54,971 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:28:55,490 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:28:55,490 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:28:56,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:28:56,035 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:28:56,035 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:28:56,552 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:28:56,552 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 11:28:56,813 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:28:56,813 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:28:57,072 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:28:57,073 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {}
2025-07-21 11:28:57,363 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:28:57,363 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:28:57,621 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:28:57,621 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 11:28:57,881 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:28:57,881 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:29:11,943 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:29:12,080 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:29:12,466 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:29:14,644 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:29:14,645 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:29:14,645 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:29:14,645 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:29:14,645 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:29:14,645 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:29:16,821 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:29:16,821 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:29:17,352 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:29:17,352 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:29:17,882 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:29:17,882 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:29:18,411 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:29:18,435 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:29:18,435 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:29:19,433 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:29:19,433 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 11:29:19,705 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:29:19,705 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:29:19,973 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:29:19,973 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {}
2025-07-21 11:29:20,244 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:29:20,244 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:29:20,512 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:29:20,513 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 11:29:20,771 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:29:20,771 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:30:01,695 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:30:01,868 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:30:02,250 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:30:02,980 - watchfiles.main - INFO - 3 changes detected
2025-07-21 11:30:04,698 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:30:04,698 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:30:04,698 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:30:04,699 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:30:04,699 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:30:04,699 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:30:06,822 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:30:06,823 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:30:07,343 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:30:07,343 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:30:07,863 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:30:07,863 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:30:08,386 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:30:08,407 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:30:08,408 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:30:08,974 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:30:08,974 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 11:30:09,235 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:30:09,235 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:30:09,493 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:30:09,493 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 11:30:09,759 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:30:09,759 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:30:10,023 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:30:10,023 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 11:30:10,282 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:30:10,282 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:30:11,330 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:30:11,331 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:30:11,331 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:30:11,331 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:30:11,331 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:30:11,331 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:30:11,360 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:30:13,432 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:30:13,432 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:30:13,953 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:30:13,953 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:30:14,472 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:30:14,473 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:30:14,992 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:30:15,013 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:30:15,013 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:30:15,534 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:30:15,534 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 11:30:15,796 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:30:15,796 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:30:16,055 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:30:16,055 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 11:30:16,314 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:30:16,315 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:30:16,574 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:30:16,574 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 11:30:16,832 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:30:16,832 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:30:35,589 - main - INFO - 🔵 [req_1753068635589] GET http://localhost:8002/api/v1/knowledge-bases/models/embedding
2025-07-21 11:30:35,591 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:30:35,591 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:30:35,622 - app.utils.config_loader - INFO - Loaded config: config/siliconflow_config.yaml
2025-07-21 11:30:35,623 - main - INFO - 🟢 [req_1753068635589] 200 - 0.034s
2025-07-21 11:30:35,704 - watchfiles.main - INFO - 3 changes detected
2025-07-21 11:30:43,214 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:30:43,326 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:34:06,593 - main - INFO - 🔵 [req_1753068846593] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:34:06,594 - main - INFO - 🔵 [req_1753068846594] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:34:06,595 - main - INFO - 🟢 [req_1753068846593] 307 - 0.001s
2025-07-21 11:34:06,595 - main - INFO - 🟢 [req_1753068846594] 307 - 0.001s
2025-07-21 11:34:06,616 - main - INFO - 🔵 [req_1753068846616] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:34:06,616 - main - INFO - 🔵 [req_1753068846616] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:34:06,618 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:34:06,618 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:34:06,619 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:34:06,621 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:34:07,982 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:34:07,986 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:34:07,986 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] {'param_1': 10, 'param_2': 0}
2025-07-21 11:34:08,520 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:34:08,521 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] {}
2025-07-21 11:34:10,042 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:34:10,043 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:34:10,043 - sqlalchemy.engine.Engine - INFO - [cached since 2.057s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 11:34:10,543 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:34:10,544 - sqlalchemy.engine.Engine - INFO - [cached since 2.023s ago] {}
2025-07-21 11:34:10,803 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:34:10,803 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:34:11,053 - main - INFO - 🟢 [req_1753068846616] 200 - 4.436s
2025-07-21 11:34:11,063 - main - INFO - 🟢 [req_1753068846616] 200 - 4.447s
2025-07-21 11:35:53,561 - main - INFO - 🔵 [req_1753068953561] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:35:53,562 - main - INFO - 🔵 [req_1753068953562] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:35:53,562 - main - INFO - 🟢 [req_1753068953561] 307 - 0.001s
2025-07-21 11:35:53,562 - main - INFO - 🟢 [req_1753068953562] 307 - 0.001s
2025-07-21 11:35:53,584 - main - INFO - 🔵 [req_1753068953584] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:35:53,584 - main - INFO - 🔵 [req_1753068953584] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:35:53,585 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:35:53,585 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:35:53,589 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:35:53,589 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:35:53,844 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:35:53,845 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:35:53,845 - sqlalchemy.engine.Engine - INFO - [cached since 105.9s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 11:35:54,455 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:35:54,489 - sqlalchemy.engine.Engine - INFO - [cached since 106s ago] {}
2025-07-21 11:35:55,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:35:55,005 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:35:55,039 - sqlalchemy.engine.Engine - INFO - [cached since 107.1s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 11:35:55,555 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:35:55,589 - sqlalchemy.engine.Engine - INFO - [cached since 107.1s ago] {}
2025-07-21 11:35:55,845 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:35:55,846 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:35:56,095 - main - INFO - 🟢 [req_1753068953584] 200 - 2.511s
2025-07-21 11:35:56,105 - main - INFO - 🟢 [req_1753068953584] 200 - 2.521s
2025-07-21 11:36:20,011 - main - INFO - 🔵 [req_1753068980011] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 11:36:20,012 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:36:20,012 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:36:20,036 - app.utils.config_loader - INFO - Loaded config: config/siliconflow_config.yaml
2025-07-21 11:36:20,037 - main - INFO - 🟢 [req_1753068980011] 200 - 0.026s
2025-07-21 11:38:38,380 - main - INFO - 🔵 [req_1753069118380] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 11:38:38,380 - main - INFO - 🔵 [req_1753069118380] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 11:38:38,380 - main - INFO - 🟢 [req_1753069118380] 307 - 0.001s
2025-07-21 11:38:38,381 - main - INFO - 🟢 [req_1753069118380] 307 - 0.001s
2025-07-21 11:38:38,403 - main - INFO - 🔵 [req_1753069118403] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 11:38:38,421 - main - INFO - 🔵 [req_1753069118421] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 11:38:38,423 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:38:38,423 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:38:38,424 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:38:38,424 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:38:38,684 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:38:38,684 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:38:38,685 - sqlalchemy.engine.Engine - INFO - [cached since 270.7s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 11:38:39,185 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:38:39,185 - sqlalchemy.engine.Engine - INFO - [cached since 270.7s ago] {}
2025-07-21 11:38:39,794 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:38:39,794 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 11:38:39,795 - sqlalchemy.engine.Engine - INFO - [cached since 271.8s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 11:38:40,405 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 11:38:40,406 - sqlalchemy.engine.Engine - INFO - [cached since 271.9s ago] {}
2025-07-21 11:38:40,714 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:38:40,715 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 11:38:41,035 - main - INFO - 🟢 [req_1753069118403] 200 - 2.632s
2025-07-21 11:38:41,035 - main - INFO - 🟢 [req_1753069118421] 200 - 2.614s
2025-07-21 11:38:55,814 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:38:56,016 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:38:56,393 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:38:59,184 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:38:59,246 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:38:59,247 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:38:59,247 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:38:59,247 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:38:59,247 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:38:59,247 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:39:01,325 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:39:01,325 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:39:01,865 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:39:01,865 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:39:02,387 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:39:02,388 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:39:02,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:39:02,941 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:39:02,941 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:39:03,517 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:39:03,517 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 11:39:03,789 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:39:03,789 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:39:04,095 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:39:04,096 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 11:39:04,347 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:39:04,347 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:39:04,715 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:39:04,716 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-21 11:39:04,965 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:39:04,965 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:39:09,603 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:39:09,604 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:39:09,604 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:39:09,604 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:39:09,604 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:39:09,604 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:39:09,632 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:39:11,865 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:39:11,865 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:39:12,385 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:39:12,385 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:39:12,995 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:39:12,995 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:39:13,555 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:39:13,580 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:39:13,580 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:39:14,097 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:39:14,097 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 11:39:14,358 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:39:14,358 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:39:14,616 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:39:14,616 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 11:39:14,898 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:39:14,898 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:39:15,166 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:39:15,166 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 11:39:15,426 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:39:15,426 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:39:17,303 - main - INFO - 🔵 [req_1753069157302] GET http://localhost:8002/api/v1/knowledge-bases/models/embedding
2025-07-21 11:39:17,304 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:39:17,304 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:39:17,328 - app.utils.config_loader - INFO - Loaded config: config/siliconflow_config.yaml
2025-07-21 11:39:17,328 - app.api.knowledge_routes - ERROR - Failed to get embedding models: 'models'
2025-07-21 11:39:17,329 - main - INFO - 🟢 [req_1753069157302] 500 - 0.026s
2025-07-21 11:39:17,386 - watchfiles.main - INFO - 3 changes detected
2025-07-21 11:44:16,391 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:44:16,531 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 11:44:16,910 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:44:17,536 - watchfiles.main - INFO - 3 changes detected
2025-07-21 11:44:20,295 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:44:20,348 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:44:20,349 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:44:20,349 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:44:20,349 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:44:20,349 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:44:20,349 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:44:22,587 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:44:22,587 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:44:23,109 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:44:23,109 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:44:23,619 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:44:23,619 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:44:24,127 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:44:24,150 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:44:24,150 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:44:24,651 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:44:24,651 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 11:44:24,909 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:44:24,910 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:44:25,158 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:44:25,158 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 11:44:25,420 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:44:25,420 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:44:25,678 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:44:25,678 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 11:44:25,927 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:44:25,927 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 11:44:28,251 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 11:44:28,252 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 11:44:28,252 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 11:44:28,252 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 11:44:28,252 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 11:44:28,252 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 11:44:28,306 - watchfiles.main - INFO - 1 change detected
2025-07-21 11:44:30,287 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 11:44:30,287 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:44:30,854 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 11:44:30,854 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:44:31,537 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 11:44:31,538 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 11:44:32,037 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 11:44:32,064 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 11:44:32,064 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 11:44:32,569 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 11:44:32,569 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 11:44:32,821 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 11:44:32,821 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 11:44:33,078 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 11:44:33,078 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] {}
2025-07-21 11:44:33,399 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 11:44:33,399 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 11:44:33,648 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 11:44:33,648 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 11:44:33,897 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 11:44:33,897 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 12:13:32,641 - main - INFO - 🔵 [req_1753071212641] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:13:32,643 - main - INFO - 🔵 [req_1753071212643] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:13:32,644 - main - INFO - 🟢 [req_1753071212641] 307 - 0.003s
2025-07-21 12:13:32,645 - main - INFO - 🟢 [req_1753071212643] 307 - 0.002s
2025-07-21 12:13:32,647 - main - INFO - 🔵 [req_1753071212647] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:13:32,648 - main - INFO - 🔵 [req_1753071212648] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:13:32,651 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:13:32,651 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:13:32,651 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:13:32,652 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:13:34,144 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:13:34,149 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:13:34,150 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] {'param_1': 10, 'param_2': 0}
2025-07-21 12:13:34,722 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:13:34,722 - sqlalchemy.engine.Engine - INFO - [generated in 0.00086s] {}
2025-07-21 12:13:36,313 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:13:36,313 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:13:36,314 - sqlalchemy.engine.Engine - INFO - [cached since 2.164s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:13:36,826 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:13:36,829 - sqlalchemy.engine.Engine - INFO - [cached since 2.107s ago] {}
2025-07-21 12:13:37,085 - main - INFO - 🔵 [req_1753071217085] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:13:37,086 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:13:37,086 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:13:37,088 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:13:37,088 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:13:37,137 - app.utils.config_loader - INFO - Loaded config: config/siliconflow_config.yaml
2025-07-21 12:13:37,138 - main - INFO - 🟢 [req_1753071217085] 200 - 0.053s
2025-07-21 12:13:37,334 - main - INFO - 🟢 [req_1753071212648] 200 - 4.686s
2025-07-21 12:13:37,344 - main - INFO - 🟢 [req_1753071212647] 200 - 4.698s
2025-07-21 12:14:58,838 - main - INFO - 🔵 [req_1753071298838] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:14:58,839 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:14:58,840 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:14:58,840 - main - INFO - 🟢 [req_1753071298838] 200 - 0.002s
2025-07-21 12:15:49,356 - main - INFO - 🔵 [req_1753071349356] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:15:49,357 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:15:49,357 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:15:49,358 - main - INFO - 🟢 [req_1753071349356] 200 - 0.002s
2025-07-21 12:16:52,858 - main - INFO - 🔵 [req_1753071412858] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:16:52,859 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:16:52,859 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:16:52,859 - main - INFO - 🟢 [req_1753071412858] 200 - 0.002s
2025-07-21 12:18:14,825 - main - INFO - 🔵 [req_1753071494825] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:18:14,825 - main - INFO - 🟢 [req_1753071494825] 307 - 0.001s
2025-07-21 12:18:14,827 - main - INFO - 🔵 [req_1753071494827] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:18:14,828 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:18:14,828 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:18:15,081 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:18:15,081 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:18:15,082 - sqlalchemy.engine.Engine - INFO - [cached since 280.9s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:18:15,592 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:18:15,592 - sqlalchemy.engine.Engine - INFO - [cached since 280.9s ago] {}
2025-07-21 12:18:15,842 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:18:16,092 - main - INFO - 🟢 [req_1753071494827] 200 - 1.265s
2025-07-21 12:18:25,821 - main - INFO - 🔵 [req_1753071505821] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:18:25,822 - main - INFO - 🟢 [req_1753071505821] 307 - 0.001s
2025-07-21 12:18:25,823 - main - INFO - 🔵 [req_1753071505823] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:18:25,824 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:18:25,824 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:20:29,892 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 12:20:30,032 - watchfiles.main - INFO - 1 change detected
2025-07-21 12:23:37,153 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:23:37,154 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:23:37,155 - sqlalchemy.engine.Engine - INFO - [cached since 603s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:23:37,743 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:23:37,743 - sqlalchemy.engine.Engine - INFO - [cached since 603s ago] {}
2025-07-21 12:23:38,013 - main - INFO - 🔵 [req_1753071818013] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:23:38,013 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:23:38,014 - main - INFO - 🔵 [req_1753071818014] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:23:38,014 - main - INFO - 🔵 [req_1753071818014] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:23:38,014 - main - INFO - 🟢 [req_1753071818013] 307 - 0.002s
2025-07-21 12:23:38,015 - main - INFO - 🔵 [req_1753071818015] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:23:38,015 - main - INFO - 🟢 [req_1753071818014] 307 - 0.001s
2025-07-21 12:23:38,016 - main - INFO - 🔵 [req_1753071818016] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:23:38,016 - main - INFO - 🟢 [req_1753071818014] 307 - 0.002s
2025-07-21 12:23:38,016 - main - INFO - 🔵 [req_1753071818016] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:23:38,017 - main - INFO - 🟢 [req_1753071818015] 307 - 0.002s
2025-07-21 12:23:38,017 - main - INFO - 🟢 [req_1753071818016] 307 - 0.002s
2025-07-21 12:23:38,018 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:23:38,018 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:23:38,019 - main - INFO - 🟢 [req_1753071818016] 200 - 0.003s
2025-07-21 12:23:38,282 - main - INFO - 🟢 [req_1753071505823] 200 - 312.459s
2025-07-21 12:23:38,284 - main - INFO - 🔵 [req_1753071818284] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:23:38,286 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:23:38,286 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:23:39,593 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:23:39,593 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:23:39,593 - sqlalchemy.engine.Engine - INFO - [cached since 605.4s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:23:40,103 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:23:40,103 - sqlalchemy.engine.Engine - INFO - [cached since 605.4s ago] {}
2025-07-21 12:23:40,424 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:23:40,731 - main - INFO - 🟢 [req_1753071818284] 200 - 2.447s
2025-07-21 12:23:40,733 - main - INFO - 🔵 [req_1753071820733] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:23:40,734 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:23:40,734 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:23:41,002 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:23:41,003 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:23:41,003 - sqlalchemy.engine.Engine - INFO - [cached since 606.8s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:23:41,543 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:23:41,543 - sqlalchemy.engine.Engine - INFO - [cached since 606.8s ago] {}
2025-07-21 12:23:41,864 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:23:42,171 - main - INFO - 🟢 [req_1753071820733] 200 - 1.438s
2025-07-21 12:23:42,173 - main - INFO - 🔵 [req_1753071822173] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:23:42,174 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:23:42,174 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:23:42,482 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:23:42,482 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:23:42,482 - sqlalchemy.engine.Engine - INFO - [cached since 608.3s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:23:42,982 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:23:42,982 - sqlalchemy.engine.Engine - INFO - [cached since 608.3s ago] {}
2025-07-21 12:23:43,313 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:23:43,622 - main - INFO - 🟢 [req_1753071822173] 200 - 1.449s
2025-07-21 12:23:43,625 - main - INFO - 🔵 [req_1753071823625] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:23:43,626 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:23:43,626 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:23:43,891 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:23:43,893 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:23:43,893 - sqlalchemy.engine.Engine - INFO - [cached since 609.7s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:23:44,443 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:23:44,444 - sqlalchemy.engine.Engine - INFO - [cached since 609.7s ago] {}
2025-07-21 12:23:44,712 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:23:44,981 - main - INFO - 🟢 [req_1753071823625] 200 - 1.356s
2025-07-21 12:23:44,982 - main - INFO - 🔵 [req_1753071824982] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:23:44,983 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:23:44,983 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:23:45,231 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:23:45,232 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:23:45,232 - sqlalchemy.engine.Engine - INFO - [cached since 611.1s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:23:45,732 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:23:45,732 - sqlalchemy.engine.Engine - INFO - [cached since 611s ago] {}
2025-07-21 12:23:45,981 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:23:46,311 - main - INFO - 🟢 [req_1753071824982] 200 - 1.329s
2025-07-21 12:24:32,682 - main - INFO - 🔵 [req_1753071872682] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:24:32,683 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:24:32,683 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:24:32,684 - main - INFO - 🟢 [req_1753071872682] 200 - 0.002s
2025-07-21 12:24:46,098 - main - INFO - 🔵 [req_1753071886098] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:24:46,099 - main - INFO - 🔵 [req_1753071886099] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:24:46,100 - main - INFO - 🟢 [req_1753071886098] 307 - 0.002s
2025-07-21 12:24:46,100 - main - INFO - 🟢 [req_1753071886099] 307 - 0.001s
2025-07-21 12:24:46,157 - main - INFO - 🔵 [req_1753071886157] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:24:46,158 - main - INFO - 🔵 [req_1753071886158] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:24:46,159 - main - INFO - 🟢 [req_1753071886157] 307 - 0.002s
2025-07-21 12:24:46,159 - main - INFO - 🔵 [req_1753071886159] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:24:46,160 - main - INFO - 🟢 [req_1753071886158] 307 - 0.002s
2025-07-21 12:24:46,161 - main - INFO - 🔵 [req_1753071886161] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:24:46,163 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:24:46,163 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:24:46,163 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:24:46,163 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:24:46,455 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:24:46,456 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:24:46,456 - sqlalchemy.engine.Engine - INFO - [cached since 672.3s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:24:47,042 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:24:47,043 - sqlalchemy.engine.Engine - INFO - [cached since 672.3s ago] {}
2025-07-21 12:24:47,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:24:47,622 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:24:47,657 - sqlalchemy.engine.Engine - INFO - [cached since 673.5s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:24:48,327 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:24:48,329 - sqlalchemy.engine.Engine - INFO - [cached since 673.6s ago] {}
2025-07-21 12:24:48,604 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:24:48,604 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:24:48,892 - main - INFO - 🟢 [req_1753071886159] 200 - 2.733s
2025-07-21 12:24:48,893 - main - INFO - 🟢 [req_1753071886161] 200 - 2.732s
2025-07-21 12:24:48,897 - main - INFO - 🔵 [req_1753071888897] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:24:48,900 - main - INFO - 🔵 [req_1753071888899] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:24:48,902 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:24:48,903 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:24:48,903 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:24:48,903 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:24:49,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:24:49,189 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:24:49,189 - sqlalchemy.engine.Engine - INFO - [cached since 675s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:24:50,263 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:24:50,264 - sqlalchemy.engine.Engine - INFO - [cached since 675.5s ago] {}
2025-07-21 12:24:50,843 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:24:50,843 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:24:50,843 - sqlalchemy.engine.Engine - INFO - [cached since 676.7s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:24:51,400 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:24:51,401 - sqlalchemy.engine.Engine - INFO - [cached since 676.7s ago] {}
2025-07-21 12:24:51,727 - main - INFO - 🔵 [req_1753071891727] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:24:51,728 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:24:51,729 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:24:51,731 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:24:51,731 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:24:51,733 - main - INFO - 🟢 [req_1753071891727] 200 - 0.007s
2025-07-21 12:24:52,031 - main - INFO - 🟢 [req_1753071888899] 200 - 3.132s
2025-07-21 12:24:52,526 - main - INFO - 🟢 [req_1753071888897] 200 - 3.629s
2025-07-21 12:27:38,830 - main - INFO - 🔵 [req_1753072058830] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:27:38,830 - main - INFO - 🟢 [req_1753072058830] 307 - 0.001s
2025-07-21 12:27:38,832 - main - INFO - 🔵 [req_1753072058832] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:27:38,832 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:27:38,833 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:27:39,089 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:27:39,089 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:27:39,089 - sqlalchemy.engine.Engine - INFO - [cached since 844.9s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:27:39,591 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:27:39,591 - sqlalchemy.engine.Engine - INFO - [cached since 844.9s ago] {}
2025-07-21 12:27:39,841 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:27:40,090 - main - INFO - 🟢 [req_1753072058832] 200 - 1.258s
2025-07-21 12:27:48,827 - main - INFO - 🔵 [req_1753072068827] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:27:48,827 - main - INFO - 🟢 [req_1753072068827] 307 - 0.001s
2025-07-21 12:27:48,829 - main - INFO - 🔵 [req_1753072068829] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:27:48,830 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:27:48,830 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:27:49,101 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:27:49,101 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:27:49,101 - sqlalchemy.engine.Engine - INFO - [cached since 854.9s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:27:49,642 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:27:49,642 - sqlalchemy.engine.Engine - INFO - [cached since 854.9s ago] {}
2025-07-21 12:27:49,912 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:27:50,180 - main - INFO - 🟢 [req_1753072068829] 200 - 1.352s
2025-07-21 12:29:59,175 - main - INFO - 🔵 [req_1753072199175] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:29:59,177 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:29:59,177 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:29:59,178 - main - INFO - 🟢 [req_1753072199175] 200 - 0.003s
2025-07-21 12:32:36,834 - main - INFO - 🔵 [req_1753072356834] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:32:36,835 - main - INFO - 🔵 [req_1753072356835] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:32:36,835 - main - INFO - 🟢 [req_1753072356834] 307 - 0.001s
2025-07-21 12:32:36,836 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:32:36,836 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:32:36,837 - main - INFO - 🟢 [req_1753072356835] 200 - 0.002s
2025-07-21 12:32:36,838 - main - INFO - 🔵 [req_1753072356838] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:32:36,839 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:32:36,839 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:35:55,861 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:35:55,863 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:35:55,863 - sqlalchemy.engine.Engine - INFO - [cached since 1342s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:35:56,392 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:35:56,392 - sqlalchemy.engine.Engine - INFO - [cached since 1342s ago] {}
2025-07-21 12:35:56,697 - main - INFO - 🔵 [req_1753072556697] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:35:56,698 - main - INFO - 🔵 [req_1753072556698] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:35:56,699 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:35:56,701 - main - INFO - 🔵 [req_1753072556701] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:35:56,701 - main - INFO - 🟢 [req_1753072556697] 307 - 0.004s
2025-07-21 12:35:56,702 - main - INFO - 🔵 [req_1753072556702] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:35:56,702 - main - INFO - 🔵 [req_1753072556702] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:35:56,703 - main - INFO - 🟢 [req_1753072556701] 307 - 0.002s
2025-07-21 12:35:56,703 - main - INFO - 🔵 [req_1753072556703] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:35:56,704 - main - INFO - 🟢 [req_1753072556702] 307 - 0.002s
2025-07-21 12:35:56,705 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:35:56,705 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:35:56,706 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:35:56,706 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:35:56,706 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:35:56,707 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:35:56,707 - main - INFO - 🟢 [req_1753072556698] 200 - 0.008s
2025-07-21 12:35:56,708 - main - INFO - 🟢 [req_1753072556702] 200 - 0.006s
2025-07-21 12:35:56,708 - main - INFO - 🟢 [req_1753072556703] 200 - 0.005s
2025-07-21 12:35:56,972 - main - INFO - 🟢 [req_1753072356838] 200 - 200.134s
2025-07-21 12:35:56,974 - main - INFO - 🔵 [req_1753072556974] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:35:56,975 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:35:56,975 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:35:58,371 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:35:58,371 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:35:58,372 - sqlalchemy.engine.Engine - INFO - [cached since 1344s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:35:58,962 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:35:58,962 - sqlalchemy.engine.Engine - INFO - [cached since 1344s ago] {}
2025-07-21 12:35:59,223 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:36:00,201 - main - INFO - 🟢 [req_1753072556974] 200 - 3.226s
2025-07-21 12:36:00,202 - main - INFO - 🔵 [req_1753072560202] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:36:00,203 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:00,203 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:00,521 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:36:00,521 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:36:00,521 - sqlalchemy.engine.Engine - INFO - [cached since 1346s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:36:01,081 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:36:01,081 - sqlalchemy.engine.Engine - INFO - [cached since 1346s ago] {}
2025-07-21 12:36:01,352 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:36:01,678 - main - INFO - 🟢 [req_1753072560202] 200 - 1.476s
2025-07-21 12:36:01,680 - main - INFO - 🔵 [req_1753072561680] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:36:01,681 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:01,681 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:01,961 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:36:01,961 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:36:01,962 - sqlalchemy.engine.Engine - INFO - [cached since 1348s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:36:02,494 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:36:02,495 - sqlalchemy.engine.Engine - INFO - [cached since 1348s ago] {}
2025-07-21 12:36:02,795 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:36:03,101 - main - INFO - 🟢 [req_1753072561680] 200 - 1.421s
2025-07-21 12:36:31,887 - main - INFO - 🔵 [req_1753072591887] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:36:31,889 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:31,889 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:31,890 - main - INFO - 🟢 [req_1753072591887] 200 - 0.003s
2025-07-21 12:36:32,673 - main - INFO - 🔵 [req_1753072592673] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:36:32,674 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:32,674 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:32,675 - main - INFO - 🟢 [req_1753072592673] 200 - 0.002s
2025-07-21 12:36:33,437 - main - INFO - 🔵 [req_1753072593437] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:36:33,438 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:33,438 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:33,439 - main - INFO - 🟢 [req_1753072593437] 200 - 0.002s
2025-07-21 12:36:34,432 - main - INFO - 🔵 [req_1753072594432] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:36:34,434 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:34,434 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:34,435 - main - INFO - 🟢 [req_1753072594432] 200 - 0.002s
2025-07-21 12:36:34,954 - main - INFO - 🔵 [req_1753072594954] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:36:34,957 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:34,957 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:34,959 - main - INFO - 🟢 [req_1753072594954] 200 - 0.004s
2025-07-21 12:36:35,408 - main - INFO - 🔵 [req_1753072595408] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:36:35,409 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:35,409 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:35,410 - main - INFO - 🟢 [req_1753072595408] 200 - 0.002s
2025-07-21 12:36:36,078 - main - INFO - 🔵 [req_1753072596078] GET http://localhost:8082/api/v1/knowledge-bases/models/embedding
2025-07-21 12:36:36,079 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:36:36,079 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:36:36,080 - main - INFO - 🟢 [req_1753072596078] 200 - 0.002s
2025-07-21 12:42:33,537 - main - INFO - 🔵 [req_1753072953537] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:42:33,537 - main - INFO - 🔵 [req_1753072953537] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:42:33,538 - main - INFO - 🟢 [req_1753072953537] 307 - 0.001s
2025-07-21 12:42:33,539 - main - INFO - 🟢 [req_1753072953537] 307 - 0.001s
2025-07-21 12:42:33,570 - main - INFO - 🔵 [req_1753072953570] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:42:33,571 - main - INFO - 🔵 [req_1753072953571] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:42:33,572 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:42:33,573 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:42:33,573 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:42:33,573 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:45:58,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:45:58,961 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:45:58,961 - sqlalchemy.engine.Engine - INFO - [cached since 1945s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:45:59,481 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:45:59,482 - sqlalchemy.engine.Engine - INFO - [cached since 1945s ago] {}
2025-07-21 12:46:01,121 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:01,122 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:01,122 - sqlalchemy.engine.Engine - INFO - [cached since 1947s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:46:01,641 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:01,641 - sqlalchemy.engine.Engine - INFO - [cached since 1947s ago] {}
2025-07-21 12:46:01,903 - main - INFO - 🔵 [req_1753073161903] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:46:01,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:01,904 - main - INFO - 🔵 [req_1753073161904] OPTIONS http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:46:01,904 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:01,905 - main - INFO - 🔵 [req_1753073161905] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:46:01,905 - main - INFO - 🟢 [req_1753073161903] 307 - 0.003s
2025-07-21 12:46:01,906 - main - INFO - 🔵 [req_1753073161906] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:46:01,906 - main - INFO - 🟢 [req_1753073161904] 200 - 0.002s
2025-07-21 12:46:01,907 - main - INFO - 🟢 [req_1753073161905] 307 - 0.002s
2025-07-21 12:46:01,908 - main - INFO - 🟢 [req_1753073161906] 307 - 0.002s
2025-07-21 12:46:01,908 - main - INFO - 🔵 [req_1753073161908] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:46:01,909 - main - INFO - 🔵 [req_1753073161909] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:46:01,909 - main - INFO - 🟢 [req_1753073161908] 307 - 0.001s
2025-07-21 12:46:01,910 - main - INFO - 🔵 [req_1753073161910] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:46:01,910 - main - INFO - 🟢 [req_1753073161909] 307 - 0.001s
2025-07-21 12:46:01,912 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:01,912 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:03,231 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:03,232 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 12:46:03,232 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'name_1': '111', 'param_1': 1}
2025-07-21 12:46:03,841 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: 'user_id' is an invalid keyword argument for KnowledgeBase
2025-07-21 12:46:03,841 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': "'user_id' is an invalid keyword argument for KnowledgeBase"}
2025-07-21 12:46:03,842 - main - INFO - 🔵 [req_1753073163842] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:46:03,842 - main - INFO - 🔵 [req_1753073163842] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:46:03,843 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:03,843 - main - INFO - 🟢 [req_1753072953571] 200 - 210.272s
2025-07-21 12:46:03,843 - main - INFO - 🟢 [req_1753072953570] 200 - 210.273s
2025-07-21 12:46:03,843 - main - INFO - 🟢 [req_1753073163842] 307 - 0.002s
2025-07-21 12:46:03,844 - main - INFO - 🟢 [req_1753073163842] 307 - 0.002s
2025-07-21 12:46:03,846 - main - INFO - 🔵 [req_1753073163846] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:46:03,847 - main - INFO - 🔵 [req_1753073163847] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:46:03,847 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:03,848 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:03,848 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:03,848 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:04,211 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:04,211 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:04,212 - sqlalchemy.engine.Engine - INFO - [cached since 1950s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:46:04,742 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:04,743 - sqlalchemy.engine.Engine - INFO - [cached since 1950s ago] {}
2025-07-21 12:46:05,280 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:05,280 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:05,281 - sqlalchemy.engine.Engine - INFO - [cached since 1951s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:46:05,822 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:05,822 - sqlalchemy.engine.Engine - INFO - [cached since 1951s ago] {}
2025-07-21 12:46:06,082 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:06,082 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:06,082 - main - INFO - 🟢 [req_1753073161910] 500 - 4.173s
2025-07-21 12:46:06,342 - main - INFO - 🟢 [req_1753073163846] 200 - 2.496s
2025-07-21 12:46:06,342 - main - INFO - 🟢 [req_1753073163847] 200 - 2.496s
2025-07-21 12:46:06,343 - main - INFO - 🔵 [req_1753073166343] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:46:06,345 - main - INFO - 🔵 [req_1753073166345] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:46:06,345 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:06,345 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:06,346 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:06,346 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:06,600 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:06,600 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:06,601 - sqlalchemy.engine.Engine - INFO - [cached since 1952s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:46:07,742 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:07,742 - sqlalchemy.engine.Engine - INFO - [cached since 1953s ago] {}
2025-07-21 12:46:08,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:08,301 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:08,301 - sqlalchemy.engine.Engine - INFO - [cached since 1954s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:46:08,825 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:08,825 - sqlalchemy.engine.Engine - INFO - [cached since 1954s ago] {}
2025-07-21 12:46:09,092 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:09,093 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:09,352 - main - INFO - 🟢 [req_1753073166343] 200 - 3.009s
2025-07-21 12:46:09,353 - main - INFO - 🟢 [req_1753073166345] 200 - 3.008s
2025-07-21 12:46:09,355 - main - INFO - 🔵 [req_1753073169355] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:46:09,356 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:09,356 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:09,621 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:09,621 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:09,621 - sqlalchemy.engine.Engine - INFO - [cached since 1955s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:46:10,141 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:10,141 - sqlalchemy.engine.Engine - INFO - [cached since 1955s ago] {}
2025-07-21 12:46:10,401 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:10,733 - main - INFO - 🟢 [req_1753073169355] 200 - 1.378s
2025-07-21 12:46:10,735 - main - INFO - 🔵 [req_1753073170735] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:46:10,737 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:10,737 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:11,031 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:11,032 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:11,032 - sqlalchemy.engine.Engine - INFO - [cached since 1957s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:46:11,651 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:11,652 - sqlalchemy.engine.Engine - INFO - [cached since 1957s ago] {}
2025-07-21 12:46:12,071 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:12,331 - main - INFO - 🟢 [req_1753073170735] 200 - 1.595s
2025-07-21 12:46:12,332 - main - INFO - 🔵 [req_1753073172332] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:46:12,333 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:12,333 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:12,590 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:12,591 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:12,592 - sqlalchemy.engine.Engine - INFO - [cached since 1958s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:46:13,151 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:13,152 - sqlalchemy.engine.Engine - INFO - [cached since 1958s ago] {}
2025-07-21 12:46:13,412 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:13,714 - main - INFO - 🟢 [req_1753073172332] 200 - 1.382s
2025-07-21 12:46:21,357 - main - INFO - 🔵 [req_1753073181357] GET http://localhost:8082/health
2025-07-21 12:46:21,684 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:21,685 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 12:46:21,685 - sqlalchemy.engine.Engine - INFO - [cached since 3718s ago] {'status_1': 'active', 'param_1': 1}
2025-07-21 12:46:22,211 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 12:46:22,211 - sqlalchemy.engine.Engine - INFO - [cached since 3718s ago] {}
2025-07-21 12:46:22,471 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 12:46:22,471 - sqlalchemy.engine.Engine - INFO - [cached since 3718s ago] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 12:46:22,742 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 12:46:22,742 - sqlalchemy.engine.Engine - INFO - [cached since 3718s ago] {}
2025-07-21 12:46:23,002 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 12:46:23,002 - sqlalchemy.engine.Engine - INFO - [cached since 3718s ago] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 12:46:23,742 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 12:46:23,742 - sqlalchemy.engine.Engine - INFO - [cached since 3718s ago] {}
2025-07-21 12:46:24,001 - main - INFO - 🟢 [req_1753073181357] 200 - 2.644s
2025-07-21 12:46:38,835 - main - INFO - 🔵 [req_1753073198835] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:46:38,836 - main - INFO - 🟢 [req_1753073198835] 307 - 0.001s
2025-07-21 12:46:38,838 - main - INFO - 🔵 [req_1753073198838] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:46:38,839 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:46:38,839 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:46:39,094 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:46:39,094 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:46:39,095 - sqlalchemy.engine.Engine - INFO - [cached since 1985s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:46:39,621 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:46:39,621 - sqlalchemy.engine.Engine - INFO - [cached since 1985s ago] {}
2025-07-21 12:46:39,891 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:46:40,641 - main - INFO - 🟢 [req_1753073198838] 200 - 1.803s
2025-07-21 12:47:53,878 - main - INFO - 🔵 [req_1753073273878] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:47:53,880 - main - INFO - 🔵 [req_1753073273880] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:47:53,880 - main - INFO - 🟢 [req_1753073273878] 307 - 0.002s
2025-07-21 12:47:53,881 - main - INFO - 🟢 [req_1753073273880] 307 - 0.001s
2025-07-21 12:47:53,941 - main - INFO - 🔵 [req_1753073273941] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:47:53,942 - main - INFO - 🔵 [req_1753073273942] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:47:53,943 - main - INFO - 🟢 [req_1753073273941] 307 - 0.002s
2025-07-21 12:47:53,943 - main - INFO - 🔵 [req_1753073273943] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:47:53,943 - main - INFO - 🟢 [req_1753073273942] 307 - 0.001s
2025-07-21 12:47:54,226 - main - INFO - 🔵 [req_1753073274226] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:47:54,227 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:47:54,227 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:47:54,229 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:47:54,229 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:47:54,491 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:47:54,492 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:47:54,492 - sqlalchemy.engine.Engine - INFO - [cached since 2060s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:47:55,032 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:47:55,033 - sqlalchemy.engine.Engine - INFO - [cached since 2060s ago] {}
2025-07-21 12:47:55,960 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:47:55,961 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:47:55,961 - sqlalchemy.engine.Engine - INFO - [cached since 2062s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:47:57,353 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:47:57,354 - sqlalchemy.engine.Engine - INFO - [cached since 2063s ago] {}
2025-07-21 12:47:57,612 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:47:57,612 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:47:57,874 - main - INFO - 🟢 [req_1753073273943] 200 - 3.931s
2025-07-21 12:47:57,874 - main - INFO - 🟢 [req_1753073274226] 200 - 3.649s
2025-07-21 12:47:57,875 - main - INFO - 🔵 [req_1753073277875] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:47:57,876 - main - INFO - 🔵 [req_1753073277876] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:47:57,878 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:47:57,878 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:47:57,878 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:47:57,878 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:47:58,182 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:47:58,183 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:47:58,183 - sqlalchemy.engine.Engine - INFO - [cached since 2064s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:47:58,703 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:47:58,703 - sqlalchemy.engine.Engine - INFO - [cached since 2064s ago] {}
2025-07-21 12:47:59,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:47:59,223 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:47:59,224 - sqlalchemy.engine.Engine - INFO - [cached since 2065s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:47:59,742 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:47:59,743 - sqlalchemy.engine.Engine - INFO - [cached since 2065s ago] {}
2025-07-21 12:48:00,004 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:48:00,004 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:48:00,262 - main - INFO - 🟢 [req_1753073277876] 200 - 2.385s
2025-07-21 12:48:00,272 - main - INFO - 🟢 [req_1753073277875] 200 - 2.397s
2025-07-21 12:48:17,914 - main - INFO - 🔵 [req_1753073297914] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:48:17,916 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:48:17,916 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:48:18,873 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:48:18,873 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 12:48:18,874 - sqlalchemy.engine.Engine - INFO - [cached since 135.6s ago] {'name_1': '1111', 'param_1': 1}
2025-07-21 12:48:19,483 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: 'user_id' is an invalid keyword argument for KnowledgeBase
2025-07-21 12:48:19,483 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': "'user_id' is an invalid keyword argument for KnowledgeBase"}
2025-07-21 12:48:19,484 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:48:19,792 - main - INFO - 🟢 [req_1753073297914] 500 - 1.878s
2025-07-21 12:48:20,062 - main - INFO - 🔵 [req_1753073300062] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:48:20,064 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:48:20,064 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:48:20,344 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:48:20,344 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 12:48:20,345 - sqlalchemy.engine.Engine - INFO - [cached since 137.1s ago] {'name_1': '1111', 'param_1': 1}
2025-07-21 12:48:20,862 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: 'user_id' is an invalid keyword argument for KnowledgeBase
2025-07-21 12:48:20,862 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': "'user_id' is an invalid keyword argument for KnowledgeBase"}
2025-07-21 12:48:20,863 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:48:21,122 - main - INFO - 🟢 [req_1753073300062] 500 - 1.060s
2025-07-21 12:50:14,699 - main - INFO - 🔵 [req_1753073414699] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:50:14,700 - main - INFO - 🔵 [req_1753073414700] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:50:14,700 - main - INFO - 🟢 [req_1753073414699] 307 - 0.001s
2025-07-21 12:50:14,701 - main - INFO - 🟢 [req_1753073414700] 307 - 0.001s
2025-07-21 12:50:14,765 - main - INFO - 🔵 [req_1753073414765] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:50:14,765 - main - INFO - 🔵 [req_1753073414765] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:50:14,766 - main - INFO - 🟢 [req_1753073414765] 307 - 0.001s
2025-07-21 12:50:14,767 - main - INFO - 🟢 [req_1753073414765] 307 - 0.002s
2025-07-21 12:50:14,781 - main - INFO - 🔵 [req_1753073414781] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:50:14,782 - main - INFO - 🔵 [req_1753073414782] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:50:14,783 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:50:14,784 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:50:14,784 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:50:14,784 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:50:15,109 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:50:15,110 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:50:15,110 - sqlalchemy.engine.Engine - INFO - [cached since 2201s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:50:15,680 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:50:15,681 - sqlalchemy.engine.Engine - INFO - [cached since 2201s ago] {}
2025-07-21 12:50:16,361 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:50:16,362 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:50:16,362 - sqlalchemy.engine.Engine - INFO - [cached since 2202s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:50:16,933 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:50:16,933 - sqlalchemy.engine.Engine - INFO - [cached since 2202s ago] {}
2025-07-21 12:50:17,192 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:50:17,193 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:50:17,491 - main - INFO - 🟢 [req_1753073414782] 200 - 2.709s
2025-07-21 12:50:17,492 - main - INFO - 🟢 [req_1753073414781] 200 - 2.711s
2025-07-21 12:50:17,495 - main - INFO - 🔵 [req_1753073417495] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:50:17,496 - main - INFO - 🔵 [req_1753073417496] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:50:17,497 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:50:17,497 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:50:17,497 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:50:17,497 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:50:17,759 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:50:17,760 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:50:17,761 - sqlalchemy.engine.Engine - INFO - [cached since 2204s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:50:18,290 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:50:18,291 - sqlalchemy.engine.Engine - INFO - [cached since 2204s ago] {}
2025-07-21 12:50:18,890 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:50:18,890 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:50:18,890 - sqlalchemy.engine.Engine - INFO - [cached since 2205s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:50:20,399 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:50:20,400 - sqlalchemy.engine.Engine - INFO - [cached since 2206s ago] {}
2025-07-21 12:50:20,660 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:50:20,660 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:50:21,002 - main - INFO - 🟢 [req_1753073417495] 200 - 3.507s
2025-07-21 12:50:21,010 - main - INFO - 🟢 [req_1753073417496] 200 - 3.514s
2025-07-21 12:50:35,788 - watchfiles.main - INFO - 3 changes detected
2025-07-21 12:50:35,915 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 12:50:36,301 - watchfiles.main - INFO - 1 change detected
2025-07-21 12:50:42,232 - watchfiles.main - INFO - 3 changes detected
2025-07-21 12:51:15,495 - watchfiles.main - INFO - 1 change detected
2025-07-21 12:51:15,506 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 12:51:15,506 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 12:51:15,506 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 12:51:15,506 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:51:15,507 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:51:15,507 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 12:51:17,812 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 12:51:17,812 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:51:18,360 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 12:51:18,360 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:51:18,980 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 12:51:18,980 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:51:19,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:51:19,525 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 12:51:19,526 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'active', 'param_1': 1}
2025-07-21 12:51:20,041 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 12:51:20,041 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-21 12:51:20,307 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 12:51:20,308 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 12:51:20,572 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 12:51:20,572 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {}
2025-07-21 12:51:20,832 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 12:51:20,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 12:51:21,091 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 12:51:21,091 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 12:51:21,350 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 12:51:21,350 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 12:52:11,135 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 12:52:11,229 - watchfiles.main - INFO - 1 change detected
2025-07-21 12:52:13,714 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 12:52:13,714 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 12:52:13,714 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 12:52:13,714 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:52:13,715 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:52:13,715 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 12:52:15,940 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 12:52:15,940 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:52:16,461 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 12:52:16,461 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:52:16,980 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 12:52:16,981 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:52:17,502 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:52:17,524 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 12:52:17,525 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'status_1': 'active', 'param_1': 1}
2025-07-21 12:52:18,060 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 12:52:18,060 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 12:52:18,405 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 12:52:18,405 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 12:52:18,712 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 12:52:18,713 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 12:52:19,466 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 12:52:19,466 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 12:52:19,723 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 12:52:19,724 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {}
2025-07-21 12:52:19,982 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 12:52:19,982 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 12:55:26,723 - main - INFO - 🔵 [req_1753073726723] GET http://localhost:8082/health
2025-07-21 12:55:26,725 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 12:55:26,725 - sqlalchemy.engine.Engine - INFO - [cached since 189.2s ago] {'status_1': 'active', 'param_1': 1}
2025-07-21 12:55:26,990 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 12:55:26,990 - sqlalchemy.engine.Engine - INFO - [cached since 188.9s ago] {}
2025-07-21 12:55:27,247 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 12:55:27,248 - sqlalchemy.engine.Engine - INFO - [cached since 188.8s ago] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 12:55:27,518 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 12:55:27,518 - sqlalchemy.engine.Engine - INFO - [cached since 188.8s ago] {}
2025-07-21 12:55:27,778 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 12:55:27,778 - sqlalchemy.engine.Engine - INFO - [cached since 188.3s ago] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 12:55:28,078 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 12:55:28,078 - sqlalchemy.engine.Engine - INFO - [cached since 188.4s ago] {}
2025-07-21 12:55:28,338 - main - INFO - 🟢 [req_1753073726723] 200 - 1.614s
2025-07-21 12:57:13,273 - main - INFO - 🔵 [req_1753073833273] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:57:13,274 - main - INFO - 🔵 [req_1753073833274] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:57:13,274 - main - INFO - 🟢 [req_1753073833273] 307 - 0.002s
2025-07-21 12:57:13,275 - main - INFO - 🟢 [req_1753073833274] 307 - 0.001s
2025-07-21 12:57:13,313 - main - INFO - 🔵 [req_1753073833313] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:57:13,314 - main - INFO - 🔵 [req_1753073833314] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:57:13,316 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:57:13,316 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:57:13,316 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:57:13,316 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:57:14,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:57:14,666 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:57:14,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] {'param_1': 10, 'param_2': 0}
2025-07-21 12:57:15,177 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:57:15,178 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {}
2025-07-21 12:57:16,749 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:57:16,749 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:57:16,749 - sqlalchemy.engine.Engine - INFO - [cached since 2.084s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:57:17,269 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:57:17,270 - sqlalchemy.engine.Engine - INFO - [cached since 2.092s ago] {}
2025-07-21 12:57:17,530 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:57:17,530 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:57:17,811 - main - INFO - 🟢 [req_1753073833313] 200 - 4.498s
2025-07-21 12:57:17,811 - main - INFO - 🟢 [req_1753073833314] 200 - 4.497s
2025-07-21 12:57:31,188 - main - INFO - 🔵 [req_1753073851188] OPTIONS http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:57:31,188 - main - INFO - 🟢 [req_1753073851188] 200 - 0.001s
2025-07-21 12:57:31,190 - main - INFO - 🔵 [req_1753073851190] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:57:31,191 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:57:31,192 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:57:31,459 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:57:31,461 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 12:57:31,461 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'name_1': '1', 'param_1': 1}
2025-07-21 12:57:31,986 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 12:57:31,986 - sqlalchemy.engine.Engine - INFO - [generated in 0.00115s] {'id': UUID('d3fc549a-1a75-4b22-9c9d-a429292985b3'), 'name': '1', 'description': '1', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 12:57:32,250 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:57:32,509 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint
DETAIL:  Failing row contains (d3fc549a-1a75-4b22-9c9d-a429292985b3, 1, 1, null, token_based, 1024, 128, null, null, null, f, 0, 0, 2025-07-21 04:57:31.656274, 2025-07-21 04:57:31.656274, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, f, f, vector, 0.7).

[SQL: INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('d3fc549a-1a75-4b22-9c9d-a429292985b3'), 'name': '1', 'description': '1', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 12:57:32,510 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint\nDETAIL:  Failing row contains (d3fc549a-1a75-4b22-9c9d-a429292985b3, 1, 1, null, token_based, 1024, 128, null, null, null, f, 0, 0, 2025-07-21 04:57:31.656274, 2025-07-21 04:57:31.656274, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, f, f, vector, 0.7).\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'d3fc549a-1a75-4b22-9c9d-a429292985b3\'), \'name\': \'1\', \'description\': \'1\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 12:57:32,510 - main - INFO - 🟢 [req_1753073851190] 500 - 1.321s
2025-07-21 12:57:53,215 - main - INFO - 🔵 [req_1753073873215] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:57:53,217 - main - INFO - 🔵 [req_1753073873217] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:57:53,218 - main - INFO - 🟢 [req_1753073873215] 307 - 0.003s
2025-07-21 12:57:53,219 - main - INFO - 🟢 [req_1753073873217] 307 - 0.002s
2025-07-21 12:57:53,277 - main - INFO - 🔵 [req_1753073873277] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 12:57:53,278 - main - INFO - 🔵 [req_1753073873278] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 12:57:53,278 - main - INFO - 🟢 [req_1753073873277] 307 - 0.002s
2025-07-21 12:57:53,279 - main - INFO - 🟢 [req_1753073873278] 307 - 0.002s
2025-07-21 12:57:53,280 - main - INFO - 🔵 [req_1753073873280] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:57:53,282 - main - INFO - 🔵 [req_1753073873282] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:57:53,284 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:57:53,284 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:57:53,284 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:57:53,284 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:57:53,548 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:57:53,549 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:57:53,550 - sqlalchemy.engine.Engine - INFO - [cached since 38.88s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:57:54,080 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:57:54,080 - sqlalchemy.engine.Engine - INFO - [cached since 38.9s ago] {}
2025-07-21 12:57:55,088 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:57:55,089 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:57:55,089 - sqlalchemy.engine.Engine - INFO - [cached since 40.42s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:57:55,661 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:57:55,661 - sqlalchemy.engine.Engine - INFO - [cached since 40.48s ago] {}
2025-07-21 12:57:55,949 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:57:55,949 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:57:56,209 - main - INFO - 🟢 [req_1753073873280] 200 - 2.929s
2025-07-21 12:57:56,210 - main - INFO - 🟢 [req_1753073873282] 200 - 2.928s
2025-07-21 12:57:56,210 - main - INFO - 🔵 [req_1753073876210] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:57:56,212 - main - INFO - 🔵 [req_1753073876212] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 12:57:56,213 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:57:56,213 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:57:56,213 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:57:56,213 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:57:56,475 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:57:56,475 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:57:56,475 - sqlalchemy.engine.Engine - INFO - [cached since 41.81s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 12:57:57,111 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:57:57,111 - sqlalchemy.engine.Engine - INFO - [cached since 41.93s ago] {}
2025-07-21 12:57:57,629 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:57:57,630 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 12:57:57,630 - sqlalchemy.engine.Engine - INFO - [cached since 42.96s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 12:57:58,220 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 12:57:58,220 - sqlalchemy.engine.Engine - INFO - [cached since 43.04s ago] {}
2025-07-21 12:57:58,559 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:57:58,560 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:57:58,871 - main - INFO - 🟢 [req_1753073876210] 200 - 2.660s
2025-07-21 12:57:58,871 - main - INFO - 🟢 [req_1753073876212] 200 - 2.659s
2025-07-21 12:58:38,900 - main - INFO - 🔵 [req_1753073918900] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 12:58:38,902 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:58:38,902 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:58:39,156 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:58:39,156 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 12:58:39,156 - sqlalchemy.engine.Engine - INFO - [cached since 67.7s ago] {'name_1': '测试知识库', 'param_1': 1}
2025-07-21 12:58:39,667 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 12:58:39,667 - sqlalchemy.engine.Engine - INFO - [cached since 67.68s ago] {'id': UUID('2a0c3d91-8748-482b-9a84-f5abfb21d13e'), 'name': '测试知识库', 'description': '测试描述', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 12:58:39,927 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 12:58:40,248 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint
DETAIL:  Failing row contains (2a0c3d91-8748-482b-9a84-f5abfb21d13e, 测试知识库, 测试描述, null, token_based, 1024, 128, null, null, null, f, 0, 0, 2025-07-21 04:58:39.353883, 2025-07-21 04:58:39.353883, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, f, f, vector, 0.7).

[SQL: INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('2a0c3d91-8748-482b-9a84-f5abfb21d13e'), 'name': '测试知识库', 'description': '测试描述', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 12:58:40,248 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint\nDETAIL:  Failing row contains (2a0c3d91-8748-482b-9a84-f5abfb21d13e, 测试知识库, 测试描述, null, token_based, 1024, 128, null, null, null, f, 0, 0, 2025-07-21 04:58:39.353883, 2025-07-21 04:58:39.353883, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, f, f, vector, 0.7).\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'2a0c3d91-8748-482b-9a84-f5abfb21d13e\'), \'name\': \'测试知识库\', \'description\': \'测试描述\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 12:58:40,249 - main - INFO - 🟢 [req_1753073918900] 500 - 1.349s
2025-07-21 12:59:27,533 - watchfiles.main - INFO - 3 changes detected
2025-07-21 12:59:27,634 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 12:59:27,702 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 12:59:28,081 - watchfiles.main - INFO - 1 change detected
2025-07-21 12:59:28,699 - watchfiles.main - INFO - 5 changes detected
2025-07-21 12:59:30,581 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 12:59:30,582 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 12:59:30,582 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 12:59:30,582 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:59:30,582 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:59:30,583 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 12:59:30,640 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 12:59:30,640 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 12:59:30,641 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 12:59:30,641 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:59:30,641 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:59:30,641 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 12:59:32,752 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 12:59:32,752 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:59:33,282 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 12:59:33,282 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:59:33,849 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 12:59:33,849 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:59:34,867 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:59:34,889 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 12:59:34,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'active', 'param_1': 1}
2025-07-21 12:59:35,451 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 12:59:35,451 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {}
2025-07-21 12:59:35,711 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 12:59:35,711 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 12:59:35,717 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 12:59:35,718 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:59:35,989 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 12:59:35,990 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] {}
2025-07-21 12:59:36,301 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 12:59:36,302 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 12:59:36,558 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 12:59:36,559 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 12:59:36,759 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 12:59:36,759 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:59:36,820 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 12:59:36,820 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 12:59:37,276 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 12:59:37,277 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:59:38,278 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 12:59:38,302 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 12:59:38,302 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 12:59:38,819 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 12:59:38,819 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {}
2025-07-21 12:59:39,091 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 12:59:39,092 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 12:59:39,349 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 12:59:39,349 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {}
2025-07-21 12:59:39,710 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 12:59:39,711 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 12:59:39,969 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 12:59:39,969 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 12:59:40,267 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 12:59:40,267 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 12:59:51,446 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 12:59:54,956 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 12:59:57,183 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 12:59:57,184 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 12:59:57,184 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 12:59:57,184 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 12:59:57,184 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 12:59:57,184 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 12:59:59,378 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 12:59:59,378 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 12:59:59,898 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 12:59:59,898 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:00:00,417 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:00:00,417 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:00:01,007 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:00:01,029 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:00:01,030 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:00:01,560 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:00:01,560 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 13:00:01,951 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:00:01,951 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:00:02,262 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:00:02,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 13:00:02,576 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:00:02,576 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:00:02,880 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:00:02,880 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 13:00:03,137 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:00:03,138 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:01:08,668 - main - INFO - 🔵 [req_1753074068668] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:01:08,670 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:01:08,670 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:01:10,728 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:01:10,730 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:01:10,731 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name_1': '测试知识库2', 'param_1': 1}
2025-07-21 13:01:11,249 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: 'user_id' is an invalid keyword argument for KnowledgeBase
2025-07-21 13:01:11,249 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': "'user_id' is an invalid keyword argument for KnowledgeBase"}
2025-07-21 13:01:11,249 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:01:11,510 - main - INFO - 🟢 [req_1753074068668] 500 - 2.842s
2025-07-21 13:01:39,013 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:01:39,142 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:01:39,210 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:01:39,522 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:01:40,301 - watchfiles.main - INFO - 5 changes detected
2025-07-21 13:01:42,165 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:01:42,166 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:01:42,166 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:01:42,166 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:01:42,166 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:01:42,166 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:01:42,223 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:01:42,223 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:01:42,223 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:01:42,224 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:01:42,224 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:01:42,224 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:01:44,541 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:01:44,541 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:01:44,541 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:01:44,541 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:01:45,069 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:01:45,069 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:01:45,069 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:01:45,069 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:01:45,599 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:01:45,599 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:01:45,599 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:01:45,599 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:01:46,120 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:01:46,135 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:01:46,151 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:01:46,151 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:01:46,162 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:01:46,162 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:01:46,691 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:01:46,691 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:01:46,952 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:01:46,953 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:01:47,170 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:01:47,170 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 13:01:47,221 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:01:47,221 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:01:47,432 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:01:47,432 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:01:47,481 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:01:47,481 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:01:47,699 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:01:47,699 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 13:01:47,740 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:01:47,740 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 13:01:47,970 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:01:47,970 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:01:48,008 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:01:48,008 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:01:48,229 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:01:48,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:01:48,579 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:01:48,579 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:01:53,971 - main - INFO - 🔵 [req_1753074113971] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:01:53,973 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:01:53,973 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:01:55,328 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:01:55,331 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:01:55,331 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name_1': '测试知识库3', 'param_1': 1}
2025-07-21 13:01:55,924 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:01:55,924 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] {'id': UUID('91088fa8-a2af-4881-aff3-7c9a4d4bc024'), 'name': '测试知识库3', 'description': '测试描述3', 'user_id': '7f27533d-d052-41e5-a705-cba4275c37b0', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:01:56,198 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:01:56,539 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"
DETAIL:  Key (user_id)=(7f27533d-d052-41e5-a705-cba4275c37b0) is not present in table "users".

[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('91088fa8-a2af-4881-aff3-7c9a4d4bc024'), 'name': '测试知识库3', 'description': '测试描述3', 'user_id': '7f27533d-d052-41e5-a705-cba4275c37b0', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 13:01:56,540 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"\nDETAIL:  Key (user_id)=(7f27533d-d052-41e5-a705-cba4275c37b0) is not present in table "users".\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'91088fa8-a2af-4881-aff3-7c9a4d4bc024\'), \'name\': \'测试知识库3\', \'description\': \'测试描述3\', \'user_id\': \'7f27533d-d052-41e5-a705-cba4275c37b0\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 13:01:56,541 - main - INFO - 🟢 [req_1753074113971] 500 - 2.570s
2025-07-21 13:02:06,159 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:02:06,301 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:02:06,303 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:02:06,684 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:02:07,315 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:02:08,783 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:02:08,784 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:02:08,784 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:02:08,784 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:02:08,784 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:02:08,784 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:02:08,810 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:02:08,811 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:02:08,811 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:02:08,811 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:02:08,811 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:02:08,811 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:02:11,983 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:02:11,983 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:12,503 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:02:12,503 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:13,022 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:02:13,022 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:13,542 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:02:13,563 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:02:13,563 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:02:14,602 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:02:14,602 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:02:14,875 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:02:14,875 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:02:15,143 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:02:15,143 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {}
2025-07-21 13:02:15,412 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:02:15,413 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:02:15,681 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:02:15,681 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {}
2025-07-21 13:02:15,939 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:02:15,939 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:02:29,972 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:02:29,973 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:31,063 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:02:31,063 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:31,632 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:02:31,632 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:32,152 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:02:32,175 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:02:32,175 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:02:32,694 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:02:32,694 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 13:02:32,956 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:02:32,956 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:02:33,229 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:02:33,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:02:33,539 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:02:33,539 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:02:33,802 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:02:33,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-21 13:02:34,062 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:02:34,062 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:02:34,068 - main - INFO - 🔵 [req_1753074154068] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:02:34,070 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:02:34,070 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:02:35,341 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:02:35,345 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:02:35,346 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'name_1': '测试知识库4', 'param_1': 1}
2025-07-21 13:02:35,874 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:02:35,874 - sqlalchemy.engine.Engine - INFO - [generated in 0.00049s] {'id': UUID('0da252b6-f5c2-44ef-8f9a-e976711f4965'), 'name': '测试知识库4', 'description': '测试描述4', 'user_id': 'system', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:02:36,133 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:02:36,390 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"
DETAIL:  Key (user_id)=(system) is not present in table "users".

[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('0da252b6-f5c2-44ef-8f9a-e976711f4965'), 'name': '测试知识库4', 'description': '测试描述4', 'user_id': 'system', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 13:02:36,391 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"\nDETAIL:  Key (user_id)=(system) is not present in table "users".\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'0da252b6-f5c2-44ef-8f9a-e976711f4965\'), \'name\': \'测试知识库4\', \'description\': \'测试描述4\', \'user_id\': \'system\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 13:02:36,391 - main - INFO - 🟢 [req_1753074154068] 500 - 2.323s
2025-07-21 13:02:46,176 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:02:46,352 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:02:46,354 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:02:46,739 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:02:47,311 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:02:48,819 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:02:48,819 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:02:48,819 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:02:48,820 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:02:48,820 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:02:48,820 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:02:48,844 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:02:48,845 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:02:48,845 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:02:48,846 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:02:48,846 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:02:48,846 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:02:51,059 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:02:51,059 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:51,068 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:02:51,069 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:51,569 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:02:51,569 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:51,589 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:02:51,589 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:52,078 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:02:52,078 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:52,108 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:02:52,109 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:52,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:02:52,600 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:02:52,600 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:02:52,629 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:02:52,649 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:02:52,649 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:02:53,119 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:02:53,119 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:02:53,181 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:02:53,181 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 13:02:53,371 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:02:53,372 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:02:53,441 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:02:53,441 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:02:53,629 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:02:53,629 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:02:53,701 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:02:53,701 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 13:02:53,882 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:02:53,883 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:02:53,962 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:02:53,962 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:02:54,141 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:02:54,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {}
2025-07-21 13:02:54,219 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:02:54,219 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:02:54,398 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:02:54,398 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:02:54,479 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:02:54,480 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:02:55,246 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:02:55,389 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:02:55,406 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:02:55,787 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:02:56,404 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:02:57,852 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:02:57,853 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:02:57,853 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:02:57,853 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:02:57,853 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:02:57,853 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:02:57,895 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:02:57,896 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:02:57,896 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:02:57,897 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:02:57,897 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:02:57,897 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:02:59,968 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:02:59,968 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:02:59,998 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:02:59,998 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:00,480 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:03:00,480 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:00,530 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:03:00,530 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:01,165 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:03:01,165 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:03:01,165 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:01,165 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:01,688 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:03:01,701 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:03:01,708 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:03:01,708 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:03:01,722 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:03:01,723 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:03:02,220 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:03:02,220 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-21 13:03:02,259 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:03:02,260 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {}
2025-07-21 13:03:02,471 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:03:02,471 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:03:02,520 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:03:02,521 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:03:02,729 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:03:02,729 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:03:02,779 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:03:02,779 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 13:03:02,981 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:03:02,982 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:03:03,051 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:03:03,051 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:03:03,239 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:03:03,239 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:03:03,309 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:03:03,309 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 13:03:03,488 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:03:03,488 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:03:03,568 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:03:03,569 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:03:07,570 - main - INFO - 🔵 [req_1753074187570] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:03:07,572 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:03:07,572 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:03:09,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:03:09,662 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:03:09,662 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'name_1': '测试知识库5', 'param_1': 1}
2025-07-21 13:03:10,251 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:03:10,251 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] {'id': UUID('75ffced5-b79f-4034-bbd4-07f6c3cda571'), 'name': '测试知识库5', 'description': '测试描述5', 'user_id': 'system', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:03:10,558 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:03:10,809 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"
DETAIL:  Key (user_id)=(system) is not present in table "users".

[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('75ffced5-b79f-4034-bbd4-07f6c3cda571'), 'name': '测试知识库5', 'description': '测试描述5', 'user_id': 'system', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 13:03:10,809 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"\nDETAIL:  Key (user_id)=(system) is not present in table "users".\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'75ffced5-b79f-4034-bbd4-07f6c3cda571\'), \'name\': \'测试知识库5\', \'description\': \'测试描述5\', \'user_id\': \'system\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 13:03:10,810 - main - INFO - 🟢 [req_1753074187570] 500 - 3.240s
2025-07-21 13:03:20,924 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:03:21,079 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:03:21,100 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:03:21,483 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:03:22,055 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:03:23,486 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:03:23,487 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:03:23,487 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:03:23,487 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:03:23,487 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:03:23,487 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:03:23,524 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:03:23,524 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:03:23,524 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:03:23,524 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:03:23,525 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:03:23,525 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:03:25,647 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:03:25,648 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:26,168 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:03:26,168 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:26,338 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:03:26,338 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:26,687 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:03:26,687 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:26,838 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:03:26,839 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:27,208 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:03:27,230 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:03:27,237 - sqlalchemy.engine.Engine - INFO - [generated in 0.00746s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:03:27,337 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:03:27,338 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:27,760 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:03:27,760 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 13:03:27,838 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:03:27,857 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:03:27,857 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:03:28,020 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:03:28,020 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:03:28,289 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:03:28,289 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:03:28,360 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:03:28,360 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:03:28,549 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:03:28,550 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:03:28,620 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:03:28,620 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:03:28,818 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:03:28,819 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:03:28,880 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:03:28,880 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {}
2025-07-21 13:03:29,078 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:03:29,078 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:03:29,141 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:03:29,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:03:29,399 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:03:29,399 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 13:03:29,648 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:03:29,648 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:03:36,464 - main - INFO - 🔵 [req_1753074216464] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:03:36,466 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:03:36,466 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:03:37,739 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:03:37,743 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:03:37,743 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'name_1': '测试知识库6', 'param_1': 1}
2025-07-21 13:03:38,281 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:03:38,282 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] {'id': UUID('761bc3fa-6629-4c6f-aba6-419d82b3da06'), 'name': '测试知识库6', 'description': '测试描述6', 'user_id': None, 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:03:39,348 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:03:39,598 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint
DETAIL:  Failing row contains (761bc3fa-6629-4c6f-aba6-419d82b3da06, 测试知识库6, 测试描述6, null, token_based, 1024, 128, null, null, null, f, 0, 0, 2025-07-21 05:03:37.967172, 2025-07-21 05:03:37.967172, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, f, f, vector, 0.7).

[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('761bc3fa-6629-4c6f-aba6-419d82b3da06'), 'name': '测试知识库6', 'description': '测试描述6', 'user_id': None, 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 13:03:39,599 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint\nDETAIL:  Failing row contains (761bc3fa-6629-4c6f-aba6-419d82b3da06, 测试知识库6, 测试描述6, null, token_based, 1024, 128, null, null, null, f, 0, 0, 2025-07-21 05:03:37.967172, 2025-07-21 05:03:37.967172, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, f, f, vector, 0.7).\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'761bc3fa-6629-4c6f-aba6-419d82b3da06\'), \'name\': \'测试知识库6\', \'description\': \'测试描述6\', \'user_id\': None, \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 13:03:39,600 - main - INFO - 🟢 [req_1753074216464] 500 - 3.135s
2025-07-21 13:03:49,550 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:03:49,659 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:03:49,699 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:03:50,074 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:03:50,642 - watchfiles.main - INFO - 5 changes detected
2025-07-21 13:03:52,078 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:03:52,078 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:03:52,078 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:03:52,078 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:03:52,079 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:03:52,079 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:03:52,122 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:03:52,123 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:03:52,123 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:03:52,123 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:03:52,123 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:03:52,123 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:03:54,248 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:03:54,248 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:54,259 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:03:54,259 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:54,778 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:03:54,778 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:03:54,778 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:54,778 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:55,279 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:03:55,279 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:55,298 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:03:55,298 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:03:55,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:03:55,818 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:03:55,819 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:03:55,819 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:03:55,838 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:03:55,838 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:03:56,330 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:03:56,330 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 13:03:56,380 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:03:56,380 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {}
2025-07-21 13:03:56,581 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:03:56,581 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:03:56,640 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:03:56,641 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:03:56,830 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:03:56,830 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 13:03:56,899 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:03:56,899 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {}
2025-07-21 13:03:57,091 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:03:57,091 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:03:57,160 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:03:57,160 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:03:57,350 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:03:57,366 - sqlalchemy.engine.Engine - INFO - [generated in 0.01675s] {}
2025-07-21 13:03:57,418 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:03:57,419 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:03:57,618 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:03:57,618 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:03:57,678 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:03:57,678 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:05:04,704 - main - INFO - 🔵 [req_1753074304704] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 13:05:04,705 - main - INFO - 🔵 [req_1753074304705] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 13:05:04,706 - main - INFO - 🟢 [req_1753074304704] 307 - 0.001s
2025-07-21 13:05:04,706 - main - INFO - 🟢 [req_1753074304705] 307 - 0.001s
2025-07-21 13:05:04,723 - main - INFO - 🔵 [req_1753074304723] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:05:04,724 - main - INFO - 🔵 [req_1753074304724] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 13:05:04,726 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:05:04,726 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:05:04,728 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:05:04,728 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:05:06,049 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:05:06,052 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:05:06,053 - sqlalchemy.engine.Engine - INFO - [generated in 0.00078s] {'param_1': 10, 'param_2': 0}
2025-07-21 13:05:07,811 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:05:07,813 - sqlalchemy.engine.Engine - INFO - [generated in 0.00218s] {}
2025-07-21 13:05:09,378 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:05:09,379 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:05:09,379 - sqlalchemy.engine.Engine - INFO - [cached since 3.327s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 13:05:09,900 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:05:09,900 - sqlalchemy.engine.Engine - INFO - [cached since 2.09s ago] {}
2025-07-21 13:05:10,161 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:05:10,162 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:05:10,419 - main - INFO - 🟢 [req_1753074304724] 200 - 5.695s
2025-07-21 13:05:10,420 - main - INFO - 🟢 [req_1753074304723] 200 - 5.696s
2025-07-21 13:05:19,271 - main - INFO - 🔵 [req_1753074319271] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:05:19,273 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:05:19,273 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:05:19,539 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:05:19,542 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:05:19,543 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] {'name_1': '111', 'param_1': 1}
2025-07-21 13:05:20,065 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:05:20,065 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] {'id': UUID('8390fdbc-077e-4470-a6d7-0d23397a35e1'), 'name': '111', 'description': '111', 'user_id': '00000000-0000-0000-0000-000000000000', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:05:20,362 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:05:20,668 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"
DETAIL:  Key (user_id)=(00000000-0000-0000-0000-000000000000) is not present in table "users".

[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('8390fdbc-077e-4470-a6d7-0d23397a35e1'), 'name': '111', 'description': '111', 'user_id': '00000000-0000-0000-0000-000000000000', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 13:05:20,669 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"\nDETAIL:  Key (user_id)=(00000000-0000-0000-0000-000000000000) is not present in table "users".\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'8390fdbc-077e-4470-a6d7-0d23397a35e1\'), \'name\': \'111\', \'description\': \'111\', \'user_id\': \'00000000-0000-0000-0000-000000000000\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 13:05:20,670 - main - INFO - 🟢 [req_1753074319271] 500 - 1.399s
2025-07-21 13:06:45,651 - main - INFO - 🔵 [req_1753074405651] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:06:45,667 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:06:45,667 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:06:45,919 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:06:45,919 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:06:45,919 - sqlalchemy.engine.Engine - INFO - [cached since 86.38s ago] {'name_1': '测试知识库7', 'param_1': 1}
2025-07-21 13:06:46,430 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:06:46,430 - sqlalchemy.engine.Engine - INFO - [cached since 86.36s ago] {'id': UUID('aeb54fc5-3dd5-4e8f-bc92-4b647eab571d'), 'name': '测试知识库7', 'description': '测试描述7', 'user_id': '00000000-0000-0000-0000-000000000000', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:06:46,689 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:06:47,419 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"
DETAIL:  Key (user_id)=(00000000-0000-0000-0000-000000000000) is not present in table "users".

[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('aeb54fc5-3dd5-4e8f-bc92-4b647eab571d'), 'name': '测试知识库7', 'description': '测试描述7', 'user_id': '00000000-0000-0000-0000-000000000000', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 13:06:47,420 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.ForeignKeyViolation) insert or update on table "knowledge_bases" violates foreign key constraint "knowledge_bases_user_id_fkey"\nDETAIL:  Key (user_id)=(00000000-0000-0000-0000-000000000000) is not present in table "users".\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'aeb54fc5-3dd5-4e8f-bc92-4b647eab571d\'), \'name\': \'测试知识库7\', \'description\': \'测试描述7\', \'user_id\': \'00000000-0000-0000-0000-000000000000\', \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 13:06:47,421 - main - INFO - 🟢 [req_1753074405651] 500 - 1.770s
2025-07-21 13:07:28,756 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:07:28,918 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:07:28,926 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:07:29,313 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:07:30,192 - watchfiles.main - INFO - 5 changes detected
2025-07-21 13:07:32,198 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:07:32,199 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:07:32,199 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:07:32,199 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:07:32,199 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:07:32,200 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:07:32,262 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:07:32,263 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:07:32,263 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:07:32,263 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:07:32,263 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:07:32,263 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:07:34,525 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:07:34,526 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:07:35,066 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:07:35,066 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:07:35,736 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:07:35,736 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:07:36,366 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:07:36,387 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:07:36,387 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:07:36,796 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:07:36,796 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:07:36,928 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:07:36,928 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 13:07:37,208 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:07:37,208 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:07:37,308 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:07:37,308 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:07:37,476 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:07:37,477 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:07:37,748 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:07:37,749 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:07:37,815 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:07:37,816 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:07:38,026 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:07:38,026 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:07:38,326 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:07:38,326 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:07:38,815 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:07:38,836 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:07:38,836 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:07:39,876 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:07:39,876 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:07:41,079 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:07:41,079 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:07:41,816 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:07:41,816 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:07:42,079 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:07:42,079 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:07:42,807 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:07:42,807 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 13:07:43,606 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:07:43,606 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:10:37,633 - main - INFO - 🔵 [req_1753074637633] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:10:37,635 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:10:37,635 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:10:38,946 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:10:38,949 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:10:38,949 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'name_1': '测试知识库8', 'param_1': 1}
2025-07-21 13:10:39,480 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:10:39,480 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] {'id': UUID('f0f12304-a5a0-4577-9b2a-8ebdfa86e94b'), 'name': '测试知识库8', 'description': '测试描述8', 'user_id': None, 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:10:39,737 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:10:40,047 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint
DETAIL:  Failing row contains (f0f12304-a5a0-4577-9b2a-8ebdfa86e94b, 测试知识库8, 测试描述8, null, token_based, 1024, 128, null, null, null, f, 0, 0, 2025-07-21 05:10:39.174084, 2025-07-21 05:10:39.174084, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, f, f, vector, 0.7).

[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]
[parameters: {'id': UUID('f0f12304-a5a0-4577-9b2a-8ebdfa86e94b'), 'name': '测试知识库8', 'description': '测试描述8', 'user_id': None, 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-21 13:10:40,048 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': '(psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "knowledge_bases" violates not-null constraint\nDETAIL:  Failing row contains (f0f12304-a5a0-4577-9b2a-8ebdfa86e94b, 测试知识库8, 测试描述8, null, token_based, 1024, 128, null, null, null, f, 0, 0, 2025-07-21 05:10:39.174084, 2025-07-21 05:10:39.174084, {}, default, null, 0, 0, Qwen/Qwen3-Embedding-8B, active, 0, 0, siliconflow, 8192, milvus, {}, f, f, vector, 0.7).\n\n[SQL: INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at]\n[parameters: {\'id\': UUID(\'f0f12304-a5a0-4577-9b2a-8ebdfa86e94b\'), \'name\': \'测试知识库8\', \'description\': \'测试描述8\', \'user_id\': None, \'embedding_provider\': \'siliconflow\', \'embedding_model\': \'Qwen/Qwen3-Embedding-8B\', \'embedding_dimension\': 8192, \'vector_store_type\': \'milvus\', \'vector_store_config\': \'{}\', \'chunk_size\': 1024, \'chunk_overlap\': 128, \'chunk_strategy\': \'token_based\', \'similarity_threshold\': 0.7, \'enable_hybrid_search\': False, \'enable_agno_integration\': False, \'agno_search_type\': \'vector\', \'status\': \'active\', \'document_count\': 0, \'chunk_count\': 0, \'total_size\': 0, \'settings\': \'{}\'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)'}
2025-07-21 13:10:40,049 - main - INFO - 🟢 [req_1753074637633] 500 - 2.415s
2025-07-21 13:13:38,540 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:13:38,659 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:13:38,730 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:13:39,121 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:13:39,952 - watchfiles.main - INFO - 5 changes detected
2025-07-21 13:13:42,001 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:13:42,002 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:13:42,002 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:13:42,002 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:13:42,002 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:13:42,002 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:13:42,066 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:13:42,066 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:13:42,066 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:13:42,067 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:13:42,067 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:13:42,067 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:13:44,373 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:13:44,373 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:13:44,403 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:13:44,403 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:13:44,886 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:13:44,886 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:13:44,934 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:13:44,934 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:13:45,393 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:13:45,393 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:13:45,473 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:13:45,473 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:13:45,904 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:13:45,924 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:13:45,924 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:13:45,993 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:13:46,015 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:13:46,015 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:13:46,434 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:13:46,434 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:13:46,544 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:13:46,544 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:13:46,686 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:13:46,686 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:13:46,806 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:13:46,807 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:13:46,944 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:13:46,945 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 13:13:47,075 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:13:47,076 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] {}
2025-07-21 13:13:47,195 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:13:47,196 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:13:47,335 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:13:47,335 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:13:47,465 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:13:47,465 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] {}
2025-07-21 13:13:47,604 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:13:47,605 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {}
2025-07-21 13:13:47,723 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:13:47,723 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:13:47,873 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:13:47,873 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:14:14,679 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:14:19,099 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 13:14:21,296 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:14:21,296 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:14:21,296 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:14:21,297 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:14:21,297 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:14:21,297 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:14:23,584 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:14:23,584 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:14:24,114 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:14:24,114 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:14:24,784 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:14:24,784 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:14:25,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:14:25,847 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:14:25,847 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:14:26,436 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:14:26,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 13:14:27,697 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:14:27,698 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:14:27,995 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:14:27,995 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 13:14:28,745 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:14:28,746 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:14:29,015 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:14:29,015 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 13:14:29,775 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 0, 'active_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:14:29,775 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:14:52,137 - main - INFO - 🔵 [req_1753074892137] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:14:52,139 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:14:52,139 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:14:53,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:14:53,558 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:14:53,558 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'name_1': '测试知识库', 'param_1': 1}
2025-07-21 13:14:54,138 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s::UUID, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:14:54,139 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] {'id': UUID('8fa6fedd-538b-4a1c-ac39-cc4d62f3d50b'), 'name': '测试知识库', 'description': '用于测试的知识库', 'user_id': 'system-user-kb-service', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:14:54,405 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-07-21 13:14:54,924 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:14:54,926 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id, knowledge_bases.name, knowledge_bases.description, knowledge_bases.user_id, knowledge_bases.embedding_provider, knowledge_bases.embedding_model, knowledge_bases.embedding_dimension, knowledge_bases.vector_store_type, knowledge_bases.vector_store_config, knowledge_bases.chunk_size, knowledge_bases.chunk_overlap, knowledge_bases.chunk_strategy, knowledge_bases.similarity_threshold, knowledge_bases.enable_hybrid_search, knowledge_bases.enable_agno_integration, knowledge_bases.agno_search_type, knowledge_bases.status, knowledge_bases.document_count, knowledge_bases.chunk_count, knowledge_bases.total_size, knowledge_bases.created_at, knowledge_bases.updated_at, knowledge_bases.settings 
FROM knowledge_bases 
WHERE knowledge_bases.id = %(pk_1)s::UUID
2025-07-21 13:14:54,926 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'pk_1': UUID('8fa6fedd-538b-4a1c-ac39-cc4d62f3d50b')}
2025-07-21 13:14:55,450 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:14:55,715 - app.core.enhanced_knowledge_manager - ERROR - Failed to create unified knowledge base: (psycopg2.errors.UndefinedFunction) operator does not exist: character varying = uuid
LINE 3: WHERE knowledge_bases.id = '8fa6fedd-538b-4a1c-ac39-cc4d62f3...
                                 ^
HINT:  No operator matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT knowledge_bases.id, knowledge_bases.name, knowledge_bases.description, knowledge_bases.user_id, knowledge_bases.embedding_provider, knowledge_bases.embedding_model, knowledge_bases.embedding_dimension, knowledge_bases.vector_store_type, knowledge_bases.vector_store_config, knowledge_bases.chunk_size, knowledge_bases.chunk_overlap, knowledge_bases.chunk_strategy, knowledge_bases.similarity_threshold, knowledge_bases.enable_hybrid_search, knowledge_bases.enable_agno_integration, knowledge_bases.agno_search_type, knowledge_bases.status, knowledge_bases.document_count, knowledge_bases.chunk_count, knowledge_bases.total_size, knowledge_bases.created_at, knowledge_bases.updated_at, knowledge_bases.settings 
FROM knowledge_bases 
WHERE knowledge_bases.id = %(pk_1)s::UUID]
[parameters: {'pk_1': UUID('8fa6fedd-538b-4a1c-ac39-cc4d62f3d50b')}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-21 13:14:55,716 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': "(psycopg2.errors.UndefinedFunction) operator does not exist: character varying = uuid\nLINE 3: WHERE knowledge_bases.id = '8fa6fedd-538b-4a1c-ac39-cc4d62f3...\n                                 ^\nHINT:  No operator matches the given name and argument types. You might need to add explicit type casts.\n\n[SQL: SELECT knowledge_bases.id, knowledge_bases.name, knowledge_bases.description, knowledge_bases.user_id, knowledge_bases.embedding_provider, knowledge_bases.embedding_model, knowledge_bases.embedding_dimension, knowledge_bases.vector_store_type, knowledge_bases.vector_store_config, knowledge_bases.chunk_size, knowledge_bases.chunk_overlap, knowledge_bases.chunk_strategy, knowledge_bases.similarity_threshold, knowledge_bases.enable_hybrid_search, knowledge_bases.enable_agno_integration, knowledge_bases.agno_search_type, knowledge_bases.status, knowledge_bases.document_count, knowledge_bases.chunk_count, knowledge_bases.total_size, knowledge_bases.created_at, knowledge_bases.updated_at, knowledge_bases.settings \nFROM knowledge_bases \nWHERE knowledge_bases.id = %(pk_1)s::UUID]\n[parameters: {'pk_1': UUID('8fa6fedd-538b-4a1c-ac39-cc4d62f3d50b')}]\n(Background on this error at: https://sqlalche.me/e/20/f405)"}
2025-07-21 13:14:55,717 - main - INFO - 🟢 [req_1753074892137] 500 - 3.579s
2025-07-21 13:15:37,148 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:15:37,308 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:15:37,334 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:15:37,718 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:15:38,287 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:15:39,758 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:15:39,758 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:15:39,758 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:15:39,758 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:15:39,759 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:15:39,759 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:15:39,802 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:15:39,803 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:15:39,803 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:15:39,803 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:15:39,803 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:15:39,803 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:15:42,034 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:15:42,034 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:42,064 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:15:42,064 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:42,614 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:15:42,615 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:42,625 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:15:42,625 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:43,137 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:15:43,137 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:43,166 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:15:43,166 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:43,728 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:15:43,752 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:15:43,753 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:15:43,755 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:15:43,777 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:15:43,777 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:15:44,277 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:15:44,277 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:15:44,317 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:15:44,317 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:15:44,537 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:15:44,538 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:15:44,587 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:15:44,587 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:15:44,808 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:15:44,808 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 13:15:44,855 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:15:44,856 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:15:45,066 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:15:45,066 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:15:45,126 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:15:45,126 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:15:45,325 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:15:45,325 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 13:15:45,395 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:15:45,395 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:15:45,585 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:15:45,585 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:15:45,665 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:15:45,665 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:15:51,878 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:15:52,011 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:15:52,025 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:15:52,404 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:15:52,970 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:15:54,437 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:15:54,438 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:15:54,438 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:15:54,438 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:15:54,438 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:15:54,438 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:15:54,478 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:15:54,478 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:15:54,478 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:15:54,479 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:15:54,479 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:15:54,479 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:15:56,674 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:15:56,674 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:56,684 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:15:56,685 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:57,196 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:15:57,196 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:57,206 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:15:57,206 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:57,718 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:15:57,718 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:57,724 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:15:57,724 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:15:58,245 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:15:58,245 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:15:58,264 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:15:58,264 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:15:58,265 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:15:58,265 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:15:58,787 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:15:58,787 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:15:58,787 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:15:58,787 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:15:59,047 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:15:59,047 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:15:59,047 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:15:59,047 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:15:59,307 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:15:59,307 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:15:59,307 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-21 13:15:59,307 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {}
2025-07-21 13:15:59,566 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:15:59,566 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:15:59,566 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:15:59,566 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:15:59,825 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:15:59,825 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:15:59,825 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:15:59,825 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:16:00,086 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:00,086 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:00,086 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:00,086 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:00,615 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:00,792 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:16:00,792 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:16:01,181 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:16:01,865 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:04,185 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:04,186 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:04,186 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:04,186 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:04,186 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:04,187 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:04,222 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:04,224 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:04,224 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:04,225 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:04,225 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:04,225 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:06,385 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:06,385 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:06,905 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:06,905 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:07,074 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:07,074 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:07,424 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:07,424 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:07,628 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:07,633 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:07,944 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:07,964 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:07,965 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:08,486 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:08,486 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {}
2025-07-21 13:16:08,634 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:08,635 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:08,748 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:08,748 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:09,015 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:09,016 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:16:09,144 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:09,166 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:09,166 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:09,276 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:09,276 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:09,535 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:09,536 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 13:16:09,794 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:09,794 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:10,159 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:10,159 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:16:10,490 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:10,490 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:10,665 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:10,756 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:10,757 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:16:10,802 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:16:11,016 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:11,016 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:11,275 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:11,276 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:16:11,544 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:11,544 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:11,929 - watchfiles.main - INFO - 4 changes detected
2025-07-21 13:16:13,566 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:13,567 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:13,567 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:13,567 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:13,567 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:13,567 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:14,319 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:14,320 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:14,320 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:14,321 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:14,321 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:14,321 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:15,664 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:15,664 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:16,185 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:16,185 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:16,474 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:16,474 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:16,694 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:16,694 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:16,995 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:16,995 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:17,514 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:17,514 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:17,674 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:17,695 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:17,695 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:18,034 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:18,056 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:18,056 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:18,215 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:18,215 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:16:18,477 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:18,477 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:18,575 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:18,575 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:16:18,603 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:18,736 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:18,736 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {}
2025-07-21 13:16:18,837 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:18,837 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:18,996 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:18,996 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:19,105 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:19,105 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 13:16:19,255 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:19,255 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {}
2025-07-21 13:16:19,366 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:19,366 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:19,514 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:19,514 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:19,625 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:19,625 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:16:19,885 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:19,885 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:20,268 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:16:20,681 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:22,300 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:22,301 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:22,301 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:22,301 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:22,301 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:22,301 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:22,600 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:22,601 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:22,601 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:22,601 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:22,602 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:22,602 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:24,464 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:24,464 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:24,637 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:24,637 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:24,995 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:24,996 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:25,135 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:25,135 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:25,534 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:25,534 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:25,634 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:25,634 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:26,065 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:26,087 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:26,087 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:26,136 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:26,158 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:26,159 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:26,667 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:26,667 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 13:16:26,919 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:26,919 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:27,105 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:27,105 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:16:27,175 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:27,175 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:16:27,186 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:27,427 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:27,427 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:27,684 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:27,685 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:16:27,846 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:27,846 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:27,935 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:27,935 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:28,115 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:28,115 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:16:28,313 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:16:28,385 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:28,385 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:28,644 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:28,644 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:16:28,881 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:28,913 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:28,913 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:29,244 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:16:30,370 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:30,370 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:30,370 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:30,371 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:30,371 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:30,371 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:31,338 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:31,339 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:31,339 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:31,339 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:31,339 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:31,339 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:33,104 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:33,104 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:33,563 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:33,563 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:33,620 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:33,620 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:34,083 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:34,084 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:34,142 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:34,143 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:34,682 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:34,682 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:34,683 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:34,707 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:34,707 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:35,212 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:35,231 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:35,232 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:35,243 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:35,244 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 13:16:35,506 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:35,507 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:35,754 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:35,754 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:16:35,774 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:35,774 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 13:16:36,026 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:36,027 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:36,046 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:36,046 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:36,294 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:36,294 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {}
2025-07-21 13:16:36,313 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:36,313 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:16:36,555 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:36,555 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:36,572 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:36,572 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:36,813 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:36,814 - sqlalchemy.engine.Engine - INFO - [generated in 0.00068s] {}
2025-07-21 13:16:37,082 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:37,082 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:37,930 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:38,083 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:16:38,089 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:16:38,470 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:16:39,043 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:40,534 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:40,534 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:40,534 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:40,535 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:40,535 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:40,535 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:40,554 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:40,554 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:40,554 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:40,555 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:40,555 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:40,555 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:42,751 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:42,751 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:16:42,751 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:42,751 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:43,261 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:43,261 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:43,271 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:16:43,272 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:43,781 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:43,781 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:16:43,781 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:43,781 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:16:44,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:44,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:16:44,320 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:44,320 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:16:44,320 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:44,320 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:16:44,832 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:44,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:16:44,842 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:16:44,842 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:16:45,096 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:45,096 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:45,104 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:16:45,105 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:16:45,392 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:45,392 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:16:45,392 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:16:45,392 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 13:16:45,653 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:45,653 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:16:45,653 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:45,653 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:16:45,953 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:45,953 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:16:45,953 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {}
2025-07-21 13:16:45,953 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {}
2025-07-21 13:16:46,271 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:46,271 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:16:46,272 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:46,272 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:16:56,083 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:56,243 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:16:56,243 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:16:56,623 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:16:57,195 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:16:58,655 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:58,655 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:58,655 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:58,656 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:58,656 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:58,656 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:16:58,693 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:16:58,694 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:16:58,694 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:16:58,694 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:16:58,694 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:16:58,695 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:00,950 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:00,950 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:01,470 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:01,471 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:01,700 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:01,700 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:01,992 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:01,993 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:02,250 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:02,250 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:02,510 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:02,528 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:02,529 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:02,790 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:02,790 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:03,062 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:03,062 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 13:17:03,271 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:03,326 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:03,326 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:03,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:03,356 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:03,356 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:03,591 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:03,591 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:17:03,952 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:03,952 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 13:17:03,953 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:03,953 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:04,261 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:04,261 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:17:04,262 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:04,262 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:04,520 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:04,520 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:04,531 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:04,531 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:17:04,802 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:04,802 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:05,071 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:05,071 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] {}
2025-07-21 13:17:05,340 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:05,340 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:05,716 - watchfiles.main - INFO - 4 changes detected
2025-07-21 13:17:06,961 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:06,962 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:06,962 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:06,962 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:06,962 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:06,962 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:07,776 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:07,777 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:07,777 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:07,778 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:07,778 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:07,778 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:10,351 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:10,351 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:10,480 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:10,481 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:10,851 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:10,852 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:11,001 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:11,001 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:11,350 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:11,350 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:11,520 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:11,520 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:12,067 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:12,091 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:12,091 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:12,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:12,351 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:12,351 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:12,621 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:12,621 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {}
2025-07-21 13:17:12,851 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:12,851 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {}
2025-07-21 13:17:12,882 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:12,883 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:13,112 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:13,112 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:13,151 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:13,151 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:17:13,371 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:13,372 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:17:13,412 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:13,412 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:13,631 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:13,632 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:13,670 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:13,671 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:17:13,891 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:13,891 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:17:13,940 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:13,940 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:14,150 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:14,150 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:15,440 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:15,547 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:17:15,561 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:17:15,926 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:17:16,609 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:18,327 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:18,328 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:18,328 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:18,329 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:18,329 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:18,329 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:18,345 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:18,345 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:18,345 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:18,346 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:18,346 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:18,346 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:20,410 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:20,410 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:20,480 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:20,480 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:20,911 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:20,911 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:21,091 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:21,091 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:21,420 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:21,420 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:21,610 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:21,610 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:21,712 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:21,920 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:21,942 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:21,942 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:22,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:22,171 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:22,172 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:22,452 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:22,452 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {}
2025-07-21 13:17:22,701 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:22,701 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:17:22,713 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:22,713 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:22,971 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:22,971 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:17:22,972 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:22,972 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:23,303 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:23,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:17:23,303 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:23,304 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:23,603 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:23,603 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {}
2025-07-21 13:17:23,605 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:23,605 - sqlalchemy.engine.Engine - INFO - [generated in 0.00039s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:23,860 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:23,860 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:23,861 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:23,861 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:17:24,123 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:24,124 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:24,241 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:17:24,959 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:26,590 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:26,591 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:26,591 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:26,591 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:26,591 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:26,591 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:26,819 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:26,819 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:26,819 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:26,820 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:26,820 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:26,820 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:28,881 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:28,881 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:29,360 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:29,360 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:29,390 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:29,391 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:29,891 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:29,891 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:29,900 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:29,900 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:30,128 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:30,430 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:30,430 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:30,430 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:30,453 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:30,453 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:31,000 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:31,020 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:31,020 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:31,431 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:31,431 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:17:31,541 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:31,541 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:17:31,693 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:31,693 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:31,951 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:31,951 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:17:32,211 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:32,212 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:32,284 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:32,285 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:32,906 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:32,906 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:17:32,930 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:32,931 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:17:33,171 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:33,172 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:33,191 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:33,191 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:33,441 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:33,441 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:17:33,700 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:33,700 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:34,078 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:17:34,438 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:35,867 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:35,867 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:35,867 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:35,868 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:35,868 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:35,868 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:36,378 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:36,379 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:36,379 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:36,380 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:36,380 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:36,380 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:38,652 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:38,652 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:39,090 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:39,090 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:39,180 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:39,180 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:39,620 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:39,620 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:39,700 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:39,700 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:40,140 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:40,140 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:40,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:40,240 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:40,240 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:40,671 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:40,692 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:40,693 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:40,761 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:40,761 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:17:41,022 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:41,023 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:41,221 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:41,221 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {}
2025-07-21 13:17:41,482 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:41,482 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:41,751 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:41,751 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:41,751 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:17:41,751 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {}
2025-07-21 13:17:42,012 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:42,011 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:42,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:42,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:42,271 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:42,271 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:42,271 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-21 13:17:42,271 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 13:17:42,530 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:42,530 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:42,540 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:42,540 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:43,650 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:43,838 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:17:43,851 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-21 13:17:44,235 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:17:44,864 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:46,457 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:46,457 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:46,457 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:46,458 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:46,458 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:46,458 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:46,490 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:46,490 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:46,490 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:46,491 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:46,491 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:46,491 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:49,390 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:49,390 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:49,819 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:49,920 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:49,920 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:50,520 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:50,520 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:50,950 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:50,950 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:51,050 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:51,051 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:51,490 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:51,511 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:51,512 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:51,580 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:51,580 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:52,031 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:52,031 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:17:52,120 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:17:52,142 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:17:52,142 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:17:52,302 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:52,303 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:52,572 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:52,572 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:17:52,681 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:17:52,681 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2025-07-21 13:17:52,842 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:52,842 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:52,953 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:17:52,953 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:17:53,221 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:17:53,221 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {}
2025-07-21 13:17:53,492 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:17:53,492 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:17:53,584 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:53,584 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 13:17:53,750 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:17:53,751 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:17:54,020 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:54,020 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:54,401 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:17:54,422 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:17:54,422 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:17:54,763 - watchfiles.main - INFO - 1 change detected
2025-07-21 13:17:55,124 - watchfiles.main - INFO - 3 changes detected
2025-07-21 13:17:56,569 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:56,570 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:56,570 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:56,570 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:56,570 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:56,571 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:56,961 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:17:56,972 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:17:56,972 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:17:56,972 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:17:56,972 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:17:56,972 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:17:58,630 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:58,630 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:59,141 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:17:59,142 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:59,650 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:17:59,650 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:17:59,760 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:17:59,761 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:18:00,161 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:18:00,184 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:18:00,184 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:18:00,291 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:18:00,292 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:18:00,702 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:18:00,703 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 13:18:00,954 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:18:00,955 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:18:01,211 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:18:01,211 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {}
2025-07-21 13:18:01,361 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:18:01,362 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:18:01,473 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:18:01,473 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:18:01,721 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:18:01,721 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 13:18:01,900 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:18:01,919 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:18:01,919 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:18:01,970 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:18:01,970 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:18:02,452 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:18:02,452 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {}
2025-07-21 13:18:02,723 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:18:02,723 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:18:02,992 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:18:02,992 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-21 13:18:03,263 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:18:03,264 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:18:03,531 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:18:03,532 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-21 13:18:03,800 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 1, 'active_knowledge_bases': 1, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 1}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:18:03,800 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:18:06,346 - main - INFO - 🔵 [req_1753075086346] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:18:06,347 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:18:06,348 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:18:07,631 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:18:07,634 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:18:07,634 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'name_1': '测试知识库', 'param_1': 1}
2025-07-21 13:18:08,161 - app.api.knowledge_routes - ERROR - Failed to create knowledge base: 400: {'error': 'KNOWLEDGE_BASE_CREATION_FAILED', 'message': "Knowledge base with name '测试知识库' already exists"}
2025-07-21 13:18:08,162 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:18:08,411 - main - INFO - 🟢 [req_1753075086346] 500 - 2.066s
2025-07-21 13:18:18,377 - main - INFO - 🔵 [req_1753075098377] POST http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:18:18,379 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:18:18,379 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:18:18,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:18:18,630 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases 
WHERE knowledge_bases.name = %(name_1)s 
 LIMIT %(param_1)s
2025-07-21 13:18:18,630 - sqlalchemy.engine.Engine - INFO - [cached since 11s ago] {'name_1': '硅基流动测试知识库', 'param_1': 1}
2025-07-21 13:18:19,144 - sqlalchemy.engine.Engine - INFO - INSERT INTO knowledge_bases (id, name, description, user_id, embedding_provider, embedding_model, embedding_dimension, vector_store_type, vector_store_config, chunk_size, chunk_overlap, chunk_strategy, similarity_threshold, enable_hybrid_search, enable_agno_integration, agno_search_type, status, document_count, chunk_count, total_size, settings) VALUES (%(id)s, %(name)s, %(description)s, %(user_id)s, %(embedding_provider)s, %(embedding_model)s, %(embedding_dimension)s, %(vector_store_type)s, %(vector_store_config)s::JSON, %(chunk_size)s, %(chunk_overlap)s, %(chunk_strategy)s, %(similarity_threshold)s, %(enable_hybrid_search)s, %(enable_agno_integration)s, %(agno_search_type)s, %(status)s, %(document_count)s, %(chunk_count)s, %(total_size)s, %(settings)s::JSON) RETURNING knowledge_bases.created_at, knowledge_bases.updated_at
2025-07-21 13:18:19,144 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] {'id': 'e7604a93-a8ab-46db-9b9f-b53f44eb47d0', 'name': '硅基流动测试知识库', 'description': '使用硅基流动模型的测试知识库', 'user_id': 'system-user-kb-service', 'embedding_provider': 'siliconflow', 'embedding_model': 'Qwen/Qwen3-Embedding-8B', 'embedding_dimension': 8192, 'vector_store_type': 'milvus', 'vector_store_config': '{}', 'chunk_size': 1024, 'chunk_overlap': 128, 'chunk_strategy': 'token_based', 'similarity_threshold': 0.7, 'enable_hybrid_search': False, 'enable_agno_integration': False, 'agno_search_type': 'vector', 'status': 'active', 'document_count': 0, 'chunk_count': 0, 'total_size': 0, 'settings': '{}'}
2025-07-21 13:18:19,401 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-07-21 13:18:19,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:18:19,937 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id, knowledge_bases.name, knowledge_bases.description, knowledge_bases.user_id, knowledge_bases.embedding_provider, knowledge_bases.embedding_model, knowledge_bases.embedding_dimension, knowledge_bases.vector_store_type, knowledge_bases.vector_store_config, knowledge_bases.chunk_size, knowledge_bases.chunk_overlap, knowledge_bases.chunk_strategy, knowledge_bases.similarity_threshold, knowledge_bases.enable_hybrid_search, knowledge_bases.enable_agno_integration, knowledge_bases.agno_search_type, knowledge_bases.status, knowledge_bases.document_count, knowledge_bases.chunk_count, knowledge_bases.total_size, knowledge_bases.created_at, knowledge_bases.updated_at, knowledge_bases.settings 
FROM knowledge_bases 
WHERE knowledge_bases.id = %(pk_1)s
2025-07-21 13:18:19,938 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'pk_1': 'e7604a93-a8ab-46db-9b9f-b53f44eb47d0'}
2025-07-21 13:18:20,631 - app.core.llamaindex_manager - INFO - LlamaIndex知识库初始化完成: e7604a93-a8ab-46db-9b9f-b53f44eb47d0
2025-07-21 13:18:20,631 - app.core.llamaindex_manager - INFO - Created LlamaIndex knowledge base: e7604a93-a8ab-46db-9b9f-b53f44eb47d0
2025-07-21 13:18:20,632 - app.core.enhanced_knowledge_manager - INFO - Created unified knowledge base: e7604a93-a8ab-46db-9b9f-b53f44eb47d0
2025-07-21 13:18:20,632 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:18:20,880 - main - INFO - 🟢 [req_1753075098377] 200 - 2.503s
2025-07-21 13:18:40,672 - main - INFO - 🔵 [req_1753075120672] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:18:40,673 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:18:40,673 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:18:40,930 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:18:40,931 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:18:40,932 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'param_1': 10, 'param_2': 0}
2025-07-21 13:18:41,485 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:18:41,486 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-21 13:18:41,792 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:18:42,041 - main - INFO - 🟢 [req_1753075120672] 200 - 1.369s
2025-07-21 13:20:10,261 - main - INFO - 🔵 [req_1753075210261] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 13:20:10,262 - main - INFO - 🔵 [req_1753075210261] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 13:20:10,262 - main - INFO - 🟢 [req_1753075210261] 307 - 0.001s
2025-07-21 13:20:10,262 - main - INFO - 🟢 [req_1753075210261] 307 - 0.001s
2025-07-21 13:20:10,287 - main - INFO - 🔵 [req_1753075210286] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:20:10,289 - main - INFO - 🔵 [req_1753075210289] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 13:20:10,291 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:20:10,291 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:20:10,292 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:20:10,292 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:20:10,541 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:20:10,541 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:20:10,541 - sqlalchemy.engine.Engine - INFO - [cached since 89.61s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 13:20:11,043 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:20:11,043 - sqlalchemy.engine.Engine - INFO - [cached since 89.56s ago] {}
2025-07-21 13:20:12,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:20:12,801 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:20:12,801 - sqlalchemy.engine.Engine - INFO - [cached since 91.87s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 13:20:13,432 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:20:13,432 - sqlalchemy.engine.Engine - INFO - [cached since 91.95s ago] {}
2025-07-21 13:20:13,742 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:20:13,742 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:20:14,051 - main - INFO - 🟢 [req_1753075210286] 200 - 3.765s
2025-07-21 13:20:14,461 - main - INFO - 🟢 [req_1753075210289] 200 - 4.172s
2025-07-21 13:44:34,142 - main - INFO - 🔵 [req_1753076674142] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 13:44:34,144 - main - INFO - 🔵 [req_1753076674144] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 13:44:34,144 - main - INFO - 🟢 [req_1753076674142] 307 - 0.002s
2025-07-21 13:44:34,145 - main - INFO - 🟢 [req_1753076674144] 307 - 0.001s
2025-07-21 13:44:34,169 - main - INFO - 🔵 [req_1753076674169] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:44:34,171 - main - INFO - 🔵 [req_1753076674171] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 13:44:34,201 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:44:34,202 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:44:34,202 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:44:34,202 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:46:07,886 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:46:07,887 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:46:07,887 - sqlalchemy.engine.Engine - INFO - [cached since 1647s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 13:46:08,415 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:46:08,415 - sqlalchemy.engine.Engine - INFO - [cached since 1647s ago] {}
2025-07-21 13:46:10,637 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:46:10,637 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:46:10,637 - sqlalchemy.engine.Engine - INFO - [cached since 1650s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 13:46:11,182 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:46:11,182 - sqlalchemy.engine.Engine - INFO - [cached since 1650s ago] {}
2025-07-21 13:46:11,447 - main - INFO - 🔵 [req_1753076771447] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 13:46:11,447 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:46:11,448 - main - INFO - 🔵 [req_1753076771448] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 13:46:11,448 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:46:11,449 - main - INFO - 🔵 [req_1753076771449] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 13:46:11,449 - main - INFO - 🟢 [req_1753076771447] 307 - 0.002s
2025-07-21 13:46:11,450 - main - INFO - 🔵 [req_1753076771450] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 13:46:11,450 - main - INFO - 🟢 [req_1753076771448] 307 - 0.002s
2025-07-21 13:46:11,450 - main - INFO - 🟢 [req_1753076771449] 307 - 0.002s
2025-07-21 13:46:11,451 - main - INFO - 🟢 [req_1753076771450] 307 - 0.002s
2025-07-21 13:46:11,452 - main - INFO - 🔵 [req_1753076771452] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:46:11,452 - main - INFO - 🔵 [req_1753076771452] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 13:46:11,453 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:46:11,453 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:46:11,454 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:46:11,454 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:46:12,836 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:46:12,837 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:46:12,837 - sqlalchemy.engine.Engine - INFO - [cached since 1652s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 13:46:13,360 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:46:13,360 - sqlalchemy.engine.Engine - INFO - [cached since 1652s ago] {}
2025-07-21 13:46:13,919 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:46:13,920 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:46:13,920 - sqlalchemy.engine.Engine - INFO - [cached since 1653s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 13:46:14,478 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:46:14,478 - sqlalchemy.engine.Engine - INFO - [cached since 1653s ago] {}
2025-07-21 13:46:14,751 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:46:14,752 - main - INFO - 🟢 [req_1753076674171] 200 - 100.581s
2025-07-21 13:46:14,751 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:46:14,752 - main - INFO - 🟢 [req_1753076674169] 200 - 100.583s
2025-07-21 13:46:15,025 - main - INFO - 🟢 [req_1753076771452] 200 - 3.573s
2025-07-21 13:46:15,025 - main - INFO - 🟢 [req_1753076771452] 200 - 3.573s
2025-07-21 13:46:15,026 - main - INFO - 🔵 [req_1753076775026] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:46:15,027 - main - INFO - 🔵 [req_1753076775027] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 13:46:15,028 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:46:15,028 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:46:15,028 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:46:15,028 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:46:15,304 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:46:15,305 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:46:15,305 - sqlalchemy.engine.Engine - INFO - [cached since 1654s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 13:46:15,867 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:46:15,867 - sqlalchemy.engine.Engine - INFO - [cached since 1654s ago] {}
2025-07-21 13:46:16,407 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:46:16,407 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:46:16,407 - sqlalchemy.engine.Engine - INFO - [cached since 1655s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 13:47:02,931 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 13:47:05,168 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 13:47:05,168 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 13:47:05,169 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 13:47:05,169 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:47:05,169 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:47:05,169 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 13:47:07,831 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 13:47:07,831 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:47:08,389 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 13:47:08,389 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:47:08,938 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 13:47:08,938 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 13:47:09,567 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:47:09,589 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 13:47:09,589 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'status_1': 'active', 'param_1': 1}
2025-07-21 13:47:10,158 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 13:47:10,159 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] {}
2025-07-21 13:47:10,481 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 13:47:10,482 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 13:47:10,835 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 13:47:10,835 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] {}
2025-07-21 13:47:11,221 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 13:47:11,222 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 13:47:11,524 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 13:47:11,525 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2025-07-21 13:47:11,833 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 2, 'active_knowledge_bases': 2, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 2, 'active_knowledge_bases': 2, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 2}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 13:47:11,833 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 13:47:19,669 - main - INFO - 🔵 [req_1753076839669] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 13:47:19,672 - main - INFO - 🔵 [req_1753076839672] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 13:47:19,673 - main - INFO - 🟢 [req_1753076839669] 307 - 0.004s
2025-07-21 13:47:19,674 - main - INFO - 🟢 [req_1753076839672] 307 - 0.002s
2025-07-21 13:47:19,699 - main - INFO - 🔵 [req_1753076839699] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 13:47:19,700 - main - INFO - 🔵 [req_1753076839700] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 13:47:19,701 - main - INFO - 🟢 [req_1753076839699] 307 - 0.001s
2025-07-21 13:47:19,701 - main - INFO - 🟢 [req_1753076839700] 307 - 0.001s
2025-07-21 13:47:19,724 - main - INFO - 🔵 [req_1753076839724] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:47:19,725 - main - INFO - 🔵 [req_1753076839725] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 13:47:19,727 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:47:19,727 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:47:19,727 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:47:19,727 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:47:21,253 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:47:21,256 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:47:21,256 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] {'param_1': 10, 'param_2': 0}
2025-07-21 13:47:21,819 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:47:21,819 - sqlalchemy.engine.Engine - INFO - [generated in 0.00042s] {}
2025-07-21 13:47:23,542 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:47:23,542 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:47:23,543 - sqlalchemy.engine.Engine - INFO - [cached since 2.287s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 13:47:24,979 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:47:24,979 - sqlalchemy.engine.Engine - INFO - [cached since 3.161s ago] {}
2025-07-21 13:47:25,245 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:47:25,245 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:47:25,502 - main - INFO - 🟢 [req_1753076839724] 200 - 5.777s
2025-07-21 13:47:25,502 - main - INFO - 🟢 [req_1753076839725] 200 - 5.777s
2025-07-21 13:47:25,504 - main - INFO - 🔵 [req_1753076845504] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:47:25,504 - main - INFO - 🔵 [req_1753076845504] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 13:47:25,505 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:47:25,505 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:47:25,506 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:47:25,506 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:47:25,754 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:47:25,754 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:47:25,754 - sqlalchemy.engine.Engine - INFO - [cached since 4.499s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 13:47:26,285 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:47:26,285 - sqlalchemy.engine.Engine - INFO - [cached since 4.467s ago] {}
2025-07-21 13:47:26,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 13:47:26,797 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 13:47:26,797 - sqlalchemy.engine.Engine - INFO - [cached since 5.541s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 13:47:27,319 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 13:47:27,320 - sqlalchemy.engine.Engine - INFO - [cached since 5.502s ago] {}
2025-07-21 13:47:27,576 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:47:27,577 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 13:47:27,843 - main - INFO - 🟢 [req_1753076845504] 200 - 2.338s
2025-07-21 13:47:27,843 - main - INFO - 🟢 [req_1753076845504] 200 - 2.339s
2025-07-21 13:57:33,493 - main - INFO - 🔵 [req_1753077453493] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 13:57:33,494 - main - INFO - 🔵 [req_1753077453494] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 13:57:33,494 - main - INFO - 🟢 [req_1753077453493] 307 - 0.001s
2025-07-21 13:57:33,495 - main - INFO - 🟢 [req_1753077453494] 307 - 0.001s
2025-07-21 13:57:33,496 - main - INFO - 🔵 [req_1753077453496] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 13:57:33,496 - main - INFO - 🔵 [req_1753077453496] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 13:57:33,498 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:57:33,498 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 13:57:33,498 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 13:57:33,498 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 14:00:32,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 14:00:32,011 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 14:00:32,012 - sqlalchemy.engine.Engine - INFO - [cached since 790.8s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 14:00:32,530 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 14:00:32,530 - sqlalchemy.engine.Engine - INFO - [cached since 790.7s ago] {}
2025-07-21 14:00:34,115 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 14:00:34,115 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 14:00:34,115 - sqlalchemy.engine.Engine - INFO - [cached since 792.9s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 14:00:34,641 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 14:00:34,642 - sqlalchemy.engine.Engine - INFO - [cached since 792.8s ago] {}
2025-07-21 14:00:34,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 14:00:34,903 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 14:00:35,172 - main - INFO - 🟢 [req_1753077453496] 200 - 181.675s
2025-07-21 14:00:35,172 - main - INFO - 🟢 [req_1753077453496] 200 - 181.676s
2025-07-21 15:15:28,469 - main - INFO - 🔵 [req_1753082128469] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 15:15:28,470 - main - INFO - 🔵 [req_1753082128470] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 15:15:28,470 - main - INFO - 🟢 [req_1753082128469] 307 - 0.001s
2025-07-21 15:15:28,471 - main - INFO - 🟢 [req_1753082128470] 307 - 0.001s
2025-07-21 15:15:28,526 - main - INFO - 🔵 [req_1753082128526] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 15:15:28,527 - main - INFO - 🔵 [req_1753082128527] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 15:15:28,564 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:15:28,564 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:15:28,564 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:15:28,564 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:20:45,741 - __main__ - INFO - 🚀 Starting Knowledge Service on port 8082
2025-07-21 15:20:50,175 - main - INFO - 🚀 Knowledge Service starting up...
2025-07-21 15:20:50,176 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-21 15:20:50,176 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-21 15:20:50,177 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:20:50,177 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:20:50,177 - main - INFO - ✅ Knowledge Manager initialized
2025-07-21 15:20:53,424 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-21 15:20:53,425 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 15:20:54,072 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-21 15:20:54,072 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 15:20:54,594 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-21 15:20:54,594 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-21 15:20:55,624 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 15:20:55,656 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-21 15:20:55,657 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] {'status_1': 'active', 'param_1': 1}
2025-07-21 15:20:56,197 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-21 15:20:56,197 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] {}
2025-07-21 15:20:56,459 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-21 15:20:56,459 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-21 15:20:56,720 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-21 15:20:56,720 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 15:20:56,985 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-21 15:20:56,985 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-21 15:20:57,248 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-21 15:20:57,248 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] {}
2025-07-21 15:20:57,511 - main - INFO - 📊 Knowledge Service Stats: {'unified_manager': {'total_knowledge_bases': 2, 'active_knowledge_bases': 2, 'total_documents': 0, 'total_chunks': 0, 'frameworks_enabled': ['llamaindex', 'agno']}, 'knowledge_bases': {'total_knowledge_bases': 2, 'active_knowledge_bases': 2, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 2}}, 'chunks': {'total_chunks': 0, 'embedded_chunks': 0, 'total_tokens': 0, 'avg_tokens': 0.0, 'max_tokens': 0, 'min_tokens': 0, 'embedding_models_distribution': {}}, 'processing_jobs': {'total_jobs': 0, 'pending_jobs': 0, 'running_jobs': 0, 'completed_jobs': 0, 'failed_jobs': 0, 'avg_duration': 0.0, 'job_types_distribution': {}}, 'llamaindex': {'framework': 'llamaindex', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_chunks': 0, 'available': False}, 'agno': {'framework': 'agno', 'total_knowledge_bases': 0, 'total_documents': 0, 'total_indexed_items': 0, 'available': False}}
2025-07-21 15:20:57,511 - main - INFO - 🎯 Knowledge Service ready on port 8082
2025-07-21 15:21:06,025 - main - INFO - 🔵 [req_1753082466025] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 15:21:06,027 - main - INFO - 🔵 [req_1753082466027] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 15:21:06,028 - main - INFO - 🟢 [req_1753082466025] 307 - 0.003s
2025-07-21 15:21:06,029 - main - INFO - 🟢 [req_1753082466027] 307 - 0.002s
2025-07-21 15:21:06,073 - main - INFO - 🔵 [req_1753082466073] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 15:21:06,073 - main - INFO - 🔵 [req_1753082466073] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 15:21:06,074 - main - INFO - 🟢 [req_1753082466073] 307 - 0.001s
2025-07-21 15:21:06,077 - main - INFO - 🟢 [req_1753082466073] 307 - 0.003s
2025-07-21 15:21:06,099 - main - INFO - 🔵 [req_1753082466099] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 15:21:06,100 - main - INFO - 🔵 [req_1753082466100] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 15:21:06,102 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:21:06,102 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:21:06,103 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:21:06,103 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:21:07,568 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 15:21:07,571 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 15:21:07,572 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] {'param_1': 10, 'param_2': 0}
2025-07-21 15:21:08,103 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 15:21:08,104 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] {}
2025-07-21 15:21:10,668 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 15:21:10,668 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 15:21:10,669 - sqlalchemy.engine.Engine - INFO - [cached since 3.098s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 15:21:11,187 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 15:21:11,187 - sqlalchemy.engine.Engine - INFO - [cached since 3.084s ago] {}
2025-07-21 15:21:11,436 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 15:21:11,437 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 15:21:11,690 - main - INFO - 🟢 [req_1753082466100] 200 - 5.590s
2025-07-21 15:21:11,691 - main - INFO - 🔵 [req_1753082471691] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 15:21:11,692 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:21:11,693 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:21:11,943 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 15:21:11,943 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 15:21:11,944 - sqlalchemy.engine.Engine - INFO - [cached since 4.373s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 15:21:12,491 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 15:21:12,492 - sqlalchemy.engine.Engine - INFO - [cached since 4.389s ago] {}
2025-07-21 15:21:12,750 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 15:21:12,751 - main - INFO - 🟢 [req_1753082466099] 200 - 6.652s
2025-07-21 15:21:12,752 - main - INFO - 🔵 [req_1753082472752] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 15:21:12,753 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:21:12,753 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:21:13,006 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 15:21:13,007 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 15:21:13,007 - sqlalchemy.engine.Engine - INFO - [cached since 5.436s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 15:21:13,528 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 15:21:13,528 - sqlalchemy.engine.Engine - INFO - [cached since 5.425s ago] {}
2025-07-21 15:21:13,785 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 15:21:13,785 - main - INFO - 🟢 [req_1753082471691] 200 - 2.094s
2025-07-21 15:21:14,054 - main - INFO - 🟢 [req_1753082472752] 200 - 1.302s
2025-07-21 15:25:34,055 - main - INFO - 🔵 [req_1753082734055] GET http://localhost:8082/api/v1/knowledge-bases
2025-07-21 15:25:34,056 - main - INFO - 🔵 [req_1753082734056] GET http://localhost:8082/api/v1/knowledge-bases?page=1&page_size=12
2025-07-21 15:25:34,057 - main - INFO - 🟢 [req_1753082734055] 307 - 0.002s
2025-07-21 15:25:34,058 - main - INFO - 🟢 [req_1753082734056] 307 - 0.002s
2025-07-21 15:25:34,105 - main - INFO - 🔵 [req_1753082734105] GET http://localhost:8082/api/v1/knowledge-bases/
2025-07-21 15:25:34,106 - main - INFO - 🔵 [req_1753082734106] GET http://localhost:8082/api/v1/knowledge-bases/?page=1&page_size=12
2025-07-21 15:25:34,110 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:25:34,110 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-21 15:25:34,111 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:25:34,111 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-21 15:28:07,966 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 15:28:07,968 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 15:28:07,968 - sqlalchemy.engine.Engine - INFO - [cached since 404.1s ago] {'param_1': 12, 'param_2': 0}
2025-07-21 15:28:08,484 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 15:28:08,484 - sqlalchemy.engine.Engine - INFO - [cached since 404.1s ago] {}
2025-07-21 15:28:10,108 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-21 15:28:10,109 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases ORDER BY knowledge_bases.updated_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
2025-07-21 15:28:10,109 - sqlalchemy.engine.Engine - INFO - [cached since 406.3s ago] {'param_1': 10, 'param_2': 0}
2025-07-21 15:28:10,661 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT knowledge_bases.id AS knowledge_bases_id, knowledge_bases.name AS knowledge_bases_name, knowledge_bases.description AS knowledge_bases_description, knowledge_bases.user_id AS knowledge_bases_user_id, knowledge_bases.embedding_provider AS knowledge_bases_embedding_provider, knowledge_bases.embedding_model AS knowledge_bases_embedding_model, knowledge_bases.embedding_dimension AS knowledge_bases_embedding_dimension, knowledge_bases.vector_store_type AS knowledge_bases_vector_store_type, knowledge_bases.vector_store_config AS knowledge_bases_vector_store_config, knowledge_bases.chunk_size AS knowledge_bases_chunk_size, knowledge_bases.chunk_overlap AS knowledge_bases_chunk_overlap, knowledge_bases.chunk_strategy AS knowledge_bases_chunk_strategy, knowledge_bases.similarity_threshold AS knowledge_bases_similarity_threshold, knowledge_bases.enable_hybrid_search AS knowledge_bases_enable_hybrid_search, knowledge_bases.enable_agno_integration AS knowledge_bases_enable_agno_integration, knowledge_bases.agno_search_type AS knowledge_bases_agno_search_type, knowledge_bases.status AS knowledge_bases_status, knowledge_bases.document_count AS knowledge_bases_document_count, knowledge_bases.chunk_count AS knowledge_bases_chunk_count, knowledge_bases.total_size AS knowledge_bases_total_size, knowledge_bases.created_at AS knowledge_bases_created_at, knowledge_bases.updated_at AS knowledge_bases_updated_at, knowledge_bases.settings AS knowledge_bases_settings 
FROM knowledge_bases) AS anon_1
2025-07-21 15:28:10,662 - sqlalchemy.engine.Engine - INFO - [cached since 406.3s ago] {}
2025-07-21 15:28:10,933 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 15:28:10,934 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-07-21 15:28:11,181 - main - INFO - 🟢 [req_1753082734106] 200 - 157.075s
2025-07-21 15:28:11,188 - main - INFO - 🟢 [req_1753082734105] 200 - 157.083s
2025-07-21 16:29:40,591 - main - INFO - 🛑 Knowledge Service shutting down...
2025-07-24 14:42:12,504 - __main__ - INFO - [STARTUP] 正在启动知识库服务...
2025-07-24 14:42:12,505 - __main__ - INFO - [CONFIG] 服务端口: 8082
2025-07-24 14:42:12,505 - __main__ - INFO - [CONFIG] 运行环境: development
2025-07-24 14:42:12,505 - __main__ - INFO - [RELOAD] 热重载已启用，监控目录: ['app', 'config']
2025-07-24 14:42:12,505 - __main__ - INFO - [STARTUP] 服务启动中...
2025-07-24 14:42:15,147 - main - INFO - [STARTUP] 正在初始化知识库服务应用...
2025-07-24 14:42:15,147 - main - INFO - [INIT] 正在初始化知识库管理器...
2025-07-24 14:42:15,148 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-24 14:42:15,148 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-24 14:42:15,148 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-24 14:42:15,148 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-24 14:42:15,148 - main - INFO - [SUCCESS] 知识库管理器初始化成功
2025-07-24 14:42:15,148 - main - INFO - [STATS] 正在获取服务统计信息...
2025-07-24 14:42:17,301 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-24 14:42:17,302 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:17,801 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-24 14:42:17,801 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:18,275 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-24 14:42:18,276 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:18,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-24 14:42:18,823 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-24 14:42:18,823 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {'status_1': 'active', 'param_1': 1}
2025-07-24 14:42:19,794 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-24 14:42:19,794 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] {}
2025-07-24 14:42:20,046 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-24 14:42:20,047 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-24 14:42:20,331 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-24 14:42:20,331 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] {}
2025-07-24 14:42:20,582 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-24 14:42:20,583 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-24 14:42:20,833 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-24 14:42:20,833 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-24 14:42:21,541 - main - INFO - [STATS] 服务统计: 知识库数量={'total_knowledge_bases': 2, 'active_knowledge_bases': 2, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 2}}, 文档数量=0
2025-07-24 14:42:21,541 - main - INFO - [READY] 知识库服务已就绪，监听端口: 8082
2025-07-24 14:42:21,542 - main - INFO - [READY] 服务文档地址: http://localhost:8082/docs
2025-07-24 14:42:32,696 - __main__ - INFO - [STARTUP] 正在启动知识库服务...
2025-07-24 14:42:32,697 - __main__ - INFO - [CONFIG] 服务端口: 8082
2025-07-24 14:42:32,697 - __main__ - INFO - [CONFIG] 运行环境: development
2025-07-24 14:42:32,697 - __main__ - INFO - [RELOAD] 热重载已启用，监控目录: ['app', 'config']
2025-07-24 14:42:32,697 - __main__ - INFO - [STARTUP] 服务启动中...
2025-07-24 14:42:35,050 - main - INFO - [STARTUP] 正在初始化知识库服务应用...
2025-07-24 14:42:35,050 - main - INFO - [INIT] 正在初始化知识库管理器...
2025-07-24 14:42:35,051 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-24 14:42:35,051 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-24 14:42:35,051 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-24 14:42:35,051 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-24 14:42:35,051 - main - INFO - [SUCCESS] 知识库管理器初始化成功
2025-07-24 14:42:35,051 - main - INFO - [STATS] 正在获取服务统计信息...
2025-07-24 14:42:37,226 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-24 14:42:37,227 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:37,841 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-24 14:42:37,841 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:38,343 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-24 14:42:38,344 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:38,862 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-24 14:42:38,882 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-24 14:42:38,882 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'status_1': 'active', 'param_1': 1}
2025-07-24 14:42:39,398 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-24 14:42:39,398 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] {}
2025-07-24 14:42:39,654 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-24 14:42:39,654 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-24 14:42:39,907 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-24 14:42:39,907 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] {}
2025-07-24 14:42:40,197 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-24 14:42:40,197 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-24 14:42:40,449 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-24 14:42:40,449 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] {}
2025-07-24 14:42:42,901 - __main__ - INFO - [STARTUP] 正在启动知识库服务...
2025-07-24 14:42:42,901 - __main__ - INFO - [CONFIG] 服务端口: 8082
2025-07-24 14:42:42,901 - __main__ - INFO - [CONFIG] 运行环境: development
2025-07-24 14:42:42,901 - __main__ - INFO - [RELOAD] 热重载已启用，监控目录: ['app', 'config']
2025-07-24 14:42:42,901 - __main__ - INFO - [STARTUP] 服务启动中...
2025-07-24 14:42:45,248 - main - INFO - [STARTUP] 正在初始化知识库服务应用...
2025-07-24 14:42:45,249 - main - INFO - [INIT] 正在初始化知识库管理器...
2025-07-24 14:42:45,249 - app.core.llamaindex_manager - INFO - LlamaIndex Manager initialized
2025-07-24 14:42:45,249 - app.core.agno_manager - INFO - Agno Manager initialized
2025-07-24 14:42:45,249 - app.core.splitters.semantic_based_splitter - INFO - SemanticBasedSplitter initialized with config: {'min_chunk_size': 100, 'max_chunk_size': 2000, 'similarity_threshold': 0.7, 'language': 'zh'}
2025-07-24 14:42:45,249 - app.core.enhanced_knowledge_manager - INFO - Unified Knowledge Manager initialized with enhanced data model
2025-07-24 14:42:45,249 - main - INFO - [SUCCESS] 知识库管理器初始化成功
2025-07-24 14:42:45,249 - main - INFO - [STATS] 正在获取服务统计信息...
2025-07-24 14:42:48,144 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-07-24 14:42:48,145 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:48,702 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-07-24 14:42:48,702 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:49,233 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-07-24 14:42:49,233 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2025-07-24 14:42:49,821 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-07-24 14:42:49,846 - sqlalchemy.engine.Engine - INFO - SELECT count(knowledge_bases.id) AS total_count, count(knowledge_bases.id) FILTER (WHERE knowledge_bases.status = %(status_1)s) AS active_count, sum(knowledge_bases.document_count) AS total_documents, sum(knowledge_bases.chunk_count) AS total_chunks, sum(knowledge_bases.total_size) AS total_size 
FROM knowledge_bases 
 LIMIT %(param_1)s
2025-07-24 14:42:49,846 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] {'status_1': 'active', 'param_1': 1}
2025-07-24 14:42:50,412 - sqlalchemy.engine.Engine - INFO - SELECT knowledge_bases.embedding_model AS knowledge_bases_embedding_model, count(knowledge_bases.id) AS count 
FROM knowledge_bases GROUP BY knowledge_bases.embedding_model
2025-07-24 14:42:50,412 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] {}
2025-07-24 14:42:50,698 - sqlalchemy.engine.Engine - INFO - SELECT count(document_chunks.id) AS total_chunks, count(document_chunks.id) FILTER (WHERE document_chunks.embedding_status = %(embedding_status_1)s) AS embedded_chunks, sum(document_chunks.token_count) AS total_tokens, avg(document_chunks.token_count) AS avg_tokens, max(document_chunks.token_count) AS max_tokens, min(document_chunks.token_count) AS min_tokens 
FROM document_chunks 
 LIMIT %(param_1)s
2025-07-24 14:42:50,698 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] {'embedding_status_1': 'completed', 'param_1': 1}
2025-07-24 14:42:50,975 - sqlalchemy.engine.Engine - INFO - SELECT document_chunks.embedding_model AS document_chunks_embedding_model, count(document_chunks.id) AS count 
FROM document_chunks 
WHERE document_chunks.embedding_model IS NOT NULL GROUP BY document_chunks.embedding_model
2025-07-24 14:42:50,975 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] {}
2025-07-24 14:42:51,256 - sqlalchemy.engine.Engine - INFO - SELECT count(processing_jobs.id) AS total_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_1)s) AS pending_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_2)s) AS running_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_3)s) AS completed_jobs, count(processing_jobs.id) FILTER (WHERE processing_jobs.status = %(status_4)s) AS failed_jobs, avg(processing_jobs.actual_duration) AS avg_duration 
FROM processing_jobs 
 LIMIT %(param_1)s
2025-07-24 14:42:51,257 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {'status_1': 'pending', 'status_2': 'running', 'status_3': 'completed', 'status_4': 'failed', 'param_1': 1}
2025-07-24 14:42:52,075 - sqlalchemy.engine.Engine - INFO - SELECT processing_jobs.job_type AS processing_jobs_job_type, count(processing_jobs.id) AS count 
FROM processing_jobs GROUP BY processing_jobs.job_type
2025-07-24 14:42:52,076 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] {}
2025-07-24 14:42:52,338 - main - INFO - [STATS] 服务统计: 知识库数量={'total_knowledge_bases': 2, 'active_knowledge_bases': 2, 'total_documents': 0, 'total_chunks': 0, 'total_size': 0, 'models_distribution': {'Qwen/Qwen3-Embedding-8B': 2}}, 文档数量=0
2025-07-24 14:42:52,338 - main - INFO - [READY] 知识库服务已就绪，监听端口: 8082
2025-07-24 14:42:52,338 - main - INFO - [READY] 服务文档地址: http://localhost:8082/docs
